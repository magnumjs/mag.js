/*! mag.js - 1.5.0 | (c)2020  https://github.com/magnumjs | MIT */
var mag=function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=4)}([function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"e",function(){return o}),t.d(n,"g",function(){return i}),t.d(n,"b",function(){return a}),t.d(n,"d",function(){return u}),t.d(n,"c",function(){return c}),t.d(n,"f",function(){}),t.d(n,"h",function(){}),t.d(n,"i",function(){return f});var r="__magnum__",o=[],i=[],a=[],u=["toString","draw","then","hasOwnProperty","willgetprops","onbeforeunload","Symbol(Symbol.toStringTag)","nodeType","toJSON","onunload","willupdate","didupdate","didload","willload","isupdate"],c=document,f=function(e){return e}},function(e,n,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.d(n,"i",function(){return o}),t.d(n,"a",function(){return i}),t.d(n,"d",function(){return a}),t.d(n,"c",function(){return u}),t.d(n,"b",function(){return c}),t.d(n,"j",function(){return f}),t.d(n,"e",function(){return l}),t.d(n,"h",function(){return d}),t.d(n,"k",function(){return v}),t.d(n,"g",function(){return y}),t.d(n,"f",function(){return p});var o=function(e){var n=r(e);return null!=e&&("object"==n||"function"==n)},i=function(e){return"string"==typeof e},a=function(e){return o(e)?Object.assign({},e):e},u=function(e){var n=function(){return e.apply(e,arguments)};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},c=function(e,n){return e.length===n.length&&e.every(function(e,t){return e===n[t]})},f=function(){return Object.assign.apply({},arguments)},l=function e(n,t,r){for(var i in t)if(void 0===t[i])delete t[i];else if(r&&o(t[i]))return e(n[i],t[i]);return f(n,t)},d=function(e){return e&&1===e.nodeType},s=function(e,n){return"function"==typeof n?""+n:n},v=function(e){return JSON.stringify(e,s)},y=function(e){for(var n in e)if(e.hasOwnProperty(n))return 0;return 1},p=function(e){return Array.isArray(e)}},function(e,n,t){"use strict";t.d(n,"b",function(){return i}),t.d(n,"a",function(){return a});var r=t(0),o=[],i=function(e,n,t){var r=e+"-"+n;return o[r]=o[r]||[],o[r].push(t),function(){var e=o[r].indexOf(t);return o[r].splice(e,1)}},a=function(e,n,t,i,a,u){var c;Object(r.i)(i);var f=n&&n[e];f&&!f.called&&(c=f.call(void 0,t,void 0,i,u),a&&(f.called=1));var l=e+"-"+i;if(o[l]){var d=o[l].slice(),s=!0,v=!1,y=void 0;try{for(var p,b=d[Symbol.iterator]();!(s=(p=b.next()).done);s=!0){(0,p.value)(n,void 0,t)}}catch(e){v=!0,y=e}finally{try{s||null==b.return||b.return()}finally{if(v)throw y}}}if(Object(r.i)(-1),!1===c)return!0}},function(e,n,t){"use strict";var r=t(0),o=function e(n,t,r){return e._handler(n,t,r)};o._handler=function(){},o.rafBounceIds=r.g,o._cprops=r.b,o.doc=r.c,n.a=o},function(e,n,t){var r=t(7);t(5),t(6),e.exports=r.default},function(e,n,t){"use strict";t.r(n),t.d(n,"useState",function(){return c});var r=t(3);t.d(n,"mag",function(){return r.a});var o=t(1);function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){a(e,n,t[n])})}return e}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u={},c=function(e){var n=Object(o.c)(r.a._current),t=n.key||n.id,a=n.props,c=n,f=(n.element,u[t]);if(!f){f={name:t,setValue:function(e){var n=Object(o.d)(e);"function"==typeof e&&(n=Object(o.d)(e(f.value))),n!==f.value&&(Object(o.i)(n)?f.value=i({},f.value,n):f.value=n,f.render(i({},a)))},render:c,value:Object(o.d)(e)},u[t]=f}return[f.value,f.setValue]};r.a.useState=c},function(e,n,t){"use strict";t.r(n),t.d(n,"useEffect",function(){return f});var r=t(3);t.d(n,"mag",function(){return r.a});var o=t(1),i=t(2),a={},u=function(e){return new Promise(function(n){requestAnimationFrame(function(){var t="function"==typeof e&&e();n(t)})})},c=function(e,n,t,r){var a=n[t];if(a)a&&!e?("function"==typeof a.callback&&a.callback(),u(r).then(function(e){return a.callback=e})):a&&!Object(o.b)(e,a.value)&&(a.value=e.slice(),"function"==typeof a.callback&&a.callback(),u(r).then(function(e){return a.callback=e}));else{a={name:t,func:r,value:e&&e.slice()},n[t]=a,u(r).then(function(e){return a.callback=e});var c=Object(i.b)("onunload",t,function(){"function"==typeof a.callback&&a.callback(),delete n[t],c()})}},f=function(e,n){r.a._current.element;var t=Object(o.c)(r.a._current),u=t.key||t.id;t.props,t.element;if(!t.fake)var f=Object(i.b)("didupdate",u,function(){r.a.doc.body.contains(arguments.length<=2?void 0:arguments[2])?c(n,a,u,e):function(e,n,t,o,i){var a=setInterval(function(){r.a.doc.body.contains(n)&&(clearInterval(a),c(t,o,e,i))},10)}(u,arguments.length<=2?void 0:arguments[2],n,a,e),f()})};r.a.useEffect=f},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(2),i=t(1);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u="/";function c(e,n,t,o){var c=new WeakSet;return new Proxy(e,{get:function(e,f,l){var d,s=e[f];if("symbol"==a(f))return s;if("object"!==a(s)||"symbol"===a(s)||null===s||"function"==typeof s||Array.isArray(s)||!Object(i.i)(s)||s.then||s.draw)f in e||~r.d.indexOf(f.toString())||t||"_"==f[0]||(s=e({},n,t,o+u+f));else if(d=s,!c.has(d))return c.add(s),e(s,n,t,o+u+f);var v=n({type:"get",object:e,name:f,path:o,oldValue:Reflect.get(e,f,l)});return void 0!==v&&(s=v==r.a?void 0:v),s},deleteProperty:function(e,t){return n({type:"delete",name:t,object:e,oldValue:Reflect.get(e,t)}),Reflect.deleteProperty(e,t)},set:function(e,t,r,o){var i=Reflect.get(e,t,o);return i===r&&"length"!==t||(n({type:"set",name:t,object:e,oldValue:i}),Reflect.set(e,t,r,o))}})}var f=function e(n,t,r,o){for(var f in n){var l=a(n[f]);Array.isArray(n[f])&&n[f].length<101?n[f]=c(n[f],t):"object"==l&&null!==n[f]&&"symbol"!=a(f)&&"symbol"!=l&&"function"!=l&&Object(i.i)(n[f])&&(n[f]=e(n[f],t,r,o+u+f))}return c(n,t,r,o||u)};function l(e,n){if(r.e[e]&&!n)return r.e[e];var t=r.c.getElementById(e);return t&&(r.e[e]=t),r.e[e]}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s,v,y,p,b,h,m,g=[],O=[],j="function",S=[],_=[],N={},k=function(){return v},w=function(){},x=function(e){return w=e},I=function(e){return y=e},A=function(){return p},E=function(e){return p=e},C=function(){return b},P=function(){return h},T=function(){return m},M=0,L=function(e){_[e]&&delete _[e]};function V(e,n){return e[r.a]=e[r.a]||{},e[r.a].uid&&!n||(e[r.a].uid=++M),e[r.a].uid}function H(e,n){var t=V(e);return S[t]&&!n?S[t]:S[t]=D(e)}function F(e,n){var t=V(e);if(_[A()]=_[A()]||[],_[A()][t]&&_[A()][t]==n)return 1;_[A()][t]=n}function q(e){var n="",t=function e(n){return b&&n.id&&b.isItem(n.id)?n:n.parentNode?e(n.parentNode):void 0}(e),r=function(e){for(var n=1;e=e.previousElementSibling;)++n;return n}(e);return t&&(n+='id("'+(t.id||t.tagName)+'")'),n+="/"+e.tagName+"["+r+"]"}function D(e,n){if(e.id&&A()===e.id||A()===e)return'id("'+(e.id||e.tagName)+'")';if(e===r.c.body)return e.tagName;var t=0;if(e.parentNode)for(var o=e.parentNode.childNodes,i=0,a=o.length;i<a;i++){var u=o[i];if(u===e)return D(e.parentNode)+(e.tagName?"/"+e.tagName+"["+(t+1)+"]":"");1===u.nodeType&&u.tagName===e.tagName&&t++}}function R(e){var n=D(e);e&&O[n+"-config"]&&O[n+"-config"].configContext&&d(O[n+"-config"].configContext.onunload)===j&&(O[n+"-config"].configContext.onunload(O[n+"-config"].configContext,e,n),delete O[n+"-config"],delete g[n]),y&&y(e),e.parentNode&&e.parentNode.removeChild(e)}function B(e){var n=e&&parseInt(e.split("[").pop().slice(0,-1));return n?parseInt(n)-1:0}var J=[];function $(e,n,t){var o=V(e);if(S[o])return S[o];if(J[o])return J[o];var i=+t==+t?n+t:n,a='id("'+("object"==d(A())?A().tagName:A())+'")'+("string"==typeof t?t.split(")")[1]+"/":"/")+e.tagName+"["+i+"]";return J[o]=e[r.a].xpath=a}function K(e,n,t){if(!(!n||e.childNodes[t]&&e.childNodes[t].isEqualNode(n))){for(var r=Y(e.childNodes),o=0,i=r.length;o<i;o++)r[o]&&e.removeChild(r[o]);e.childNodes[t]?e.replaceChild(n,e.childNodes[t]):e.appendChild(n)}}function Y(e){var n;if(null==e.length&&(e=[e]),!Object(i.f)(e)){n=[];for(var t=0;t<e.length;t+=1)e[t]&&n.push(e[t]);e=n}return e}var U=function(e,n,t){return function(e,n,t){if(l(e.id,1),_e(e.id,n)&&e){var r=fe(n);if(!Object(o.a)("isupdate",r,e,n)){if(ge(n)&&!t)return 0;if(!Object(o.a)("willupdate",r,e,n)){Se(e,n);var i=A();E(e.id),yn(e,r),E(i),function(e,n){for(var t in n)t.startsWith('id("'+e+'")/')&&n[t]()}(e.id,g),Object(o.a)("didupdate",r,e,n),t||ge(n)}}}}.bind({},e,n,t)},W=[],G=function(e,n,t){if(!W[n]){if(!e||void 0===n)throw Error("Mag.JS - Id or node invalid: "+Ee.getItemVal(n));if(!_e(e.id,n))return{then:function(e){return e()}};if(t&&g.splice(0,g.length),t&&Oe(n),ue==n)throw Error("Mag.JS - recursive call:"+n);return Ie(n,U(e,n,t))}},X=function(e,n){var t=A();E(e);var r=He(e,n);return E(t),r};function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Q="_value",Z=function(e,n,t,r){var o,i=t.toString().split(".");if(i.length>=3)r=function(e,n){for(var t=1;t<e.length;t++){var r=e[t],o=e[t+1],i=X(Array.isArray(n)?n[0]:n,r);if(o&&!isNaN(Number(o)))n=i[o];else if(i&&i.length&&o&&t+2<e.length)n=X(i[0],o);else if(i&&i.length&&(n=i,t+2==e.length))break}return Array.isArray(n)?n[0]:n}(i,r),o=X(r,n);else{var a=parseInt(i.pop()),u=isNaN(a)?0:a;o=X(r[u]?r[u]:r,n)}return function(e,n,t,r){var o=[];for(var i in e){var a=e[i];ne(a)&&(o.push(a),ee(a,n,t,r))}if(o.length)return 1==o.length?o[0]:o;return!1}(o,e,n,r)};function ee(e,n,t,o){if(e[r.a]=e[r.a]||{},!e[r.a].eventOnFocus){var i=function(n,t,o,i){var a=~["radio","checkbox"].indexOf(e.type);if(this[r.a].dirty||(this[r.a].dirty=1),e.selectedOptions)var u=Array.prototype.map.call(e.selectedOptions,function(e){return e.value});a?"_checked"in t||Q in t?t._checked=this.checked:this.checked&&(t[o]=this.value):void 0!==t[Q]?t[Q]=u||this.value:void 0!==t._text&&(t._text=u||this.value),G(n,Ee.getItem(n.id))}.bind(e,o,n,t);e.addEventListener("click",i),e.addEventListener("input",i),e.addEventListener("change",i),e.addEventListener("focus",i),e[r.a].eventOnFocus=1}}function ne(e){return e&&~["INPUT","SELECT","TEXTAREA"].indexOf(e.tagName)}var te=function(e,n,t,o){var i=t[n];~[Q,"_checked","_text"].indexOf(n)&&"string"==typeof e&&(n=e.split(".").pop());var a=function(e){for(var n in e)if(ne(e[n]))return e[n];return!1}(X(o,n));if("function"!=typeof i&&a){var u=Z.bind({},t,n,e,o);u(),Object.defineProperty(t,n,{configurable:!0,get:function(){var n=u();return n&&"undefined"!==n.value&&n[r.a]&&n[r.a].dirty&&n.value!==i?(i=n.value,G(o,e,1),n.value):i},set:function(e){var n=u();n&&"undefined"!==n.value&&n.value!==e&&e!==i&&(n.value=e,i=e)}})}},re=function e(n,t,r){for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];o==Q||"object"!==z(a)||Object(i.h)(a)?te.bind({},n,o,t,r)():(Object(i.i)(a)&&Object(i.g)(a)&&(a[Q]=""),e(n+"."+o,a,r))}};function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ie=[],ae={runningViewInstance:-1,cache:[]},ue=ae.runningViewInstance,ce=ae.innerMods=[],fe=ae.getState=function(e){return ie[e][1]};ae.setState=function(e,n){ie[e][1]=n},ae.getView=function(e){return ie[e][0]};var le=ae.getProps=function(e){return ie[e]&&ie[e][2]};ae.setProps=function(e,n){return ie[e][2]=n};var de=ae.remove=function(e){ie[e]&&(ie[e]=0)},se=ae.getId=function(e){return ie[e]&&ie[e][3]},ve=ae.exists=function(e){return"object"==oe(ie[e])},ye=ae.setFrameId=function(e,n){ie[e][4]=n};ae.getFrameId=function(e){return ie[e][4]};var pe=ae.getMod=function(e){return ie[e]&&ie[e][5]},be=function(e,n,t,r){if(ie[n])return r.key&&r.key==ae.getProps(n).key?ae.setProps(n,Object(i.d)(Object(i.j)(ae.getProps(n),r))):ae.setProps(n,r),ie[n];(function(e,n){for(var t in n=n||e,e){var r=e[t];"function"!=typeof r||~["controller","view"].indexOf(t)||(e[t]=r.bind(n))}})(t=Object(i.d)(t),t),ie[n]=[0,0,0,0,0,0],ae.setProps(n,r);var o={controller:function(r){return t.props=ae.getProps(n),t.state=r,t.element=l(e),(t.controller||function(){}).call(r,t.props)||r},view:function(e,n,r){t.element=r,t.state=n,t.props=ae.getProps(e),t.view&&t.view.call(t,n,t.props,r)}.bind({},n)};return ie[n][0]=o.view,ie[n][3]=e,ie[n][1]=function(e,n,t){return new e(f({},me.bind({},"state",n)))}(o.controller,n),ie[n][5]=t,ie[n]},he=[];var me=function(e,n,t){if("get"!=t.type||"props"==e||~r.d.indexOf(t.name.toString())||void 0!==t.oldValue)"set"==t.type&&"props"!=e&&t.object[t.name]&&t.object[t.name].draw&&"function"==typeof t.object[t.name].draw&&(ae.innerMods[ae.getId(n)]=[t.name,t.object[t.name]]);else{var o=l(ae.getId(n));if(t.path&&"/"==t.path[0])var a=function(e,n){var t=e,r=n.split("/"),o=!0,i=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var f=u.value;if(f){var l=mag._find(t,f);l.length&&(t=l)}}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return t}(o,t.path);a&&"$"!=t.path.split("/").pop()[0]&&(a=a[0]);var u=function(e,n){var t=e.name;if(void 0===e.object[e.name]&&"_"!=t[0]){var o=mag._find(n,t),i="$"===t[0],a=[];return o.length?(o.forEach(function(t){var o;if(t&&t.type&&!~["submit","button"].indexOf(t.type)){if(t.value&&t.value.length>0)if("checkbox"==t.type||"radio"==t.type)if(t.checked&&((o={})._checked=!0),i)o?o._value=t.value:o={_value:t.value};else{var u=n.querySelectorAll("[name="+t.name+"]");if(u.length){var c=!0,f=!1,l=void 0;try{for(var d,s=u[Symbol.iterator]();!(c=(d=s.next()).done);c=!0){var v=d.value;v.checked&&(o?o._value=v.value:o={_value:v.value})}}catch(e){f=!0,l=e}finally{try{c||null==s.return||s.return()}finally{if(f)throw l}}}}else o={_value:t.multiple&&Array.prototype.map.call(t.selectedOptions,function(e){return e.value})||t.value}}else void 0===e.oldValue&&void 0===e.object[e.name]&&t&&!~["submit","button"].indexOf(t.type)&&1==t.childNodes.length&&t.childNodes[0].textContent.trim()&&(o={_text:t.childNodes[0].textContent.trim()});o?a.push(o):t&&!t.hasChildNodes()&&a.push(r.a)}),0===a.length?void 0:i?a:a[0]&&void 0!==a[0]._value?a[0]._value:a[0]&&a[0]._text?a[0]._text:a[0]):r.a}if("_"==t[0]){var u=t.substr(1);if(n.length){for(var c in a=[],n){var f,l=n[c];void 0===(f=l[u])&&(f=l.getAttribute(u)),a.push(f)}return a}return void 0===(f=n[u])&&(f=n.getAttribute(u)),f}}(t,a||o);if(null!==u&&"object"==oe(u)&&t.object&&Object(i.j)(u,t.object[t.name]),u)return ae.cached[n]=0,u}var c=ae.getFrameId(n);"function"==typeof c&&"set"==t.type&&(cancelAnimationFrame(he[n]),he[n]=requestAnimationFrame(c))};var ge=ae.iscached=function(e){var n=Object(i.k)([ae.getProps(e),ae.getState(e)]);if(e in ae.cache&&ae.cache[e]==n)return!0;ae.cache[e]=n},Oe=ae.clear=function(e){~e&&ae.cache[e]&&ae.cache.splice(e,1)};ae.cached=[];var je,Se=function(e,n){ae.runningViewInstance=n,ae.cached[n]||(re(n,ae.getState(n),e),ae.cached[n]=1);try{ae.exists(n)&&ae.getView(n)(ae.getState(n),e)}finally{ae.runningViewInstance=-1}},_e=function(e,n){return!(n<0||n!=Ee.getItem(e))||e==se(n)},Ne={},ke=[],we=[],xe=[],Ie=function(e,n){return new Promise(function(t){r.f||r.g[e]&&n?(we[e]&&(xe[e](),cancelAnimationFrame(we[e])),xe[e]=t,we[e]=requestAnimationFrame(function(r){we[e]=0,n(),t()})):(n&&ke.push(n),je||(je=requestAnimationFrame(function(n){return function(e,n,t){var r;je=0;do{var o=ke.shift();o&&o(),r=performance.now()}while(ke.length&&Ae(r,n));ke.length?Ie(t).then(e):e()}(t,n,e)})))})};function Ae(e,n){return!r.h||e-n<r.h}var Ee={i:[],isItem:function(e){return~Ee.i.indexOf(e)},setItem:function(e){return Ee.i[Ee.i.length]=e},getItem:function(e){return Ee.i.indexOf(e)},getItemVal:function(e){return Ee.i[e]},removeItem:function(e){return Ee.i.splice(Ee.i.indexOf(e),1)}};Ne.items=Ee,Ne.getItemInstanceIdAll=function(){return Ee.i};var Ce=function(e){return Ee.isItem(e)?Ee.getItem(e):(Ee.setItem(e),Ee.getItem(e))},Pe={values:[],attributes:[],elementMatcher:[]},Te=function(e,n,t,r,o,i){e[t][r].key==n&&(i={v:o.value,k:o.key},o.change=!1,e[t][r].handler.call(e[t][r].context,o),i!=={v:o.value,k:o.key}&&(o.change=!0))},Me=function(e,n,t){for(var r=0,o=Pe[e].length;r<o;r++)Te(Pe,n,e,r,t)},Le=k(),Ve=C();function He(e,n,t){var r=function(e){var n=[];if(e){var t=e.childNodes;if(t)for(var r=0;r<t.length;r+=1)1===t[r].nodeType&&Fe(t[r])&&n.push(t[r])}return n}(e),o=[],i=n,a="$"===n[0];"$"===i[0]&&(i=i.substr(1));for(var u=0;u<r.length;u+=1)qe(r[u],i)&&o.push(r[u]);if(!o.length||a)for(u=0;u<r.length&&(!(o=o.concat(He(r[u],n,!0))).length||a);u++);if(!t&&!o.length&&Le){var c={key:n,value:o,node:e};Le("elementMatcher",n,c),c.change&&(o=c.value)}return o}function Fe(e){return A()&&e.id&&e.id!=A()&&Ve&&Ve.isItem(e.id)?0:1}function qe(e,n){var t=" "+e.className+" ";return e.id===n||~t.indexOf(" "+n+" ")||e.name===n||e.nodeName.toLowerCase()===n.toLowerCase()||e.getAttribute("data-bind")===n}var De=w,Re=[];function Be(e,n,t){(n?He(e,n):Y(e.childNodes.length?e.childNodes:e)).forEach(function(e){var n=V(e);if(n in Re){if(!t)for(var r in Re[n])e.appendChild(Re[n][r]);delete Re[n]}})}function Je(e,n){var t=0,r=function(e){if(1==++t)for(;e.lastChild;)R(e.lastChild)};(n?He(e,n):Y(e)).forEach(function(e){var n=V(e);e.childNodes.length&&(Re[n]=Y(e.childNodes));for(var t in Re[n]){var o=Re[n][t];De(o,function(){r(e)},1)}r(e)})}var $e=C(),Ke=T(),Ye=P(),Ue=s;function We(e,n){if(!F(e,n)&&(!n.id&&!e.childNodes[0]||n.id&&!r.c.getElementById(n.id)||e.firstChild&&!e.firstChild.isEqualNode(n))){var t;if($e&&(t=$e.getItem(n.id)),$e&&~t&&e.hasChildNodes()){var i=$e.getItem(getId()),a=e.cloneNode(1);a[r.a]={childof:i},Ye&&Ye.getProps&&(Ye.getProps(t).children=a),Ke(n,t)}else n[r.a]&&n[r.a].scid&&!r.b[n[r.a].scid]&&((a=e.cloneNode(1))[r.a]={childof:n[r.a].scid},r.b[n[r.a].scid]=a);for(;e.lastChild;)R(e.lastChild);if(n[r.a]&&void 0!==n[r.a].childof){e.innerHTML=n.innerHTML;var u=n[r.a].childof;!r.b[u]&&Ue&&(Ue(e,u),Object(o.b)("willupdate",u,function(){Ue(e,u)}))}else e.appendChild(n)}}var Ge=T(),Xe=C(),ze=P();function Qe(e,n){return function(e,n,t){var o,i=q(n),a=(o=i)&&~o.indexOf("id(")&&o.split('id("')[1].split('")')[0];a||(a=function e(n,t){if(n[r.a]&&n[r.a].scid&&!n[r.a].pscid)t=n;else if(t)return t;if(n.parentNode)return e(n.parentNode,t)}(n));var u=A();E(a);var c=function e(n){return n&&n[r.a]&&n[r.a].isItem?n:n.parentNode?e(n.parentNode):void 0}(n),f=c&&D(c),l=B(f),d=B(i=i),s={path:f,node:c,data:((c||{})[r.a]||[]).dataPass,index:l};E(u);var v=r.c.getElementById(a),y=Xe&&Xe.getItem(a),p=e.call(~y&&ze?ze.getMod(y):v,t,d,n,s);if(a&&v){var b=function(){Ge(v,y,1)};p&&p.then?p.then(function(e){return b(),e}):b()}return p}.bind({},n,e)}function Ze(e,n,t,o){var i=n.substr(2).toLowerCase(),a=("string"==typeof o?o.split("/")[0]:"")+"-"+t[r.a].uid,u=t[r.a].events=t[r.a].events||[],c=t[r.a].eventHandlers=t[r.a].eventHandlers||[];c[i]=c[i]||[],c[i][a]=e,u[i]||(u[i]=1,function(e,n){function t(t){var o=e[r.a].eventHandlers[n];for(var i in o){var a=o[i];!1===Qe(e,a)(t)&&t.preventDefault()}}e.removeEventListener(n,t),e.addEventListener(n,t)}(t,i))}var en=k();function nn(e,n,t,o){var a=B(t);for(var u in O[V(e)]=O[V(e)]||[],n)if("text"!==u&&"html"!==u)if(0==u.indexOf("on"))Ze(n[u],u,e,o);else{if("config"==u){a=B(t=H(e));var c=!0;O[t+"-config"]?c=!1:O[t+"-config"]={};var f=O[t+"-config"].configContext=O[t+"-config"].configContext||{};configs[t]=function(e,n){return function(){return e.apply(e,n)}}(n[u],[e,c,f,a]);continue}if(en){var d={key:u,value:n[u],node:e};en("attributes",u,d),d.change&&(n[u=d.key]=d.value)}if(O[V(e)]&&O[V(e)][u]==n[u])continue;null===n[u]?e.removeAttribute(u):"value"==u&&e.multiple&&e.selectedOptions&&Object(i.f)(n[u])?(e.value=n[u],n[u].forEach(function(n){Array.from(e.options).find(function(e){return e.value==n}).selected=!0})):u in e?"style"==u?e[u].cssText=n[u]:e[u]=n[u]:e.setAttribute(u,String(n[u])),O[V(e)][u]=n[u]}!function(e,n){if(e&&null!=n&&!F(e,n)){var t=String(n);if("INPUT"===e.nodeName)if(~["radio","checkbox"].indexOf(e.type)){if(e.name){var r=l(A()).querySelectorAll("[name="+e.name+"]");if(r.length>1){var o=!0,i=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var f=u.value;if(f.value==t){f.checked=!0;break}}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}}}else t!=e.value&&(e.value=t);else"SELECT"!==e.nodeName&&(e.firstChild?e.firstChild.textContent=t:e.appendChild(e.ownerDocument.createTextNode(t)));"SELECT"===e.nodeName&&t&&(e.value=t)}}(e,n.text),function(e,n){if(Object(i.f)(n))for(var t in n)K(e,n[t],t);else if(!Object(i.h)(n)||F(e,n))e&&null!=n&&!F(e,n)&&(e.innerHTML=n);else{if(n[r.a]&&n[r.a].scid&&!r.b[n[r.a].scid]){var o=e.cloneNode(1);o[r.a]={childof:n[r.a].scid},r.b[n[r.a].scid]=o}K(e,n,0)}}(e,n.html)}var tn=k();var rn=function(e){var n=r.c.createElement("template");return n.innerHTML=e,n.content.children[0]},on=["#KEY",".KEY","KEY"],an=function(e,n){var t;for(var r in on){var o=on[r].replace("KEY",n);if(t=e.querySelector(o))break}return t};function un(e){if(Object(i.a)(e)&&"<"==e.trim()[0])return rn(e)}var cn=function(e){if(Object(i.a)(e)){var n;if(n=un(e))return n;if(n=an(r.c,e))return n}return e};function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ln=P(),dn=function(e,n,t,o){var a=e((t=function(e){var n=[];return e.replace(/\[(.+?)\]/g,function(e,t){n.push(t)}),n}(o=H(n))).join("."),o);if(!a||!Object(i.h)(a))return sn(n,a,o);We(n,a),n[r.a]=n[r.a]||{},n[r.a].isItem=!0,n[r.a].dataPass={index:t},e.draw&&e.draw()};function sn(e,n,t,o){var a,u=ln&&ln.innerMods,c=B(t),f=un(n);if(f&&(n=f),n&&Object(i.h)(n))We(e,n);else{if("function"==typeof n)return dn(n,e,c,t);if("object"!==fn(n))return sn(e,{_text:n},t);u&&u[A()]&&n[u[A()][0]]&&!n[u[A()][0]].draw&&u[A()][1].destroy(),(a=function(e,n){var t;for(var o in n){var i=n[o];void 0===i?i="":null===i&&-1===["onunload"].indexOf(o)?(e[r.a].detached=e[r.a].detached||[],e[r.a].detached[o]=1,Je(e,o)):e[r.a].detached&&e[r.a].detached[o]&&(Be(e,o,i.nodeType),e[r.a].detached[o]=0),("_"===o[0]&&"_"!==o[1]||"on"==o.substr(0,2))&&(t=t||{},"on"==o.substr(0,2)?t[o]=i:t[o.substr(1)]=i)}return t}(e,n))&&nn(e,a,t,o),function(e,n,t){var o;for(var i in n){var a=n[i];if(!~r.d.indexOf(i)&&"_"!==i[0]&&"on"!=i.substr(0,2)){if(o=He(e,i),tn){var u={key:i,value:a,node:e};tn("values","*",u),u.change&&(a=u.value)}yn(o,a,t+"/"+i)}}}(e,n,t)}}function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yn=function e(n,t,o){var a,u;if(n){if(null===t&&o)Je(n,o);else{if(null===t&&!o)return n[r.a].detached=1,Je(n);n[r.a]&&n[r.a].detached&&!o&&(n[r.a].detached=0,Be(n))}var c=Y(n);if(u=Object(i.f)(t)){if(N[o]&&0===c.length&&(N[o].parent.insertAdjacentHTML("beforeend",N[o].node),c=Y(N[o].parent.childNodes)),!c.length)return;var f=c[0].parentNode;N[o]||(N[o]={node:c[0].cloneNode(1).outerHTML,parent:f});for(var l=r.c.createDocumentFragment(),d=0;c.length<t.length;)N[o]?(f.insertAdjacentHTML("beforeend",N[o].node),a=f.lastChild):a=c[0].cloneNode(1),$(a,++d,o),c.push(a),l.appendChild(a);f.appendChild(l);var s=t.map(function(e){return e&&e._key});if(c.length!=t.length&&-1===s.indexOf(void 0)||(t=t.map(function(e,n){if("object"===vn(e)){if(c[n][r.a]=c[n][r.a]||{},c[n][r.a].__key&&"undefined"===vn(e._key))return e._key=c[n][r.a].__key,e;"undefined"===vn(e._key)&&(e._key=r.a+n),c[n][r.a].__key=e._key}return e})),c.length>t.length)if(0===t.length||"object"!==vn(t[0]))for(;c.length>t.length;)(f=(a=c.pop()).parentNode)&&R(a);else{var v=[],y=t.map(function(e){return e._key});c=c.filter(function(e,n){var t;return"undefined"==vn(e[r.a])?t=1:~y.indexOf(e[r.a].__key)&&!~v.indexOf(e[r.a].__key)||(v.push(e[r.a].__key),t=1),t?(R(e),!1):(v.push(e[r.a].__key),!0)})}}for(var p=0;p<c.length;p++)if(u)c[p]&&e(c[p],t[p],p);else{var b=$(c[p],p+1,o);t&&"object"==vn(t)&&t.hasOwnProperty("_key")&&!Object(i.h)(t)&&(c[p][r.a].isItem=!0,c[p][r.a].dataPass=t),sn(c[p],t,b,o)}}};I(function e(n){var t=Ee.getItem(n.id);if(n.children)for(var i=0;i<n.children.length;i++)e(n.children[i]);~t?(Object(o.a)("onunload",fe(t),n,t),Oe(t),de(t),L(se(t))):n[r.a]&&n[r.a].scid&&Object(o.a)("onunload",{},n,n[r.a].scid)}),x(function(e,n,t){var i;e.id&&Ee.isItem(e.id)&&(i=Ee.getItem(e.id)),!i&&e[r.a]&&e[r.a].scid?Object(o.a)("onunload",{},e,e[r.a].scid):i&&fe(i).onbeforeunload?Object(o.a)("onbeforeunload",fe(i),e,i,0,function(){i&&Object(o.a)("onunload",fe(i),e,i),n()}):(i&&Object(o.a)("onunload",fe(i),e,i,1),n())}),h={getMod:pe,getProps:le,innerMods:ce},m=G,b=Ee,v=Me,s=function(e,n){var t=A();E(se(n)),yn(e,fe(n)),E(t)};var pn=function(e){return l(Ee.getItemVal(e))},bn=t(3),hn=function(e){if("string"==typeof e){if("<"==e.trim()[0]&&(n=rn(e)))return n;var n,t=pn(~ue||void 0);if(n=an(t||bn.a.doc,e))return n}return e},mn=0,gn=function(e){return Object(i.h)(e)&&(e.id||(e.id=++mn),r.e[e.id]=e,e=e.id),e},On=function(e,n){return Object(o.a)("willload",fe(e),n,e,1)},jn=function(e,n){if(l(Ee.getItemVal(e))&&ve(e))return Object(o.a)("didload",fe(e),n,e,1)},Sn=function(e,n){var t=function(e,n){l(n)?G(l(n),e):Ee.isItem(n)&&mag.clear(e)}.bind({},e,n);ye(e,t)},_n=function(e,n,t,r,a){var u=Ee.getItem(n);n=gn(e);var c=Object(i.k)(le(u));jn(u,e),ve(u)&&Object(o.a)("willgetprops",fe(u),e,u,0,t)||(be(e.id,u,r,t),c!=Object(i.k)(le(u))&&(a=1),Sn(u,e.id),On(u,e)||G(e,u,a).then(function(){jn(u,e)}))};function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var kn=[],wn={},xn=0,In=function(e,n,t,o){kn[e]=kn[e]||[];var a=function(e,n,t,r,o){"object"==Nn(o)&&(r=Object(i.j)(Object(i.d)(r),o),o=0),e<0&&!o&&(o=1);var u=n.id+(r.key?"."+r.key+".":"")+(o||"");!wn[u]||r.key||~a._id||(u+=++xn);var c=wn[u]=wn[u]||n.cloneNode(1);if(c.id=u,Ee.isItem(u))return _n(c,u,r,t),c;var f=Ce(c.id);return e<0?e=a._id=f:kn[e].push({instanceId:f,subscribe:subscriberHandler.bind({},f)}),_n(c,u,r,t),c}.bind({},e,n,t,o);return a._id=e,a.clones=function(){return kn[a._id]},a.destroy=function(e){destroyerHandler(a._id,a.clones,e)},a.getId=function(){return a._id},a.rafBounce=function(e){return e?r.g[a._id]=1:!1===e&&(r.g[a._id]=0),!!r.g[a._id]},a.draw=function(e){return bn.a.redraw(n,a._id,e)},a.getState=function(){return fe(a._id)},a.getProps=function(){return le(a._id)},a.subscribe=function(e){return subscriberHandler(a._id,e)},a};function An(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}x(function(e,n){e[r.a]&&e[r.a].scid?Object(o.a)("onunload",{},e,e[r.a].scid):n()}),I(function e(n){if(n.children)for(var t=0;t<n.children.length;t++)e(n.children[t]);n[r.a]&&n[r.a].scid&&Object(o.a)("onunload",{},n,n[r.a].scid)});var Cn=0;function Pn(e){var n=[];for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var i=r.reduce(function e(t,r){if(r&&r.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(r=r.childNodes),!Array.isArray(r)){if("object"===En(r)&&r instanceof Node){var o="p-".concat(++Cn,"-").concat(Date.now());return n.push({id:o,node:r}),t.concat("<".concat(r.nodeName,' id="').concat(o,'"></').concat(r.nodeName,">"))}return r&&"function"==typeof r.item&&"number"==typeof r.length?t.concat(Array.prototype.reduce.call(r,e,[])):t.concat(r)}t.concat(r)},[]).join("").replace(/^\s*</,"<").replace(/>\s*$/,">"),a=e.createElement("template");a.innerHTML=i;var u=a.content;n.forEach(function(e){var n=e.id,t=e.node,r=u.querySelector("".concat(t.nodeName,"#").concat(n));r.parentNode.replaceChild(t,r)});for(var c=!1,f=0;f<r.length;f++)if(""!=r[f]){if(r[f]instanceof Node){c=!0;break}break}if(1!=u.childNodes.length||c)return u;var l=u.firstChild;return u.removeChild(l),l}var Tn=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return function(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),o=2;o<t;o++)r[o-2]=arguments[o];var i=n.reduce(function(e,t,o){return e.concat(t,o+1===n.length?[]:r[o])},[]);return Pn.apply(void 0,[e].concat(An(i)))}.apply(void 0,[r.c,e].concat(t))};bn.a._handler=function(e,n,t){return Fn(e,n,t,yn,cn)},bn.a.dom=Tn;var Mn=bn.a;function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Vn=0,Hn=function(e,n,t,a){var u,c=[],f=e.cloneNode(1),l=[],d=function d(s){var v,y=e;void 0!==(s=s||{}).key&&(v=s.key+"-"+d.id);var p,b=void 0!==s.key?s.key+"-"+d.id:d.id;if(l[b]||(l[b]="object"==Ln(t)?Object(i.d)(t):t),"object"==Ln(s)&&(s=Object(i.e)(l[b],s)),v&&!c[v]?y=c[v]=f.cloneNode(1):v&&c[v]&&(y=c[v]),void 0!==Ln(d)&&s&&s.key&&d.key&&d.key!=b&&Object(o.a)("onunload",s,y,d.key),u&&u==y[r.a].scid)throw Error("MagJS Error - recursive call:"+u);y[r.a]=y[r.a]||{},Mn._cprops[b]&&"object"==Ln(s)&&(s.children=r.b[b]),d.props=s,d.key=b,d.fake=a;try{var h=Mn._current;Mn._current=d,p=n(s),u=y[r.a].scid=b;var m=A();m&&m[r.a]&&m[r.a].scid&&(y[r.a].pscid=m[r.a].scid),E(y),yn(y,p)}finally{Object(o.a)("didupdate",s,y,b),E(m),u=0,Mn._current=h}return y};return d.id=++Vn,d.element=f,d},Fn=function(e,n,t,o,a,u){if(e=a(e),n=a(n),t=t||{},Object(i.h)(n)&&Object(i.h)(e))n[r.a]||o(n,e);else{if("function"==typeof n&&Object(i.h)(e)){try{Hn(e.cloneNode(1),n,t,!0)()}catch(e){}return Hn(e,n,t)}if(u)return u(e,n,t)}};bn.a._handler=function(e,n,t){return Fn(e,n,t,yn,hn,function(e,n,t){return In(-1,l(gn(e)),n,t)})};var qn=bn.a;qn.hook=Me,qn.hookin=function(e,n,t){Pe[e].push({context:{},handler:t,key:n})},qn.redraw=G,qn.begin=function(e){void 0===W[e]?W[e]=1:W[e]++},qn.end=function(e){if(W[e]>1)W[e]--;else{W[e]=0;var n=Ee.getItemVal(e);G(l(n),e)}};qn.module=function(e,n,t){t=t||{};var r=function(e,n){var t=n?e+"-"+n:e;return Ee.isItem(t)?Ee.getItem(t):Ce(t)}(e=gn(e),t.key),o=Dn(t,r,n,e);if(o)return In(r,o,n,Object(i.d)(t))};var Dn=function(e,n,t,r){e.retain||Oe(n);var o=l(r);if(be(r,n,t,e),Sn(n,r),!On(n,o))return G(o,n,1).then(function(){jn(n,o)}),o};qn.clear=function(e){Ee.removeItem(e),Oe(e),L(se(e))};qn.getNode=l;n.default=qn}]);