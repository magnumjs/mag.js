/*! mag.js - 1.6.5 | (c)2020  https://github.com/magnumjs | MIT */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("mag",[],t):"object"==typeof exports?exports.mag=t():e.mag=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=6)}([function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"g",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"f",function(){}),n.d(t,"h",function(){}),n.d(t,"i",function(){return f});var r="__magnum__",i=[],a=[],o=[],c=["toString","draw","then","hasOwnProperty","willgetprops","onbeforeunload","Symbol(Symbol.toStringTag)","nodeType","toJSON","onunload","willupdate","didupdate","didload","willload","isupdate"],u=document,f=function(e){return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"i",function(){return i}),n.d(t,"k",function(){return a}),n.d(t,"j",function(){return o}),n.d(t,"g",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return l}),n.d(t,"l",function(){return d}),n.d(t,"d",function(){return s}),n.d(t,"h",function(){return v}),n.d(t,"m",function(){return p}),n.d(t,"f",function(){return h}),n.d(t,"e",function(){return g});var i=function(e){var t=r(e);return null!=e&&("object"==t||"function"==t)},a=function(e){return void 0===e},o=function(e){return"string"==typeof e},c=function(e){return"function"==r(e)},u=function(e){return i(e)?Object.assign({},e):e},f=function(e){var t=function(){return e.apply(e,arguments)};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},l=function(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})},d=function(){return Object.assign.apply({},arguments)},s=function e(t,n,r){for(var o in n)if(a(n[o]))delete n[o];else if(r&&i(n[o]))return e(t[o],n[o]);return d(t,n)},v=function(e){return e&&1===e.nodeType},b=function(e,t){return c(t)?""+t:t},p=function(e){return JSON.stringify(e,b)},h=function(e){for(var t in e)if(e.hasOwnProperty(t))return 0;return 1},g=function(e){return Array.isArray(e)}},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=n(0),i=[],a=function(e,t,n){var r=e+"-"+t;return i[r]=i[r]||[],i[r].push(n),function(){var e=i[r].indexOf(n);return i[r].splice(e,1)}},o=function(e,t,n,a,o,c){var u;Object(r.i)(a);var f=t&&t[e];f&&!f.called&&(u=f.call(void 0,n,void 0,a,c),o&&(f.called=1));var l=e+"-"+a;if(i[l]){var d=i[l].slice(),s=!0,v=!1,b=void 0;try{for(var p,h=d[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){(0,p.value)(t,void 0,n)}}catch(e){v=!0,b=e}finally{try{s||null==h.return||h.return()}finally{if(v)throw b}}}if(Object(r.i)(-1),!1===u)return!0}},function(e,t,n){"use strict";var r=n(0),i=function e(t,n,r){return e._handler(t,n,r)};i._handler=function(){},i.rafBounceIds=r.g,i._cprops=r.b,i.doc=r.c,t.a=i},function(e,t,n){"use strict";n.d(t,"b",function(){return o});var r=n(0),i=n(1),a=function(e){var t=r.c.createElement("template");return t.innerHTML=e,t.content};function o(e){if(Object(i.j)(e)&&"<"==e.trim()[0])return a(e).children[0]}t.a=a},function(e,t,n){"use strict";(function(e){var r=n(0),i=n(1),a=n(3),o=n(4);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=0;function f(e){var t=[],n=[];for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];var f=a.reduce(function e(r,a){a&&a.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(a=a.childNodes),Object(i.j)(a)&&a.split("<").forEach(function(e){var t=e[0];if(t&&t==t.toUpperCase()&&t!=t.toLowerCase()){var r=e.split("/")[0].split(" ")[0];n.push({name:r})}});if(!Object(i.e)(a)){if(Object(i.i)(a)&&Object(i.h)(a)){var o="p-".concat(++u,"-").concat(Date.now());return t.push({id:o,node:a}),~r[0].indexOf("=")?r.concat('"'.concat(o,'"')):r.concat("<".concat(a.nodeName,' id="').concat(o,'"></').concat(a.nodeName,">"))}return a&&"function"==typeof a.item&&"number"==typeof a.length?r.concat(Array.prototype.reduce.call(a,e,[])):r.concat(a)}r.concat(a)},[]).join("").replace(/^\s*</,"<").replace(/>\s*$/,">"),l=Object(o.a)(f),s=function(e,t){var n={};return e.forEach(function(e){var r=e.id,i=e.node,a=t.querySelector("".concat(i.nodeName,"#").concat(r));a?a.parentNode.replaceChild(i,a):n[r]=i}),n}(t,l);!function(e,t,n){e.forEach(function(e){var r=t.querySelectorAll(e.name);r&&r.forEach(function(t){for(var r={},i=0,a=t.attributes.length;i<a;i++){var o=t.attributes[i];r[o.name]=n[o.value]?n[o.value]:o.value}var c=d(e.name);if(c){var u=c(r);t.parentNode.replaceChild(u,t)}})})}(n,l,s);for(var v=!1,b=0;b<a.length;b++)if(""!=a[b]){if(a[b]instanceof Node){v=!0;break}break}if(1!=l.childNodes.length||v)return l;var p=l.firstChild;return l.removeChild(p),p}var l,d=function(e){return l[e]&&Object(i.g)(l[e])?l[e]:a.a[e]&&Object(i.g)(a.a[e])?a.a[e]:void 0};t.a=function(t){l=e||this||window;for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.reduce(function(e,n,i){return e.concat(n,i+1===t.length?[]:r[i])},[]);return f.apply(void 0,[e].concat(c(a)))}.apply(void 0,[r.c,t].concat(i))}}).call(this,n(7))},function(e,t,n){var r=n(10);n(8),n(9),r.default.version="1.6.5",e.exports=r.default},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";n.r(t),n.d(t,"useState",function(){return u});var r=n(3);n.d(t,"mag",function(){return r.a});var i=n(1);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={},u=function(e){var t=Object(i.b)(r.a._current),n=t.key||t.id,o=t.props,u=t,f=(t.element,c[n]);if(!f){f={name:n,setValue:function(e){var t=Object(i.c)(e);Object(i.g)(e)&&(t=Object(i.c)(e(f.value))),t!==f.value&&(Object(i.i)(t)?f.value=a({},f.value,t):f.value=t,f.render(a({},o)))},render:u,value:Object(i.c)(e)},c[n]=f}return[f.value,f.setValue]};r.a.useState=u},function(e,t,n){"use strict";n.r(t),n.d(t,"useEffect",function(){return f});var r=n(3);n.d(t,"mag",function(){return r.a});var i=n(1),a=n(2),o={},c=function(e){return new Promise(function(t){requestAnimationFrame(function(){var n=Object(i.g)(e)&&e();t(n)})})},u=function(e,t,n,r){var o=t[n];if(o)o&&!e?(Object(i.g)(o.callback)&&o.callback(),c(r).then(function(e){return o.callback=e})):o&&!Object(i.a)(e,o.value)&&(o.value=e.slice(),Object(i.g)(o.callback)&&o.callback(),c(r).then(function(e){return o.callback=e}));else{o={name:n,func:r,value:e&&e.slice()},t[n]=o,c(r).then(function(e){return o.callback=e});var u=Object(a.b)("onunload",n,function(){Object(i.g)(o.callback)&&o.callback(),delete t[n],u()})}},f=function(e,t){r.a._current.element;var n=Object(i.b)(r.a._current),c=n.key||n.id;n.props,n.element;if(!n.fake)var f=Object(a.b)("didupdate",c,function(){r.a.doc.body.contains(arguments.length<=2?void 0:arguments[2])?u(t,o,c,e):function(e,t,n,i,a){var o=setInterval(function(){r.a.doc.body.contains(t)&&(clearInterval(o),u(n,i,e,a))},10)}(c,arguments.length<=2?void 0:arguments[2],t,o,e),f()})};r.a.useEffect=f},function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n(2),o={},c=[],u=[],f=[],l=function(e,t){return new Promise(function(n){i.f||i.g[e]&&t?(u[e]&&(f[e](),cancelAnimationFrame(u[e])),f[e]=n,u[e]=requestAnimationFrame(function(r){u[e]=0,t(),n()})):(t&&c.push(t),r||(r=requestAnimationFrame(function(t){return function(e,t,n){var i;r=0;do{var a=c.shift();a&&a(),i=performance.now()}while(c.length&&d(i,t));c.length?l(n).then(e):e()}(n,t,e)})))})};function d(e,t){return!i.h||e-t<i.h}var s={i:[],isItem:function(e){return~s.i.indexOf(e)},setItem:function(e){return s.i[s.i.length]=e},getItem:function(e){return s.i.indexOf(e)},getItemVal:function(e){return s.i[e]},removeItem:function(e){return s.i.splice(s.i.indexOf(e),1)}};o.items=s,o.getItemInstanceIdAll=function(){return s.i};var v=function(e){return s.isItem(e)?s.getItem(e):(s.setItem(e),s.getItem(e))},b=n(1);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h="/";function g(e,t,n,r){var a=new WeakSet;return new Proxy(e,{get:function(e,o,c){var u,f=e[o];if("symbol"==p(o))return f;if(!Object(b.i)(f)||"symbol"===p(f)||null===f||Object(b.g)(f)||Object(b.e)(f)||!Object(b.i)(f)||f.then||f.draw)o in e||~i.d.indexOf(o.toString())||n||"_"==o[0]||(f=e({},t,n,r+h+o));else if(u=f,!a.has(u))return a.add(f),e(f,t,n,r+h+o);var l=t({type:"get",object:e,name:o,path:r,oldValue:Reflect.get(e,o,c)});return Object(b.k)(l)||(f=l==i.a?void 0:l),f},deleteProperty:function(e,n){return t({type:"delete",name:n,object:e,oldValue:Reflect.get(e,n)}),Reflect.deleteProperty(e,n)},set:function(e,n,r,i){var a=Reflect.get(e,n,i);return a===r&&"length"!==n||(t({type:"set",name:n,object:e,oldValue:a}),Reflect.set(e,n,r,i))}})}var y=function e(t,n,r,i){for(var a in t){var o=p(t[a]);Object(b.e)(t[a])&&t[a].length<101?t[a]=g(t[a],n):Object(b.i)(o)&&null!==t[a]&&"symbol"!=p(a)&&"symbol"!=o&&!Object(b.g)(o)&&Object(b.i)(t[a])&&(t[a]=e(t[a],n,r,i+h+a))}return g(t,n,r,i||h)};function m(e,t){if(i.e[e]&&!t)return i.e[e];var n=i.c.getElementById(e);return n&&(i.e[e]=n),i.e[e]}var O,j,k,N,_,w,x,I=[],S=[],E="_key",C=[],P=[],A={},T=function(){return j},M=function(){},L=function(e){return M=e},V=function(e){return k=e},F=function(){return N},H=function(e){return N=e},q=function(){return _},D=function(){return w},R=function(){return x},B=0,J=function(e){P[e]&&delete P[e]};function $(e,t){return e[i.a]=e[i.a]||{},e[i.a].uid&&!t||(e[i.a].uid=++B),e[i.a].uid}function K(e,t){var n=$(e);return C[n]&&!t?C[n]:C[n]=W(e)}function U(e,t){var n=$(e);if(P[F()]=P[F()]||[],P[F()][n]&&P[F()][n]==t)return 1;P[F()][n]=t}function Y(e){var t="",n=function e(t){return _&&t.id&&_.isItem(t.id)?t:t.parentNode?e(t.parentNode):void 0}(e),r=function(e){for(var t=1;e=e.previousElementSibling;)++t;return t}(e);return n&&(t+='id("'+(n.id||n.tagName)+'")'),t+="/"+e.tagName+"["+r+"]"}function W(e,t){if(e.id&&F()===e.id||F()===e)return'id("'+(e.id||e.tagName)+'")';if(e===i.c.body)return e.tagName;var n=0;if(e.parentNode)for(var r=e.parentNode.childNodes,a=0,o=r.length;a<o;a++){var c=r[a];if(c===e)return W(e.parentNode)+(e.tagName?"/"+e.tagName+"["+(n+1)+"]":"");1===c.nodeType&&c.tagName===e.tagName&&n++}}function G(e){var t=W(e);e&&S[t+"-config"]&&S[t+"-config"].configContext&&Object(b.g)(S[t+"-config"].configContext.onunload)&&(S[t+"-config"].configContext.onunload(S[t+"-config"].configContext,e,t),delete S[t+"-config"],delete I[t]),k&&k(e),e.parentNode&&e.parentNode.removeChild(e)}function X(e){var t=e&&parseInt(e.split("[").pop().slice(0,-1));return t?parseInt(t)-1:0}var z=[];function Q(e,t,n){var r=$(e);if(C[r])return C[r];if(z[r])return z[r];var a=+n==+n?t+n:t,o='id("'+(Object(b.i)(F())?F().tagName:F())+'")'+(Object(b.j)(n)?n.split(")")[1]+"/":"/")+e.tagName+"["+a+"]";return z[r]=e[i.a].xpath=o}function Z(e,t,n){if(!(!t||e.childNodes[n]&&e.childNodes[n].isEqualNode(t))){for(var r=ee(e.childNodes),i=0,a=r.length;i<a;i++)r[i]&&e.removeChild(r[i]);e.childNodes[n]?e.replaceChild(t,e.childNodes[n]):e.appendChild(t)}}function ee(e){var t;if(null==e.length&&(e=[e]),!Object(b.e)(e)){t=[];for(var n=0;n<e.length;n+=1)e[n]&&t.push(e[n]);e=t}return e}var te=function(e,t,n){return function(e,t,n){if(m(e.id,1),Se(e.id,t)&&e){var r=pe(t);if(!Object(a.a)("isupdate",r,e,t)){if(we(t)&&!n)return 0;if(!Object(a.a)("willupdate",r,e,t)){Ie(e,t);var i=F();H(e.id),it(e,r),H(i),function(e,t){for(var n in t)n.startsWith('id("'+e+'")/')&&t[n]()}(e.id,I),Object(a.a)("didupdate",r,e,t),n||we(t)}}}}.bind({},e,t,n)},ne=[],re=function(e,t,n){if(!ne[t]){if(!e||Object(b.k)(t))throw Error("Mag.JS - Id or node invalid: "+s.getItemVal(t));if(!Se(e.id,t))return{then:function(e){return e()}};if(n&&I.splice(0,I.length),n&&xe(t),ve==t)throw Error("Mag.JS - recursive call:"+t);return l(t,te(e,t,n))}},ie=function(e,t){var n=F();H(e);var r=Me(e,t);return H(n),r},ae="_value",oe=function(e,t,n,r){var i,a=n.toString().split(".");if(a.length>=3)r=function(e,t){for(var n=1;n<e.length;n++){var r=e[n],i=e[n+1],a=ie(Object(b.e)(t)?t[0]:t,r);if(i&&!isNaN(Number(i)))t=a[i];else if(a&&a.length&&i&&n+2<e.length)t=ie(a[0],i);else if(a&&a.length&&(t=a,n+2==e.length))break}return Object(b.e)(t)?t[0]:t}(a,r),i=ie(r,t);else{var o=parseInt(a.pop()),c=isNaN(o)?0:o;i=ie(r[c]?r[c]:r,t)}return function(e,t,n,r){var i=[];for(var a in e){var o=e[a];ue(o)&&(i.push(o),ce(o,t,n,r))}if(i.length)return 1==i.length?i[0]:i;return!1}(i,e,t,r)};function ce(e,t,n,r){if(e[i.a]=e[i.a]||{},!e[i.a].eventOnFocus){var a=function(t,n,r,a){var o=~["radio","checkbox"].indexOf(e.type);if(this[i.a].dirty||(this[i.a].dirty=1),e.selectedOptions)var c=Array.prototype.map.call(e.selectedOptions,function(e){return e.value});o?"_checked"in n||ae in n?n._checked=this.checked:this.checked&&(n[r]=this.value):Object(b.k)(n[ae])?Object(b.k)(n._text)||(n._text=c||this.value):n[ae]=c||this.value,re(t,s.getItem(t.id))}.bind(e,r,t,n);e.addEventListener("click",a),e.addEventListener("input",a),e.addEventListener("change",a),e.addEventListener("focus",a),e[i.a].eventOnFocus=1}}function ue(e){return e&&~["INPUT","SELECT","TEXTAREA"].indexOf(e.tagName)}var fe=function(e,t,n,r){var a=n[t];~[ae,"_checked","_text"].indexOf(t)&&Object(b.j)(e)&&(t=e.split(".").pop());var o=function(e){for(var t in e)if(ue(e[t]))return e[t];return!1}(ie(r,t));if(!Object(b.g)(a)&&o){var c=oe.bind({},n,t,e,r);c(),Object.defineProperty(n,t,{configurable:!0,get:function(){var t=c();return t&&!Object(b.k)(t.value)&&t[i.a]&&t[i.a].dirty&&t.value!==a?(a=t.value,re(r,e,1),t.value):a},set:function(e){var t=c();t&&!Object(b.k)(t.value)&&t.value!==e&&e!==a&&(t.value=e,a=e)}})}},le=function e(t,n,r){for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];i!=ae&&Object(b.i)(a)&&!Object(b.h)(a)?(Object(b.i)(a)&&Object(b.f)(a)&&(a[ae]=""),e(t+"."+i,a,r)):fe.bind({},t,i,n,r)()}},de=[],se={runningViewInstance:-1,cache:[]},ve=se.runningViewInstance,be=se.innerMods=[],pe=se.getState=function(e){return de[e][1]};se.setState=function(e,t){de[e][1]=t},se.getView=function(e){return de[e][0]};var he=se.getProps=function(e){return de[e]&&de[e][2]};se.setProps=function(e,t){return de[e][2]=t};var ge=se.remove=function(e){de[e]&&(de[e]=0)},ye=se.getId=function(e){return de[e]&&de[e][3]},me=se.exists=function(e){return Object(b.i)(de[e])},Oe=se.setFrameId=function(e,t){de[e][4]=t};se.getFrameId=function(e){return de[e][4]};var je=se.getMod=function(e){return de[e]&&de[e][5]},ke=function(e,t,n,r){if(de[t])return r.key&&r.key==se.getProps(t).key?se.setProps(t,Object(b.c)(Object(b.l)(se.getProps(t),r))):se.setProps(t,r),de[t];(function(e,t){for(var n in t=t||e,e){var r=e[n];Object(b.g)(r)&&!~["controller","view"].indexOf(n)&&(e[n]=r.bind(t))}})(n=Object(b.c)(n),n),de[t]=[0,0,0,0,0,0],se.setProps(t,r);var i={controller:function(r){return n.props=se.getProps(t),n.state=r,n.element=m(e),(n.controller||function(){}).call(r,n.props)||r},view:function(e,t,r){n.element=r,n.state=t,n.props=se.getProps(e),n.view&&n.view.call(n,t,n.props,r)}.bind({},t)};return de[t][0]=i.view,de[t][3]=e,de[t][1]=function(e,t,n){return new e(y({},_e.bind({},"state",t)))}(i.controller,t),de[t][5]=n,de[t]},Ne=[];var _e=function(e,t,n){if("get"==n.type&&"props"!=e&&!~i.d.indexOf(n.name.toString())&&Object(b.k)(n.oldValue)){var r=m(se.getId(t));if(n.path&&"/"==n.path[0])var a=function(e,t){var n=e,r=t.split("/"),i=!0,a=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=c.value;if(f){var l=mag._find(n,f);l.length&&(n=l)}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n}(r,n.path);a&&"$"!=n.path.split("/").pop()[0]&&(a=a[0]);var o=function(e,t){var n=e.name;if(Object(b.k)(e.object[e.name])&&"_"!=n[0]){var r=mag._find(t,n),a="$"===n[0],o=[];return r.length?(r.forEach(function(n){var r;if(n&&n.type&&!~["submit","button"].indexOf(n.type)){if(n.value&&n.value.length>0)if("checkbox"==n.type||"radio"==n.type)if(n.checked&&((r={})._checked=!0),a)r?r._value=n.value:r={_value:n.value};else{var c=t.querySelectorAll("[name="+n.name+"]");if(c.length){var u=!0,f=!1,l=void 0;try{for(var d,s=c[Symbol.iterator]();!(u=(d=s.next()).done);u=!0){var v=d.value;v.checked&&(r?r._value=v.value:r={_value:v.value})}}catch(e){f=!0,l=e}finally{try{u||null==s.return||s.return()}finally{if(f)throw l}}}}else r={_value:n.multiple&&Array.prototype.map.call(n.selectedOptions,function(e){return e.value})||n.value}}else Object(b.k)(e.oldValue)&&Object(b.k)(e.object[e.name])&&n&&!~["submit","button"].indexOf(n.type)&&1==n.childNodes.length&&n.childNodes[0].textContent.trim()&&(r={_text:n.childNodes[0].textContent.trim()});r?o.push(r):n&&!n.hasChildNodes()&&o.push(i.a)}),0===o.length?void 0:a?o:o[0]&&!Object(b.k)(o[0]._value)?o[0]._value:o[0]&&o[0]._text?o[0]._text:o[0]):i.a}if("_"==n[0]){var c=n.substr(1);if(t.length){for(var u in o=[],t){var f=t[u],l=f[c];Object(b.k)(l)&&(l=f.getAttribute(c)),o.push(l)}return o}return l=t[c],Object(b.k)(l)&&(l=t.getAttribute(c)),l}}(n,a||r);if(null!==o&&Object(b.i)(o)&&n.object&&Object(b.l)(o,n.object[n.name]),o)return se.cached[t]=0,o}else"set"==n.type&&"props"!=e&&n.object[n.name]&&n.object[n.name].draw&&Object(b.g)(n.object[n.name].draw)&&(se.innerMods[se.getId(t)]=[n.name,n.object[n.name]]);var c=se.getFrameId(t);Object(b.g)(c)&&"set"==n.type&&(cancelAnimationFrame(Ne[t]),Ne[t]=requestAnimationFrame(c))};var we=se.iscached=function(e){var t=Object(b.m)([se.getProps(e),se.getState(e)]);if(e in se.cache&&se.cache[e]==t)return!0;se.cache[e]=t},xe=se.clear=function(e){~e&&se.cache[e]&&se.cache.splice(e,1)};se.cached=[];var Ie=function(e,t){se.runningViewInstance=t,se.cached[t]||(le(t,se.getState(t),e),se.cached[t]=1);try{se.exists(t)&&se.getView(t)(se.getState(t),e)}finally{se.runningViewInstance=-1}},Se=function(e,t){return!(t<0||t!=s.getItem(e))||e==ye(t)},Ee={values:[],attributes:[],elementMatcher:[]},Ce=function(e,t,n,r,i,a){e[n][r].key==t&&(a={v:i.value,k:i.key},i.change=!1,e[n][r].handler.call(e[n][r].context,i),a!=={v:i.value,k:i.key}&&(i.change=!0))},Pe=function(e,t,n){for(var r=0,i=Ee[e].length;r<i;r++)Ce(Ee,t,e,r,n)},Ae=T(),Te=q();function Me(e,t,n){var r=function(e){var t=[];if(e){var n=e.childNodes;if(n)for(var r=0;r<n.length;r+=1)1===n[r].nodeType&&Le(n[r])&&t.push(n[r])}return t}(e),i=[],a=t,o="$"===t[0];"$"===a[0]&&(a=a.substr(1));for(var c=0;c<r.length;c+=1)Ve(r[c],a)&&i.push(r[c]);if(!i.length||o)for(c=0;c<r.length&&(!(i=i.concat(Me(r[c],t,!0))).length||o);c++);if(!n&&!i.length&&Ae){var u={key:t,value:i,node:e};Ae("elementMatcher",t,u),u.change&&(i=u.value)}return i}function Le(e){return F()&&e.id&&e.id!=F()&&Te&&Te.isItem(e.id)?0:1}function Ve(e,t){var n=" "+e.className+" ";return e.id===t||~n.indexOf(" "+t+" ")||e.name===t||e.nodeName.toLowerCase()===t.toLowerCase()||e.getAttribute("data-bind")===t}var Fe=M,He=[];function qe(e,t,n){(t?Me(e,t):ee(e.childNodes.length?e.childNodes:e)).forEach(function(e){var t=$(e);if(t in He){if(!n)for(var r in He[t])e.appendChild(He[t][r]);delete He[t]}})}function De(e,t){var n=0,r=function(e){if(1==++n)for(;e.lastChild;)G(e.lastChild)};(t?Me(e,t):ee(e)).forEach(function(e){var t=$(e);e.childNodes.length&&(He[t]=ee(e.childNodes));for(var n in He[t]){var i=He[t][n];Fe(i,function(){r(e)},1)}r(e)})}var Re=q(),Be=R(),Je=D(),$e=O;function Ke(e,t){if(!U(e,t.outerHTML)&&(!t.id&&!e.childNodes[0]||t.id&&!i.c.getElementById(t.id)||e.firstChild&&!e.firstChild.isEqualNode(t))){var n;if(Re&&(n=Re.getItem(t.id)),Re&&~n&&e.hasChildNodes()){var r=Re.getItem(getId()),o=e.cloneNode(1);o[i.a]={childof:r},Je&&Je.getProps&&(Je.getProps(n).children=o),Be(t,n)}else t[i.a]&&t[i.a].scid&&!i.b[t[i.a].scid]&&((o=e.cloneNode(1))[i.a]={childof:t[i.a].scid},i.b[t[i.a].scid]=o);for(;e.lastChild;)G(e.lastChild);if(t[i.a]&&void 0!==t[i.a].childof){e.innerHTML=t.innerHTML;var c=t[i.a].childof;!i.b[c]&&$e&&($e(e,c),Object(a.b)("willupdate",c,function(){$e(e,c)}))}else e.appendChild(t)}}var Ue=R(),Ye=q(),We=D();function Ge(e,t){return function(e,t,n){var r,a=Y(t),o=(r=a)&&~r.indexOf("id(")&&r.split('id("')[1].split('")')[0];o||(o=function e(t,n){if(t[i.a]&&t[i.a].scid&&!t[i.a].pscid)n=t;else if(n)return n;if(t.parentNode)return e(t.parentNode,n)}(t));var c=F();H(o);var u=function e(t){return t&&t[i.a]&&t[i.a].isItem?t:t.parentNode?e(t.parentNode):void 0}(t),f=u&&W(u),l=X(f),d=X(a=a),s={path:f,node:u,data:((u||{})[i.a]||[]).dataPass,index:l};H(c);var v=i.c.getElementById(o),b=Ye&&Ye.getItem(o),p=e.call(~b&&We?We.getMod(b):v,n,d,t,s);if(o&&v){var h=function(){Ue(v,b,1)};p&&p.then?p.then(function(e){return h(),e}):h()}return p}.bind({},t,e)}function Xe(e,t,n,r){var a=t.substr(2).toLowerCase(),o=(Object(b.j)(r)?r.split("/")[0]:"")+"-"+n[i.a].uid,c=n[i.a].events=n[i.a].events||[],u=n[i.a].eventHandlers=n[i.a].eventHandlers||[];u[a]=u[a]||[],u[a][o]=e,c[a]||(c[a]=1,function(e,t){function n(n){var r=e[i.a].eventHandlers[t];for(var a in r){var o=r[a];!1===Ge(e,o)(n)&&n.preventDefault()}}e.removeEventListener(t,n),e.addEventListener(t,n)}(n,a))}var ze=T();function Qe(e,t,n,r){var a=X(n);for(var o in S[$(e)]=S[$(e)]||[],t)if("text"!==o&&"html"!==o)if(0==o.indexOf("on"))Xe(t[o],o,e,r);else{if("config"==o){a=X(n=K(e));var c=!0;S[n+"-config"]?c=!1:S[n+"-config"]={};var u=S[n+"-config"].configContext=S[n+"-config"].configContext||{};configs[n]=function(e,t){return function(){return e.apply(e,t)}}(t[o],[e,c,u,a]);continue}if(ze){var f={key:o,value:t[o],node:e};ze("attributes",o,f),f.change&&(t[o=f.key]=f.value)}if(S[$(e)]&&S[$(e)][o]==t[o])continue;null===t[o]?e.removeAttribute(o):"value"==o&&e.multiple&&e.selectedOptions&&Object(b.e)(t[o])?(e.value=t[o],t[o].forEach(function(t){Array.from(e.options).find(function(e){return e.value==t}).selected=!0})):o in e?"style"==o?e[o].cssText=t[o]:e[o]=t[o]:e.setAttribute(o,String(t[o])),S[$(e)][o]=t[o]}!function(e,t){if(e&&null!=t&&!U(e,t)){var n=String(t);if("INPUT"===e.nodeName)if(~["radio","checkbox"].indexOf(e.type)){if(e.name){var r=m(F()).querySelectorAll("[name="+e.name+"]");if(r.length>1){var i=!0,a=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=c.value;if(f.value==n){f.checked=!0;break}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}}else n!=e.value&&(e.value=n);else"SELECT"!==e.nodeName&&(e.firstChild?e.firstChild.textContent=n:e.appendChild(e.ownerDocument.createTextNode(n)));"SELECT"===e.nodeName&&n&&(e.value=n)}}(e,t.text),function(e,t){if(Object(b.e)(t))for(var n in t)Z(e,t[n],n);else if(!Object(b.h)(t)||U(e,t))e&&null!=t&&!U(e,t)&&(e.innerHTML=t);else{if(t[i.a]&&t[i.a].scid&&!i.b[t[i.a].scid]){var r=e.cloneNode(1);r[i.a]={childof:t[i.a].scid},i.b[t[i.a].scid]=r}Z(e,t,0)}}(e,t.html)}var Ze=T();var et=n(4),tt=D(),nt=function(e,t,n,r){var a=e((n=function(e){var t=[];return e.replace(/\[(.+?)\]/g,function(e,n){t.push(n)}),t}(r=K(t))).join("."),r);if(!a||!Object(b.h)(a))return rt(t,a,r);Ke(t,a),t[i.a]=t[i.a]||{},t[i.a].isItem=!0,t[i.a].dataPass={index:n},e.draw&&e.draw()};function rt(e,t,n,r){var a,o=tt&&tt.innerMods,c=X(n),u=Object(et.b)(t);if(u&&(t=u),t&&Object(b.h)(t))Ke(e,t);else{if(Object(b.g)(t))return nt(t,e,c,n);if(!Object(b.i)(t))return rt(e,{_text:t},n);o&&o[F()]&&t[o[F()][0]]&&!t[o[F()][0]].draw&&o[F()][1].destroy(),(a=function(e,t){var n;for(var r in t){var a=t[r];void 0===a?a="":null===a&&-1===["onunload"].indexOf(r)?(e[i.a].detached=e[i.a].detached||[],e[i.a].detached[r]=1,De(e,r)):e[i.a].detached&&e[i.a].detached[r]&&(qe(e,r,a.nodeType),e[i.a].detached[r]=0),("_"===r[0]&&"_"!==r[1]||"on"==r.substr(0,2))&&(n=n||{},"on"==r.substr(0,2)?n[r]=a:n[r.substr(1)]=a)}return n}(e,t))&&Qe(e,a,n,r),function(e,t,n){var r;for(var a in t){var o=t[a];if(!~i.d.indexOf(a)&&"_"!==a[0]&&"on"!=a.substr(0,2)){if(r=Me(e,a),Ze){var c={key:a,value:o,node:e};Ze("values","*",c),c.change&&(o=c.value)}it(r,o,n+"/"+a)}}}(e,t,n)}}function it(e,t,n){var r,a;if(e){if(null===t&&n)De(e,n);else{if(null===t&&!n)return e[i.a].detached=1,De(e);e[i.a]&&e[i.a].detached&&!n&&(e[i.a].detached=0,qe(e))}var o=ee(e);if(a=Object(b.e)(t)){if(A[n]&&0===o.length&&(A[n].parent.insertAdjacentHTML("beforeend",A[n].node),o=ee(A[n].parent.childNodes)),!o.length)return;var c=o[0].parentNode;A[n]||(A[n]={node:o[0].cloneNode(1).outerHTML,parent:c});for(var u=i.c.createDocumentFragment(),f=0;o.length<t.length;)A[n]?(c.insertAdjacentHTML("beforeend",A[n].node),r=c.lastChild):r=o[0].cloneNode(1),Q(r,++f,n),o.push(r),u.appendChild(r);c.appendChild(u);var l=t.map(function(e){return e&&e[E]});if(o.length!=t.length&&-1===l.indexOf(void 0)||(t=t.map(function(e,t){if(Object(b.i)(e)){if(o[t][i.a]=o[t][i.a]||{},o[t][i.a].__key&&Object(b.k)(e[E]))return e[E]=o[t][i.a].__key,e;Object(b.k)(e[E])&&(e[E]=i.a+t),o[t][i.a].__key=e[E]}return e})),o.length>t.length)if(0!==t.length&&Object(b.i)(t[0])){var d=[],s=t.map(function(e){return e[E]});o=o.filter(function(e,t){var n;return Object(b.k)(e[i.a])?n=1:~s.indexOf(e[i.a].__key)&&!~d.indexOf(e[i.a].__key)||(d.push(e[i.a].__key),n=1),n?(G(e),!1):(d.push(e[i.a].__key),!0)})}else for(;o.length>t.length;)(c=(r=o.pop()).parentNode)&&G(r)}for(var v=0;v<o.length;v++)if(a)o[v]&&it(o[v],t[v],v);else{var p=Q(o[v],v+1,n);t&&Object(b.i)(t)&&t.hasOwnProperty(E)&&!Object(b.h)(t)&&(o[v][i.a].isItem=!0,o[v][i.a].dataPass=t),rt(o[v],t,p,n)}}}V(function e(t){var n=s.getItem(t.id);if(t.children)for(var r=0;r<t.children.length;r++)e(t.children[r]);~n?(Object(a.a)("onunload",pe(n),t,n),xe(n),ge(n),J(ye(n))):t[i.a]&&t[i.a].scid&&Object(a.a)("onunload",{},t,t[i.a].scid)}),L(function(e,t,n){var r;e.id&&s.isItem(e.id)&&(r=s.getItem(e.id)),!r&&e[i.a]&&e[i.a].scid?Object(a.a)("onunload",{},e,e[i.a].scid):r&&pe(r).onbeforeunload?Object(a.a)("onbeforeunload",pe(r),e,r,0,function(){r&&Object(a.a)("onunload",pe(r),e,r),t()}):(r&&Object(a.a)("onunload",pe(r),e,r,1),t())}),w={getMod:je,getProps:he,innerMods:be},x=re,_=s,j=Pe,O=function(e,t){var n=F();H(ye(t)),it(e,pe(t)),H(n)};var at=function(e){return m(s.getItemVal(e))},ot=n(3),ct=["#KEY",".KEY","KEY"],ut=function(e,t){var n;for(var r in ct){var i=ct[r].replace("KEY",t);if(n=e.querySelector(i))break}return n},ft=function(e){if(Object(b.j)(e)){if(n=Object(et.b)(e))return n;var t=at(~ve||void 0),n=ut(t||ot.a.doc,e);if(n)return n}return e},lt=0,dt=function(e){return Object(b.h)(e)&&(e.id||(e.id=++lt),i.e[e.id]=e,e=e.id),e},st=function(e,t){return Object(a.a)("willload",pe(e),t,e,1)},vt=function(e,t){if(m(s.getItemVal(e))&&me(e))return Object(a.a)("didload",pe(e),t,e,1)},bt=function(e,t){var n=function(e,t){m(t)?re(m(t),e):s.isItem(t)&&mag.clear(e)}.bind({},e,t);Oe(e,n)},pt=function(e,t,n,r,i){var o=s.getItem(t);t=dt(e);var c=Object(b.m)(he(o));vt(o,e),me(o)&&Object(a.a)("willgetprops",pe(o),e,o,0,n)||(ke(e.id,o,r,n),c!=Object(b.m)(he(o))&&(i=1),bt(o,e.id),st(o,e)||re(e,o,i).then(function(){vt(o,e)}))},ht=[],gt={},yt=0,mt=function(e,t,n,r){ht[e]=ht[e]||[];var a=function(e,t,n,r,i){Object(b.i)(i)&&(r=Object(b.l)(Object(b.c)(r),i),i=0),e<0&&!i&&(i=1);var o=t.id+(r.key?"."+r.key+".":"")+(i||"");!gt[o]||r.key||~a._id||(o+=++yt);var c=gt[o]=gt[o]||t.cloneNode(1);if(c.id=o,s.isItem(o))return pt(c,o,r,n),c;var u=v(c.id);return e<0?e=a._id=u:ht[e].push({instanceId:u,subscribe:subscriberHandler.bind({},u)}),pt(c,o,r,n),c}.bind({},e,t,n,r);return a._id=e,a.clones=function(){return ht[a._id]},a.destroy=function(e){destroyerHandler(a._id,a.clones,e)},a.getId=function(){return a._id},a.rafBounce=function(e){return e?i.g[a._id]=1:!1===e&&(i.g[a._id]=0),!!i.g[a._id]},a.draw=function(e){return ot.a.redraw(t,a._id,e)},a.getState=function(){return pe(a._id)},a.getProps=function(){return he(a._id)},a.subscribe=function(e){return subscriberHandler(a._id,e)},a};L(function(e,t){e[i.a]&&e[i.a].scid?Object(a.a)("onunload",{},e,e[i.a].scid):t()}),V(function e(t){if(t.children)for(var n=0;n<t.children.length;n++)e(t.children[n]);t[i.a]&&t[i.a].scid&&Object(a.a)("onunload",{},t,t[i.a].scid)});var Ot=function(e){if(Object(b.j)(e)){var t;if(t=Object(et.b)(e))return t;if(t=ut(i.c,e))return t}return e};ot.a._handler=function(e,t,n){return wt(e,t,n,it,Ot)};var jt=ot.a,kt=0,Nt=function(e,t,n,r){var o,c=[],u=e.cloneNode(1),f=[],l=function l(d){var s,v=e;d=d||{},Object(b.k)(d.key)||(s=d.key+"-"+l.id);var p,h=Object(b.k)(d.key)?l.id:d.key+"-"+l.id;if(f[h]||(f[h]=Object(b.i)(n)?Object(b.c)(n):n),Object(b.i)(d)&&(d=Object(b.d)(f[h],d)),s&&!c[s]?v=c[s]=u.cloneNode(1):s&&c[s]&&(v=c[s]),!Object(b.k)(l)&&d&&d.key&&l.key&&l.key!=h&&Object(a.a)("onunload",d,v,l.key),o&&o==v[i.a].scid)throw Error("MagJS Error - recursive call:"+o);v[i.a]=v[i.a]||{},jt._cprops[h]&&Object(b.i)(d)&&(d.children=i.b[h]),l.props=d,l.key=h,l.fake=r;try{var g=jt._current;jt._current=l,p=t(d),o=v[i.a].scid=h;var y=F();y&&y[i.a]&&y[i.a].scid&&(v[i.a].pscid=y[i.a].scid),H(v),it(v,p)}finally{Object(a.a)("didupdate",d,v,h),H(y),o=0,jt._current=g}return v};return l.id=++kt,l.element=u,l},_t=n(5);ot.a.dom=_t.a;var wt=function(e,t,n,r,a,o){if(e.raw)return _t.a.apply(this,arguments);if(e=a(e),t=a(t),n=n||{},Object(b.h)(t)&&Object(b.h)(e))t[i.a]||r(t,e);else{if(Object(b.g)(t)&&Object(b.h)(e)){try{Nt(e.cloneNode(1),t,n,!0)()}catch(e){}return Nt(e,t,n)}if(o)return o(e,t,n)}};ot.a._handler=function(e,t,n){return wt(e,t,n,it,ft,function(e,t,n){return mt(-1,m(dt(e)),t,n)})};var xt=ot.a;xt.hook=Pe,xt.hookin=function(e,t,n){Ee[e].push({context:{},handler:n,key:t})},xt.redraw=re,xt.begin=function(e){Object(b.k)(ne[e])?ne[e]=1:ne[e]++},xt.end=function(e){if(ne[e]>1)ne[e]--;else{ne[e]=0;var t=s.getItemVal(e);re(m(t),e)}};xt.module=function(e,t,n){n=n||{};var r=function(e,t){var n=t?e+"-"+t:e;return s.isItem(n)?s.getItem(n):v(n)}(e=dt(e),n.key),i=It(n,r,t,e);if(i)return mt(r,i,t,Object(b.c)(n))};var It=function(e,t,n,r){e.retain||xe(t);var i=m(r);if(ke(r,t,n,e),bt(t,r),!st(t,i))return re(i,t,1).then(function(){vt(t,i)}),i};xt.clear=function(e){s.removeItem(e),xe(e),J(ye(e))};xt.getNode=m;t.default=xt}])});