/*! mag.js - 1.6.6 | (c)2020  https://github.com/magnumjs | MIT */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("mag",[],t):"object"==typeof exports?exports.mag=t():e.mag=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=5)}([function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"f",function(){}),n.d(t,"h",function(){}),n.d(t,"i",function(){return f});var r="__magnum__",i=[],o=[],a=[],c=["toString","draw","then","hasOwnProperty","willgetprops","onbeforeunload","Symbol(Symbol.toStringTag)","nodeType","toJSON","onunload","willupdate","didupdate","didload","willload","isupdate"],u=document,f=function(e){return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"g",function(){return i}),n.d(t,"i",function(){return o}),n.d(t,"h",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"j",function(){return f}),n.d(t,"b",function(){return d}),n.d(t,"f",function(){return l}),n.d(t,"k",function(){return v}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return h});var i=function(e){var t=r(e);return null!=e&&("object"==t||"function"==t)},o=function(e){return void 0===e},a=function(e){return"string"==typeof e},c=function(e){return"function"==r(e)},u=function(e){return i(e)?Object.assign({},e):e},f=function(){return Object.assign.apply({},arguments)},d=function e(t,n,r){for(var a in n)if(o(n[a]))delete n[a];else if(r&&i(n[a]))return e(t[a],n[a]);return f(t,n)},l=function(e){return e&&1===e.nodeType},s=function(e,t){return c(t)?""+t:t},v=function(e){return JSON.stringify(e,s)},p=function(e){for(var t in e)if(e.hasOwnProperty(t))return 0;return 1},h=function(e){return Array.isArray(e)}},function(e,t,n){"use strict";var r=n(0),i=function e(t,n,r){return e._handler(t,n,r)};i._handler=function(){},i.rafBounceIds=r.g,i._cprops=r.b,i.doc=r.c,t.a=i},function(e,t,n){"use strict";n.d(t,"b",function(){return a});var r=n(0),i=n(1),o=function(e){var t=r.c.createElement("template");return t.innerHTML=e,t.content};function a(e){if(Object(i.h)(e)&&"<"==e.trim()[0])return o(e).children[0]}t.a=o},function(e,t,n){"use strict";(function(e){var r=n(0),i=n(1),o=n(2),a=n(3);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=0;function f(e){var t=[],n=[];for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];var f=o.reduce(function e(r,o){o&&o.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&(o=o.childNodes),Object(i.h)(o)&&o.split("<").forEach(function(e){var t=e[0];if(t&&t==t.toUpperCase()&&t!=t.toLowerCase()){var r=e.split("/")[0].split(" ")[0];n.push({name:r})}});if(!Object(i.c)(o)){if(Object(i.g)(o)&&Object(i.f)(o)){var a="p-".concat(++u,"-").concat(Date.now());return t.push({id:a,node:o}),~r[0].indexOf("=")?r.concat('"'.concat(a,'"')):r.concat("<".concat(o.nodeName,' id="').concat(a,'"></').concat(o.nodeName,">"))}return o&&"function"==typeof o.item&&"number"==typeof o.length?r.concat(Array.prototype.reduce.call(o,e,[])):r.concat(o)}r.concat(o)},[]).join("").replace(/^\s*</,"<").replace(/>\s*$/,">"),d=Object(a.a)(f),s=function(e,t){var n={};return e.forEach(function(e){var r=e.id,i=e.node,o=t.querySelector("".concat(i.nodeName,"#").concat(r));o?o.parentNode.replaceChild(i,o):n[r]=i}),n}(t,d);!function(e,t,n){e.forEach(function(e){var r=t.querySelectorAll(e.name);r&&r.forEach(function(t){for(var r={},i=0,o=t.attributes.length;i<o;i++){var a=t.attributes[i];r[a.name]=n[a.value]?n[a.value]:a.value}var c=l(e.name);if(c){var u=c(r);t.parentNode.replaceChild(u,t)}})})}(n,d,s);for(var v=!1,p=0;p<o.length;p++)if(""!=o[p]){if(o[p]instanceof Node){v=!0;break}break}if(1!=d.childNodes.length||v)return d;var h=d.firstChild;return d.removeChild(h),h}var d,l=function(e){return d[e]&&Object(i.e)(d[e])?d[e]:o.a[e]&&Object(i.e)(o.a[e])?o.a[e]:void 0};t.a=function(t){d=e||this||window;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.reduce(function(e,n,i){return e.concat(n,i+1===t.length?[]:r[i])},[]);return f.apply(void 0,[e].concat(c(o)))}.apply(void 0,[r.c,t].concat(i))}}).call(this,n(6))},function(e,t,n){var r=n(7);r.default.version="1.6.6",e.exports=r.default},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";n.r(t);var r,i=n(0),o=[],a=function(e,t,n){var r=e+"-"+t;return o[r]=o[r]||[],o[r].push(n),function(){var e=o[r].indexOf(n);return o[r].splice(e,1)}},c=function(e,t,n,r,a,c){var u;Object(i.i)(r);var f=t&&t[e];f&&!f.called&&(u=f.call(void 0,n,void 0,r,c),a&&(f.called=1));var d=e+"-"+r;if(o[d]){var l=o[d].slice(),s=!0,v=!1,p=void 0;try{for(var h,b=l[Symbol.iterator]();!(s=(h=b.next()).done);s=!0){(0,h.value)(t,void 0,n)}}catch(e){v=!0,p=e}finally{try{s||null==b.return||b.return()}finally{if(v)throw p}}}if(Object(i.i)(-1),!1===u)return!0},u={},f=[],d=[],l=[],s=function(e,t){return new Promise(function(n){i.f||i.g[e]&&t?(d[e]&&(l[e](),cancelAnimationFrame(d[e])),l[e]=n,d[e]=requestAnimationFrame(function(r){d[e]=0,t(),n()})):(t&&f.push(t),r||(r=requestAnimationFrame(function(t){return function(e,t,n){var i;r=0;do{var o=f.shift();o&&o(),i=performance.now()}while(f.length&&v(i,t));f.length?s(n).then(e):e()}(n,t,e)})))})};function v(e,t){return!i.h||e-t<i.h}var p={i:[],isItem:function(e){return~p.i.indexOf(e)},setItem:function(e){return p.i[p.i.length]=e},getItem:function(e){return p.i.indexOf(e)},getItemVal:function(e){return p.i[e]},removeItem:function(e){return p.i.splice(p.i.indexOf(e),1)}};u.items=p,u.getItemInstanceIdAll=function(){return p.i};var h=function(e){return p.isItem(e)?p.getItem(e):(p.setItem(e),p.getItem(e))},b=n(1);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y="/";function m(e,t,n,r){var o=new WeakSet;return new Proxy(e,{get:function(e,a,c){var u,f=e[a];if("symbol"==g(a))return f;if(!Object(b.g)(f)||"symbol"===g(f)||null===f||Object(b.e)(f)||Object(b.c)(f)||!Object(b.g)(f)||f.then||f.draw)a in e||~i.d.indexOf(a.toString())||n||"_"==a[0]||(f=e({},t,n,r+y+a));else if(u=f,!o.has(u))return o.add(f),e(f,t,n,r+y+a);var d=t({type:"get",object:e,name:a,path:r,oldValue:Reflect.get(e,a,c)});return Object(b.i)(d)||(f=d==i.a?void 0:d),f},deleteProperty:function(e,n){return t({type:"delete",name:n,object:e,oldValue:Reflect.get(e,n)}),Reflect.deleteProperty(e,n)},set:function(e,n,r,i){var o=Reflect.get(e,n,i);return o===r&&"length"!==n||(t({type:"set",name:n,object:e,oldValue:o}),Reflect.set(e,n,r,i))}})}var O=function e(t,n,r,i){for(var o in t){var a=g(t[o]);Object(b.c)(t[o])&&t[o].length<101?t[o]=m(t[o],n):Object(b.g)(a)&&null!==t[o]&&"symbol"!=g(o)&&"symbol"!=a&&!Object(b.e)(a)&&Object(b.g)(t[o])&&(t[o]=e(t[o],n,r,i+y+o))}return m(t,n,r,i||y)};function j(e,t){if(i.e[e]&&!t)return i.e[e];var n=i.c.getElementById(e);return n&&(i.e[e]=n),i.e[e]}var N,_,w,x,k,I,S,C=[],E=[],A="_key",P=[],T=[],M={},L=function(){return _},V=function(){},H=function(e){return V=e},F=function(e){return w=e},q=function(){return x},R=function(e){return x=e},D=function(){return k},B=function(){return I},J=function(){return S},$=0,K=function(e){T[e]&&delete T[e]};function U(e,t){return e[i.a]=e[i.a]||{},e[i.a].uid&&!t||(e[i.a].uid=++$),e[i.a].uid}function Y(e,t){var n=U(e);return P[n]&&!t?P[n]:P[n]=X(e)}function W(e,t){var n=U(e);if(T[q()]=T[q()]||[],T[q()][n]&&T[q()][n]==t)return 1;T[q()][n]=t}function G(e){var t="",n=function e(t){return k&&t.id&&k.isItem(t.id)?t:t.parentNode?e(t.parentNode):void 0}(e),r=function(e){for(var t=1;e=e.previousElementSibling;)++t;return t}(e);return n&&(t+='id("'+(n.id||n.tagName)+'")'),t+="/"+e.tagName+"["+r+"]"}function X(e,t){if(e.id&&q()===e.id||q()===e)return'id("'+(e.id||e.tagName)+'")';if(e===i.c.body)return e.tagName;var n=0;if(e.parentNode)for(var r=e.parentNode.childNodes,o=0,a=r.length;o<a;o++){var c=r[o];if(c===e)return X(e.parentNode)+(e.tagName?"/"+e.tagName+"["+(n+1)+"]":"");1===c.nodeType&&c.tagName===e.tagName&&n++}}function z(e){var t=X(e);e&&E[t+"-config"]&&E[t+"-config"].configContext&&Object(b.e)(E[t+"-config"].configContext.onunload)&&(E[t+"-config"].configContext.onunload(E[t+"-config"].configContext,e,t),delete E[t+"-config"],delete C[t]),w&&w(e),e.parentNode&&e.parentNode.removeChild(e)}function Q(e){var t=e&&parseInt(e.split("[").pop().slice(0,-1));return t?parseInt(t)-1:0}var Z=[];function ee(e,t,n){var r=U(e);if(P[r])return P[r];if(Z[r])return Z[r];var o=+n==+n?t+n:t,a='id("'+(Object(b.g)(q())?q().tagName:q())+'")'+(Object(b.h)(n)?n.split(")")[1]+"/":"/")+e.tagName+"["+o+"]";return Z[r]=e[i.a].xpath=a}function te(e,t,n){if(!(!t||e.childNodes[n]&&e.childNodes[n].isEqualNode(t))){for(var r=ne(e.childNodes),i=0,o=r.length;i<o;i++)r[i]&&e.removeChild(r[i]);e.childNodes[n]?e.replaceChild(t,e.childNodes[n]):e.appendChild(t)}}function ne(e){var t;if(null==e.length&&(e=[e]),!Object(b.c)(e)){t=[];for(var n=0;n<e.length;n+=1)e[n]&&t.push(e[n]);e=t}return e}var re=function(e,t,n){return function(e,t,n){if(j(e.id,1),Ee(e.id,t)&&e){var r=ge(t);if(!c("isupdate",r,e,t)){if(Ie(t)&&!n)return 0;if(!c("willupdate",r,e,t)){Ce(e,t);var i=q();R(e.id),at(e,r),R(i),function(e,t){for(var n in t)n.startsWith('id("'+e+'")/')&&t[n]()}(e.id,C),c("didupdate",r,e,t),n||Ie(t)}}}}.bind({},e,t,n)},ie=[],oe=function(e,t,n){if(!ie[t]){if(!e||Object(b.i)(t))throw Error("Mag.JS - Id or node invalid: "+p.getItemVal(t));if(!Ee(e.id,t))return{then:function(e){return e()}};if(n&&C.splice(0,C.length),n&&Se(t),he==t)throw Error("Mag.JS - recursive call:"+t);return s(t,re(e,t,n))}},ae=function(e,t){var n=q();R(e);var r=Ve(e,t);return R(n),r},ce="_value",ue=function(e,t,n,r){var i,o=n.toString().split(".");if(o.length>=3)r=function(e,t){for(var n=1;n<e.length;n++){var r=e[n],i=e[n+1],o=ae(Object(b.c)(t)?t[0]:t,r);if(i&&!isNaN(Number(i)))t=o[i];else if(o&&o.length&&i&&n+2<e.length)t=ae(o[0],i);else if(o&&o.length&&(t=o,n+2==e.length))break}return Object(b.c)(t)?t[0]:t}(o,r),i=ae(r,t);else{var a=parseInt(o.pop()),c=isNaN(a)?0:a;i=ae(r[c]?r[c]:r,t)}return function(e,t,n,r){var i=[];for(var o in e){var a=e[o];de(a)&&(i.push(a),fe(a,t,n,r))}if(i.length)return 1==i.length?i[0]:i;return!1}(i,e,t,r)};function fe(e,t,n,r){if(e[i.a]=e[i.a]||{},!e[i.a].eventOnFocus){var o=function(t,n,r,o){var a=~["radio","checkbox"].indexOf(e.type);if(this[i.a].dirty||(this[i.a].dirty=1),e.selectedOptions)var c=Array.prototype.map.call(e.selectedOptions,function(e){return e.value});a?"_checked"in n||ce in n?n._checked=this.checked:this.checked&&(n[r]=this.value):Object(b.i)(n[ce])?Object(b.i)(n._text)||(n._text=c||this.value):n[ce]=c||this.value,oe(t,p.getItem(t.id))}.bind(e,r,t,n);e.addEventListener("click",o),e.addEventListener("input",o),e.addEventListener("change",o),e.addEventListener("focus",o),e[i.a].eventOnFocus=1}}function de(e){return e&&~["INPUT","SELECT","TEXTAREA"].indexOf(e.tagName)}var le=function(e,t,n,r){var o=n[t];~[ce,"_checked","_text"].indexOf(t)&&Object(b.h)(e)&&(t=e.split(".").pop());var a=function(e){for(var t in e)if(de(e[t]))return e[t];return!1}(ae(r,t));if(!Object(b.e)(o)&&a){var c=ue.bind({},n,t,e,r);c(),Object.defineProperty(n,t,{configurable:!0,get:function(){var t=c();return t&&!Object(b.i)(t.value)&&t[i.a]&&t[i.a].dirty&&t.value!==o?(o=t.value,oe(r,e,1),t.value):o},set:function(e){var t=c();t&&!Object(b.i)(t.value)&&t.value!==e&&e!==o&&(t.value=e,o=e)}})}},se=function e(t,n,r){for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];i!=ce&&Object(b.g)(o)&&!Object(b.f)(o)?(Object(b.g)(o)&&Object(b.d)(o)&&(o[ce]=""),e(t+"."+i,o,r)):le.bind({},t,i,n,r)()}},ve=[],pe={runningViewInstance:-1,cache:[]},he=pe.runningViewInstance,be=pe.innerMods=[],ge=pe.getState=function(e){return ve[e][1]};pe.setState=function(e,t){ve[e][1]=t},pe.getView=function(e){return ve[e][0]};var ye=pe.getProps=function(e){return ve[e]&&ve[e][2]};pe.setProps=function(e,t){return ve[e][2]=t};var me=pe.remove=function(e){ve[e]&&(ve[e]=0)},Oe=pe.getId=function(e){return ve[e]&&ve[e][3]},je=pe.exists=function(e){return Object(b.g)(ve[e])},Ne=pe.setFrameId=function(e,t){ve[e][4]=t};pe.getFrameId=function(e){return ve[e][4]};var _e=pe.getMod=function(e){return ve[e]&&ve[e][5]},we=function(e,t,n,r){if(ve[t])return r.key&&r.key==pe.getProps(t).key?pe.setProps(t,Object(b.a)(Object(b.j)(pe.getProps(t),r))):pe.setProps(t,r),ve[t];(function(e,t){for(var n in t=t||e,e){var r=e[n];Object(b.e)(r)&&!~["controller","view"].indexOf(n)&&(e[n]=r.bind(t))}})(n=Object(b.a)(n),n),ve[t]=[0,0,0,0,0,0],pe.setProps(t,r);var i={controller:function(r){return n.props=pe.getProps(t),n.state=r,n.element=j(e),(n.controller||function(){}).call(r,n.props)||r},view:function(e,t,r){n.element=r,n.state=t,n.props=pe.getProps(e),n.view&&n.view.call(n,t,n.props,r)}.bind({},t)};return ve[t][0]=i.view,ve[t][3]=e,ve[t][1]=function(e,t,n){return new e(O({},ke.bind({},"state",t)))}(i.controller,t),ve[t][5]=n,ve[t]},xe=[];var ke=function(e,t,n){if("get"==n.type&&"props"!=e&&!~i.d.indexOf(n.name.toString())&&Object(b.i)(n.oldValue)){var r=j(pe.getId(t));if(n.path&&"/"==n.path[0])var o=function(e,t){var n=e,r=t.split("/"),i=!0,o=!1,a=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=c.value;if(f){var d=mag._find(n,f);d.length&&(n=d)}}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return n}(r,n.path);o&&"$"!=n.path.split("/").pop()[0]&&(o=o[0]);var a=function(e,t){var n=e.name;if(Object(b.i)(e.object[e.name])&&"_"!=n[0]){var r=mag._find(t,n),o="$"===n[0],a=[];return r.length?(r.forEach(function(n){var r;if(n&&n.type&&!~["submit","button"].indexOf(n.type)){if(n.value&&n.value.length>0)if("checkbox"==n.type||"radio"==n.type)if(n.checked&&((r={})._checked=!0),o)r?r._value=n.value:r={_value:n.value};else{var c=t.querySelectorAll("[name="+n.name+"]");if(c.length){var u=!0,f=!1,d=void 0;try{for(var l,s=c[Symbol.iterator]();!(u=(l=s.next()).done);u=!0){var v=l.value;v.checked&&(r?r._value=v.value:r={_value:v.value})}}catch(e){f=!0,d=e}finally{try{u||null==s.return||s.return()}finally{if(f)throw d}}}}else r={_value:n.multiple&&Array.prototype.map.call(n.selectedOptions,function(e){return e.value})||n.value}}else Object(b.i)(e.oldValue)&&Object(b.i)(e.object[e.name])&&n&&!~["submit","button"].indexOf(n.type)&&1==n.childNodes.length&&n.childNodes[0].textContent.trim()&&(r={_text:n.childNodes[0].textContent.trim()});r?a.push(r):n&&!n.hasChildNodes()&&a.push(i.a)}),0===a.length?void 0:o?a:a[0]&&!Object(b.i)(a[0]._value)?a[0]._value:a[0]&&a[0]._text?a[0]._text:a[0]):i.a}if("_"==n[0]){var c=n.substr(1);if(t.length){for(var u in a=[],t){var f=t[u],d=f[c];Object(b.i)(d)&&(d=f.getAttribute(c)),a.push(d)}return a}return d=t[c],Object(b.i)(d)&&(d=t.getAttribute(c)),d}}(n,o||r);if(null!==a&&Object(b.g)(a)&&n.object&&Object(b.j)(a,n.object[n.name]),a)return pe.cached[t]=0,a}else"set"==n.type&&"props"!=e&&n.object[n.name]&&n.object[n.name].draw&&Object(b.e)(n.object[n.name].draw)&&(pe.innerMods[pe.getId(t)]=[n.name,n.object[n.name]]);var c=pe.getFrameId(t);Object(b.e)(c)&&"set"==n.type&&(cancelAnimationFrame(xe[t]),xe[t]=requestAnimationFrame(c))};var Ie=pe.iscached=function(e){var t=Object(b.k)([pe.getProps(e),pe.getState(e)]);if(e in pe.cache&&pe.cache[e]==t)return!0;pe.cache[e]=t},Se=pe.clear=function(e){~e&&pe.cache[e]&&pe.cache.splice(e,1)};pe.cached=[];var Ce=function(e,t){pe.runningViewInstance=t,pe.cached[t]||(se(t,pe.getState(t),e),pe.cached[t]=1);try{pe.exists(t)&&pe.getView(t)(pe.getState(t),e)}finally{pe.runningViewInstance=-1}},Ee=function(e,t){return!(t<0||t!=p.getItem(e))||e==Oe(t)},Ae={values:[],attributes:[],elementMatcher:[]},Pe=function(e,t,n,r,i,o){e[n][r].key==t&&(o={v:i.value,k:i.key},i.change=!1,e[n][r].handler.call(e[n][r].context,i),o!=={v:i.value,k:i.key}&&(i.change=!0))},Te=function(e,t,n){for(var r=0,i=Ae[e].length;r<i;r++)Pe(Ae,t,e,r,n)},Me=L(),Le=D();function Ve(e,t,n){var r=function(e){var t=[];if(e){var n=e.childNodes;if(n)for(var r=0;r<n.length;r+=1)1===n[r].nodeType&&He(n[r])&&t.push(n[r])}return t}(e),i=[],o=t,a="$"===t[0];"$"===o[0]&&(o=o.substr(1));for(var c=0;c<r.length;c+=1)Fe(r[c],o)&&i.push(r[c]);if(!i.length||a)for(c=0;c<r.length&&(!(i=i.concat(Ve(r[c],t,!0))).length||a);c++);if(!n&&!i.length&&Me){var u={key:t,value:i,node:e};Me("elementMatcher",t,u),u.change&&(i=u.value)}return i}function He(e){return q()&&e.id&&e.id!=q()&&Le&&Le.isItem(e.id)?0:1}function Fe(e,t){var n=" "+e.className+" ";return e.id===t||~n.indexOf(" "+t+" ")||e.name===t||e.nodeName.toLowerCase()===t.toLowerCase()||e.getAttribute("data-bind")===t}var qe=V,Re=[];function De(e,t,n){(t?Ve(e,t):ne(e.childNodes.length?e.childNodes:e)).forEach(function(e){var t=U(e);if(t in Re){if(!n)for(var r in Re[t])e.appendChild(Re[t][r]);delete Re[t]}})}function Be(e,t){var n=0,r=function(e){if(1==++n)for(;e.lastChild;)z(e.lastChild)};(t?Ve(e,t):ne(e)).forEach(function(e){var t=U(e);e.childNodes.length&&(Re[t]=ne(e.childNodes));for(var n in Re[t]){var i=Re[t][n];qe(i,function(){r(e)},1)}r(e)})}var Je=D(),$e=J(),Ke=B(),Ue=N;function Ye(e,t){if(!W(e,t.outerHTML)&&(!t.id&&!e.childNodes[0]||t.id&&!i.c.getElementById(t.id)||e.firstChild&&!e.firstChild.isEqualNode(t))){var n;if(Je&&(n=Je.getItem(t.id)),Je&&~n&&e.hasChildNodes()){var r=Je.getItem(getId()),o=e.cloneNode(1);o[i.a]={childof:r},Ke&&Ke.getProps&&(Ke.getProps(n).children=o),$e(t,n)}else t[i.a]&&t[i.a].scid&&!i.b[t[i.a].scid]&&((o=e.cloneNode(1))[i.a]={childof:t[i.a].scid},i.b[t[i.a].scid]=o);for(;e.lastChild;)z(e.lastChild);if(t[i.a]&&void 0!==t[i.a].childof){e.innerHTML=t.innerHTML;var c=t[i.a].childof;!i.b[c]&&Ue&&(Ue(e,c),a("willupdate",c,function(){Ue(e,c)}))}else e.appendChild(t)}}var We=J(),Ge=D(),Xe=B();function ze(e,t){return function(e,t,n){var r,o=G(t),a=(r=o)&&~r.indexOf("id(")&&r.split('id("')[1].split('")')[0];a||(a=function e(t,n){if(t[i.a]&&t[i.a].scid&&!t[i.a].pscid)n=t;else if(n)return n;if(t.parentNode)return e(t.parentNode,n)}(t));var c=q();R(a);var u=function e(t){return t&&t[i.a]&&t[i.a].isItem?t:t.parentNode?e(t.parentNode):void 0}(t),f=u&&X(u),d=Q(f),l=Q(o=o),s={path:f,node:u,data:((u||{})[i.a]||[]).dataPass,index:d};R(c);var v=i.c.getElementById(a),p=Ge&&Ge.getItem(a),h=e.call(~p&&Xe?Xe.getMod(p):v,n,l,t,s);if(a&&v){var b=function(){We(v,p,1)};h&&h.then?h.then(function(e){return b(),e}):b()}return h}.bind({},t,e)}function Qe(e,t,n,r){var o=t.substr(2).toLowerCase(),a=(Object(b.h)(r)?r.split("/")[0]:"")+"-"+n[i.a].uid,c=n[i.a].events=n[i.a].events||[],u=n[i.a].eventHandlers=n[i.a].eventHandlers||[];u[o]=u[o]||[],u[o][a]=e,c[o]||(c[o]=1,function(e,t){function n(n){var r=e[i.a].eventHandlers[t];for(var o in r){var a=r[o];!1===ze(e,a)(n)&&n.preventDefault()}}e.removeEventListener(t,n),e.addEventListener(t,n)}(n,o))}var Ze=L();function et(e,t,n,r){var o=Q(n);for(var a in E[U(e)]=E[U(e)]||[],t)if("text"!==a&&"html"!==a)if(0==a.indexOf("on"))Qe(t[a],a,e,r);else{if("config"==a){o=Q(n=Y(e));var c=!0;E[n+"-config"]?c=!1:E[n+"-config"]={};var u=E[n+"-config"].configContext=E[n+"-config"].configContext||{};configs[n]=function(e,t){return function(){return e.apply(e,t)}}(t[a],[e,c,u,o]);continue}if(Ze){var f={key:a,value:t[a],node:e};Ze("attributes",a,f),f.change&&(t[a=f.key]=f.value)}if(E[U(e)]&&E[U(e)][a]==t[a])continue;null===t[a]?e.removeAttribute(a):"value"==a&&e.multiple&&e.selectedOptions&&Object(b.c)(t[a])?(e.value=t[a],t[a].forEach(function(t){Array.from(e.options).find(function(e){return e.value==t}).selected=!0})):a in e?"style"==a?e[a].cssText=t[a]:e[a]=t[a]:e.setAttribute(a,String(t[a])),E[U(e)][a]=t[a]}!function(e,t){if(e&&null!=t&&!W(e,t)){var n=String(t);if("INPUT"===e.nodeName)if(~["radio","checkbox"].indexOf(e.type)){if(e.name){var r=j(q()).querySelectorAll("[name="+e.name+"]");if(r.length>1){var i=!0,o=!1,a=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=c.value;if(f.value==n){f.checked=!0;break}}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}}else n!=e.value&&(e.value=n);else"SELECT"!==e.nodeName&&(e.firstChild?e.firstChild.textContent=n:e.appendChild(e.ownerDocument.createTextNode(n)));"SELECT"===e.nodeName&&n&&(e.value=n)}}(e,t.text),function(e,t){if(Object(b.c)(t))for(var n in t)te(e,t[n],n);else if(!Object(b.f)(t)||W(e,t))e&&null!=t&&!W(e,t)&&(e.innerHTML=t);else{if(t[i.a]&&t[i.a].scid&&!i.b[t[i.a].scid]){var r=e.cloneNode(1);r[i.a]={childof:t[i.a].scid},i.b[t[i.a].scid]=r}te(e,t,0)}}(e,t.html)}var tt=L();var nt=n(3),rt=B(),it=function(e,t,n,r){var o=e((n=function(e){var t=[];return e.replace(/\[(.+?)\]/g,function(e,n){t.push(n)}),t}(r=Y(t))).join("."),r);if(!o||!Object(b.f)(o))return ot(t,o,r);Ye(t,o),t[i.a]=t[i.a]||{},t[i.a].isItem=!0,t[i.a].dataPass={index:n},e.draw&&e.draw()};function ot(e,t,n,r){var o,a=rt&&rt.innerMods,c=Q(n),u=Object(nt.b)(t);if(u&&(t=u),t&&Object(b.f)(t))Ye(e,t);else{if(Object(b.e)(t))return it(t,e,c,n);if(!Object(b.g)(t))return ot(e,{_text:t},n);a&&a[q()]&&t[a[q()][0]]&&!t[a[q()][0]].draw&&a[q()][1].destroy(),(o=function(e,t){var n;for(var r in t){var o=t[r];void 0===o?o="":null===o&&-1===["onunload"].indexOf(r)?(e[i.a].detached=e[i.a].detached||[],e[i.a].detached[r]=1,Be(e,r)):e[i.a].detached&&e[i.a].detached[r]&&(De(e,r,o.nodeType),e[i.a].detached[r]=0),("_"===r[0]&&"_"!==r[1]||"on"==r.substr(0,2))&&(n=n||{},"on"==r.substr(0,2)?n[r]=o:n[r.substr(1)]=o)}return n}(e,t))&&et(e,o,n,r),function(e,t,n){var r;for(var o in t){var a=t[o];if(!~i.d.indexOf(o)&&"_"!==o[0]&&"on"!=o.substr(0,2)){if(r=Ve(e,o),tt){var c={key:o,value:a,node:e};tt("values","*",c),c.change&&(a=c.value)}at(r,a,n+"/"+o)}}}(e,t,n)}}function at(e,t,n){var r,o;if(e){if(null===t&&n)Be(e,n);else{if(null===t&&!n)return e[i.a].detached=1,Be(e);e[i.a]&&e[i.a].detached&&!n&&(e[i.a].detached=0,De(e))}var a=ne(e);if(o=Object(b.c)(t)){if(M[n]&&0===a.length&&(M[n].parent.insertAdjacentHTML("beforeend",M[n].node),a=ne(M[n].parent.childNodes)),!a.length)return;var c=a[0].parentNode;M[n]||(M[n]={node:a[0].cloneNode(1).outerHTML,parent:c});for(var u=i.c.createDocumentFragment(),f=0;a.length<t.length;)M[n]?(c.insertAdjacentHTML("beforeend",M[n].node),r=c.lastChild):r=a[0].cloneNode(1),ee(r,++f,n),a.push(r),u.appendChild(r);c.appendChild(u);var d=t.map(function(e){return e&&e[A]});if(a.length!=t.length&&-1===d.indexOf(void 0)||(t=t.map(function(e,t){if(Object(b.g)(e)){if(a[t][i.a]=a[t][i.a]||{},a[t][i.a].__key&&Object(b.i)(e[A]))return e[A]=a[t][i.a].__key,e;Object(b.i)(e[A])&&(e[A]=i.a+t),a[t][i.a].__key=e[A]}return e})),a.length>t.length)if(0!==t.length&&Object(b.g)(t[0])){var l=[],s=t.map(function(e){return e[A]});a=a.filter(function(e,t){var n;return Object(b.i)(e[i.a])?n=1:~s.indexOf(e[i.a].__key)&&!~l.indexOf(e[i.a].__key)||(l.push(e[i.a].__key),n=1),n?(z(e),!1):(l.push(e[i.a].__key),!0)})}else for(;a.length>t.length;)(c=(r=a.pop()).parentNode)&&z(r)}for(var v=0;v<a.length;v++)if(o)a[v]&&at(a[v],t[v],v);else{var p=ee(a[v],v+1,n);t&&Object(b.g)(t)&&t.hasOwnProperty(A)&&!Object(b.f)(t)&&(a[v][i.a].isItem=!0,a[v][i.a].dataPass=t),ot(a[v],t,p,n)}}}F(function e(t){var n=p.getItem(t.id);if(t.children)for(var r=0;r<t.children.length;r++)e(t.children[r]);~n?(c("onunload",ge(n),t,n),Se(n),me(n),K(Oe(n))):t[i.a]&&t[i.a].scid&&c("onunload",{},t,t[i.a].scid)}),H(function(e,t,n){var r;e.id&&p.isItem(e.id)&&(r=p.getItem(e.id)),!r&&e[i.a]&&e[i.a].scid?c("onunload",{},e,e[i.a].scid):r&&ge(r).onbeforeunload?c("onbeforeunload",ge(r),e,r,0,function(){r&&c("onunload",ge(r),e,r),t()}):(r&&c("onunload",ge(r),e,r,1),t())}),I={getMod:_e,getProps:ye,innerMods:be},S=oe,k=p,_=Te,N=function(e,t){var n=q();R(Oe(t)),at(e,ge(t)),R(n)};var ct=function(e){return j(p.getItemVal(e))},ut=n(2),ft=["#KEY",".KEY","KEY"],dt=function(e,t){var n;for(var r in ft){var i=ft[r].replace("KEY",t);if(n=e.querySelector(i))break}return n},lt=function(e){if(Object(b.h)(e)){if(n=Object(nt.b)(e))return n;var t=ct(~he||void 0),n=dt(t||ut.a.doc,e);if(n)return n}return e},st=0,vt=function(e){return Object(b.f)(e)&&(e.id||(e.id=++st),i.e[e.id]=e,e=e.id),e},pt=function(e,t){return c("willload",ge(e),t,e,1)},ht=function(e,t){if(j(p.getItemVal(e))&&je(e))return c("didload",ge(e),t,e,1)},bt=function(e,t){var n=function(e,t){j(t)?oe(j(t),e):p.isItem(t)&&mag.clear(e)}.bind({},e,t);Ne(e,n)},gt=function(e,t,n,r,i){var o=p.getItem(t);t=vt(e);var a=Object(b.k)(ye(o));ht(o,e),je(o)&&c("willgetprops",ge(o),e,o,0,n)||(we(e.id,o,r,n),a!=Object(b.k)(ye(o))&&(i=1),bt(o,e.id),pt(o,e)||oe(e,o,i).then(function(){ht(o,e)}))},yt=[],mt={},Ot=0,jt=function(e,t,n,r){yt[e]=yt[e]||[];var o=function(e,t,n,r,i){Object(b.g)(i)&&(r=Object(b.j)(Object(b.a)(r),i),i=0),e<0&&!i&&(i=1);var a=t.id+(r.key?"."+r.key+".":"")+(i||"");!mt[a]||r.key||~o._id||(a+=++Ot);var c=mt[a]=mt[a]||t.cloneNode(1);if(c.id=a,p.isItem(a))return gt(c,a,r,n),c;var u=h(c.id);return e<0?e=o._id=u:yt[e].push({instanceId:u,subscribe:subscriberHandler.bind({},u)}),gt(c,a,r,n),c}.bind({},e,t,n,r);return o._id=e,o.clones=function(){return yt[o._id]},o.destroy=function(e){destroyerHandler(o._id,o.clones,e)},o.getId=function(){return o._id},o.rafBounce=function(e){return e?i.g[o._id]=1:!1===e&&(i.g[o._id]=0),!!i.g[o._id]},o.draw=function(e){return ut.a.redraw(t,o._id,e)},o.getState=function(){return ge(o._id)},o.getProps=function(){return ye(o._id)},o.subscribe=function(e){return subscriberHandler(o._id,e)},o};H(function(e,t){e[i.a]&&e[i.a].scid?c("onunload",{},e,e[i.a].scid):t()}),F(function e(t){if(t.children)for(var n=0;n<t.children.length;n++)e(t.children[n]);t[i.a]&&t[i.a].scid&&c("onunload",{},t,t[i.a].scid)});var Nt=function(e){if(Object(b.h)(e)){var t;if(t=Object(nt.b)(e))return t;if(t=dt(i.c,e))return t}return e};ut.a._handler=function(e,t,n){return It(e,t,n,at,Nt)};var _t=ut.a,wt=0,xt=function(e,t,n,r){var o,a=[],u=e.cloneNode(1),f=[],d=function d(l){var s,v=e;l=l||{},Object(b.i)(l.key)||(s=l.key+"-"+d.id);var p,h=Object(b.i)(l.key)?d.id:l.key+"-"+d.id;if(f[h]||(f[h]=Object(b.g)(n)?Object(b.a)(n):n),Object(b.g)(l)&&(l=Object(b.b)(f[h],l)),s&&!a[s]?v=a[s]=u.cloneNode(1):s&&a[s]&&(v=a[s]),!Object(b.i)(d)&&l&&l.key&&d.key&&d.key!=h&&c("onunload",l,v,d.key),o&&o==v[i.a].scid)throw Error("MagJS Error - recursive call:"+o);v[i.a]=v[i.a]||{},_t._cprops[h]&&Object(b.g)(l)&&(l.children=i.b[h]),d.props=l,d.key=h,d.fake=r;try{var g=_t._current;_t._current=d,p=t(l),o=v[i.a].scid=h;var y=q();y&&y[i.a]&&y[i.a].scid&&(v[i.a].pscid=y[i.a].scid),R(v),at(v,p)}finally{c("didupdate",l,v,h),R(y),o=0,_t._current=g}return v};return d.id=++wt,d.element=u,d},kt=n(4);ut.a.dom=kt.a;var It=function(e,t,n,r,o,a){if(e.raw)return kt.a.apply(this,arguments);if(e=o(e),t=o(t),n=n||{},Object(b.f)(t)&&Object(b.f)(e))t[i.a]||r(t,e);else{if(Object(b.e)(t)&&Object(b.f)(e)){try{xt(e.cloneNode(1),t,n,!0)()}catch(e){}return xt(e,t,n)}if(a)return a(e,t,n)}};ut.a._handler=function(e,t,n){return It(e,t,n,at,lt,function(e,t,n){return jt(-1,j(vt(e)),t,n)})};var St=ut.a;St.hook=Te,St.hookin=function(e,t,n){Ae[e].push({context:{},handler:n,key:t})},St.redraw=oe,St.begin=function(e){Object(b.i)(ie[e])?ie[e]=1:ie[e]++},St.end=function(e){if(ie[e]>1)ie[e]--;else{ie[e]=0;var t=p.getItemVal(e);oe(j(t),e)}};St.module=function(e,t,n){n=n||{};var r=function(e,t){var n=t?e+"-"+t:e;return p.isItem(n)?p.getItem(n):h(n)}(e=vt(e),n.key),i=Ct(n,r,t,e);if(i)return jt(r,i,t,Object(b.a)(n))};var Ct=function(e,t,n,r){e.retain||Se(t);var i=j(r);if(we(r,t,n,e),bt(t,r),!pt(t,i))return oe(i,t,1).then(function(){ht(t,i)}),i};St.clear=function(e){p.removeItem(e),Se(e),K(Oe(e))};St.getNode=j;t.default=St}])});