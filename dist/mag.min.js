/*! mag.js - 1.1.4 | (c)2019  https://github.com/magnumjs/mag.js | MIT | https://github.com/magnumjs/mag.js#readme */
var mag=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){var r=n(1);e.exports=r.default},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var i=0,o=["#KEY",".KEY","KEY"],u=function(e){if("string"==typeof e){var t;if("<"==e.trim()[0])if(t=(i=e,(u=l.doc.createElement("template")).innerHTML=i,u.content.children[0]))return t;if(t=function(e,t){var n;for(var r in o){var i=o[r].replace("KEY",t);if(n=e.querySelector(i))break}return n}((n=~l.mod.runningViewInstance||l.utils.runningEventInstance,r=l.utils.items.getItemVal(n),l.getNode(r))||l.doc,e))return t}var n,r,i,u;return e},a=function(e,t,n){var o,u=[],a=e.cloneNode(1),d=[],f=[],s=function i(s){var v,p=e;void 0!==(s=s||{}).key&&(v=s.key+"-"+i.id);var m,y=void 0!==s.key?s.key+"-"+i.id:i.id;if(f[y]||(f[y]="object"==r(n)?l.utils.copy(n):n),"object"==r(s)&&(s=l.utils.extend(f[y],s)),v&&!u[v]?p=u[v]=a.cloneNode(1):v&&u[v]&&(p=u[v]),o&&o==p[c].scid)throw Error("MagJS Error - recursive call:"+o);if(p[c]=p[c]||{},l._cprops[y]&&"object"==r(s)&&(s.children=l._cprops[y]),i.props=s,i.key=y,d[y]!=l.utils.toJson(s))try{var g=l._current;l._current=i,m=t(s),o=p[c].scid=y,d[y]=l.utils.toJson(s);var h=l.fill.id;h&&h[c]&&h[c].scid&&(p[c].pscid=h[c].scid),l.fill.setId(p),l.fill.run(p,m)}finally{l.fill.setId(h),o=0,l._current=g}return p};return s.id=++i,s.element=a,s},l=function e(t,n,r){if(t=u(t),n=u(n),r=r||{},!e.utils.isHTMLEle(n)||!e.utils.isHTMLEle(t))return"function"==typeof n&&e.utils.isHTMLEle(t)?a(t,n,r):_(-1,S(e._isNode(t)),n,r);n[c]||e.fill.run(n,t)},c="__magnum__";l.MAGNUM=c,l.rafBounceIds=[],l._cprops=[],l.doc=document;var d={values:[],attributes:[],elementMatcher:[]},f=[];i=0;l._isNode=function(e){return l.utils.isHTMLEle(e)&&(e.id||(e.id=++i),f[e.id]=e,e=e.id),e};l.module=function(e,t,n){n=n||{};var r=function(e,t){var n=t?e+"-"+t:e;return l.utils.items.isItem(n)?l.utils.items.getItem(n):l.utils.getItemInstanceId(n)}(e=l._isNode(e),n.key),i=s(n,r,t,e);if(i)return _(r,i,t,l.utils.copy(n))};var s=function(e,t,n,r){e.retain||l.mod.clear(t);var i=S(r);if(l.mod.submodule(r,t,n,e),x(t,r),!w(t,i))return l.redraw(i,t,1).then(function(){C(t,i)}),i},v=function(e,t){return!(t<0||t!=l.utils.items.getItem(e))||e==l.mod.getId(t)},p=[];l.begin=function(e){void 0===p[e]?p[e]=1:p[e]++},l.end=function(e){if(p[e]>1)p[e]--;else{p[e]=0;var t=l.utils.items.getItemVal(e);l.redraw(S(t),e)}},l.redraw=function(e,t,n){if(!p[t]){if(!e||void 0===t)throw Error("Mag.JS - Id or node invalid: "+l.utils.items.getItemVal(t));if(!v(e.id,t))return{then:function(e){return e()}};if(n&&l.fill.configs.splice(0,l.fill.configs.length),n&&l.mod.clear(t),l.mod.runningViewInstance==t)throw Error("Mag.JS - recursive call:"+t);return l.utils.scheduleFlush(t,N(e,t,n))}},l.hookin=function(e,t,n){d[e].push({context:{},handler:n,key:t})},l.hook=function(e,t,n){for(var r=0,i=d[e].length;r<i;r++)l.utils.callHook(d,t,e,r,n)};var m={},y=[],g=[],h=function(e,t){g[e]=g[e]||[];var n=g[e].push(t);return l.utils.onLCEvent("didupdate",e,function(t,n){var r=l.utils.toJson([n,t]),i=!0,o=!1,u=void 0;try{for(var a,c=g[e][Symbol.iterator]();!(i=(a=c.next()).done);i=!0){(0,a.value)(t,n,S(l.mod.getId(e)),JSON.parse(y[e]||"[]"))}}catch(e){o=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw u}}y[e]=r}),function(){return g[e].splice(n-1,1)}},b=[],I=function(e,t,n,r,i){var o=l.utils.items.getItem(t);t=l._isNode(e);var u=l.utils.toJson(l.mod.getProps(o));C(o,e),l.mod.exists(o)&&l.utils.callLCEvent("willgetprops",l.mod.getState(o),e,o,0,n)||(l.mod.submodule(e.id,o,r,n),u!=l.utils.toJson(l.mod.getProps(o))&&(i=1),x(o,e.id),w(o,e)||l.redraw(e,o,i).then(function(){C(o,e)}))},_=function(e,t,n,o){b[e]=b[e]||[];var u=function(e,t,n,o,a){"object"==r(a)&&(o=l.utils.merge(l.utils.copy(o),a),a=0),e<0&&!a&&(a=1);var c=t.id+(o.key?"."+o.key+".":"")+(a||"");!m[c]||o.key||~u._id||(c+=++i);var d=m[c]=m[c]||t.cloneNode(1);if(d.id=c,l.utils.items.isItem(c))return I(d,c,o,n),d;var f=l.utils.getItemInstanceId(d.id);return e<0?e=u._id=f:b[e].push({instanceId:f,subscribe:h.bind({},f)}),I(d,c,o,n),d}.bind({},e,t,n,o);return u._id=e,u.clones=function(){return b[u._id]},u.destroy=function(e){!function(e,t,n){var r=l.getNode(l.mod.getId(e)),i=function(){l.utils.callLCEvent("onunload",l.mod.getState(e),r,e)||(l.clear(e),E(e,r),t[e]&&(t[e].length=0),n&&(l.fill.removeNode(r),l.mod.remove(e)))};l.mod.getState(e).onbeforeunload?l.utils.callLCEvent("onbeforeunload",l.mod.getState(e),r,e,0,function(){i()}):i()}(u._id,u.clones,e)},u.getId=function(){return u._id},u.rafBounce=function(e){return e?l.rafBounceIds[u._id]=1:!1===e&&(l.rafBounceIds[u._id]=0),!!l.rafBounceIds[u._id]},u.draw=function(e){return l.redraw(t,u._id,e)},u.getState=function(){return l.mod.getState(u._id)},u.getProps=function(){return l.mod.getProps(u._id)},u.subscribe=function(e){return h(u._id,e)},u};function S(e,t){if(f[e]&&!t)return f[e];var n=l.doc.getElementById(e);return n&&(f[e]=n),f[e]}var x=function(e,t){var n=function(e,t){S(t)?l.redraw(S(t),e):l.utils.items.isItem(t)&&l.clear(e)}.bind({},e,t);l.mod.setFrameId(e,n)};l.clear=function(e){l.utils.items.removeItem(e),l.mod.clear(e),l.fill.clearCache(l.mod.getId(e))};var N=function(e,t,n){return function(e,t,n){if(S(e.id,1),v(e.id,t)&&e){var r=l.mod.getState(t);if(!l.utils.callLCEvent("isupdate",r,e,t)){if(l.mod.iscached(t)&&!n)return 0;if(!l.utils.callLCEvent("willupdate",r,e,t)){l.mod.callView(e,t);var i=l.fill.id;l.fill.setId(e.id),l.fill.run(e,r),l.fill.setId(i),k(e.id,l.fill.configs),l.utils.callLCEvent("didupdate",r,e,t),n||l.mod.iscached(t)}}}}.bind({},e,t,n)},k=function(e,t){for(var n in t)n.startsWith('id("'+e+'")/')&&t[n]()},E=function(e,t){for(var n,r=0,i=function(e,t){var n=[];for(var r in l.fill.cached)r.indexOf('id("'+e+'")/')>-1&&r.indexOf("-config")>-1&&l.fill.cached[r].configContext&&n.push({path:r.split("-config")[0],controller:l.fill.cached[r].configContext,handler:l.fill.cached[r].configContext.onunload});return n}(t.id);n=i&&i[r];r++)n.controller.onunload&&(n.handler.call(n.controller,t,n.path),n.controller.onunload=0)},w=function(e,t){return l.utils.callLCEvent("willload",l.mod.getState(e),t,e,1)},C=function(e,t){if(S(l.utils.items.getItemVal(e))&&l.mod.exists(e))return l.utils.callLCEvent("didload",l.mod.getState(e),t,e,1)};l._find=function(e,t){var n=l.fill.id;l.fill.setId(e);var r=l.fill.find(e,t);return l.fill.setId(n),r},l.getNode=S;var O=l;function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M="/";function j(e,t,n,r){var i=new WeakSet;return new Proxy(e,{get:function(e,o,u){var a,l=e[o];if("symbol"==L(o))return l;if("object"!==L(l)||"symbol"===L(l)||null===l||"function"==typeof l||Array.isArray(l)||!O.utils.isObject(l)||l.then||l.draw)o in e||~O.fill.ignorekeys.indexOf(o.toString())||n||"_"==o[0]||(l=O.proxy({},t,n,r+M+o));else if(a=l,!i.has(a))return i.add(l),O.proxy(l,t,n,r+M+o);var c=t({type:"get",object:e,name:o,path:r,oldValue:Reflect.get(e,o,u)});return void 0!==c&&(l=c==O.MAGNUM?void 0:c),l},deleteProperty:function(e,n){return t({type:"delete",name:n,object:e,oldValue:Reflect.get(e,n)}),Reflect.deleteProperty(e,n)},set:function(e,n,r,i){var o=Reflect.get(e,n,i);return o===r&&"length"!==n||(t({type:"set",name:n,object:e,oldValue:o}),Reflect.set(e,n,r,i))}})}O.proxy=function(e,t,n,r){for(var i in e){var o=L(e[i]);Array.isArray(e[i])&&e[i].length<101?e[i]=j(e[i],t):"object"==o&&null!==e[i]&&"symbol"!=L(i)&&"symbol"!=o&&"function"!=o&&O.utils.isObject(e[i])&&(e[i]=O.proxy(e[i],t,n,r+M+i))}return j(e,t,n,r||M)};var A=O;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P=[],H=A.MAGNUM,V={runningViewInstance:-1,innerMods:[],cache:[],getState:function(e){return P[e][1]},setState:function(e,t){P[e][1]=t},getView:function(e){return P[e][0]},getProps:function(e){return P[e]&&P[e][2]},setProps:function(e,t){return P[e][2]=t},remove:function(e){P[e]&&(P[e]=0)},getId:function(e){return P[e]&&P[e][3]},exists:function(e){return"object"==T(P[e])},setFrameId:function(e,t){P[e][4]=t},getFrameId:function(e){return P[e][4]},getMod:function(e){return P[e][5]}};V.submodule=function(e,t,n,r){if(P[t])return r.key&&r.key==V.getProps(t).key?V.setProps(t,A.utils.copy(A.utils.merge(V.getProps(t),r))):V.setProps(t,r),P[t];(function(e,t){for(var n in t=t||e,e){var r=e[n];"function"!=typeof r||~["controller","view"].indexOf(n)||(e[n]=r.bind(t))}})(n=A.utils.copy(n),n),P[t]=[0,0,0,0,0,0],V.setProps(t,r);var i={controller:function(r){return n.props=V.getProps(t),n.state=r,n.element=A.getNode(e),(n.controller||function(){}).call(r,n.props)||r},view:function(e,t,r){n.element=r,n.state=t,n.props=V.getProps(e),n.view&&n.view.call(n,t,n.props,r)}.bind({},t)};return P[t][0]=i.view,P[t][3]=e,P[t][1]=function(e,t,n){return new e(A.proxy({},J.bind({},"state",t)))}(i.controller,t),P[t][5]=n,P[t]};var F=[];var J=function(e,t,n){if("get"!=n.type||"props"==e||~A.fill.ignorekeys.indexOf(n.name.toString())||void 0!==n.oldValue)"set"==n.type&&"props"!=e&&n.object[n.name]&&n.object[n.name].draw&&"function"==typeof n.object[n.name].draw&&(V.innerMods[V.getId(t)]=[n.name,n.object[n.name]]);else{var r=A.getNode(V.getId(t));if(n.path&&"/"==n.path[0])var i=function(e,t){var n=e,r=t.split("/"),i=!0,o=!1,u=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value;if(c){var d=A._find(n,c);d.length&&(n=d)}}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return n}(r,n.path);i&&"$"!=n.path.split("/").pop()[0]&&(i=i[0]);var o=function(e,t){var n=e.name;if(void 0===e.object[e.name]&&"_"!=n[0]){var r=A._find(t,n),i="$"===n[0],o=[];return r.length?(r.forEach(function(n){var r;if(n&&n.type&&!~["submit","button"].indexOf(n.type)){if(n.value&&n.value.length>0)if("checkbox"==n.type||"radio"==n.type)if(n.checked&&((r={})._checked=!0),i)r?r._value=n.value:r={_value:n.value};else{var u=t.querySelectorAll("[name="+n.name+"]");if(u.length){var a=!0,l=!1,c=void 0;try{for(var d,f=u[Symbol.iterator]();!(a=(d=f.next()).done);a=!0){var s=d.value;s.checked&&(r?r._value=s.value:r={_value:s.value})}}catch(e){l=!0,c=e}finally{try{a||null==f.return||f.return()}finally{if(l)throw c}}}}else r={_value:n.multiple&&Array.prototype.map.call(n.selectedOptions,function(e){return e.value})||n.value}}else void 0===e.oldValue&&void 0===e.object[e.name]&&n&&!~["submit","button"].indexOf(n.type)&&1==n.childNodes.length&&n.childNodes[0].textContent.trim()&&(r={_text:n.childNodes[0].textContent.trim()});r?o.push(r):n&&!n.hasChildNodes()&&o.push(H)}),0===o.length?void 0:i?o:o[0]&&void 0!==o[0]._value?o[0]._value:o[0]&&o[0]._text?o[0]._text:o[0]):H}if("_"==n[0]){var u=n.substr(1);if(t.length){for(var a in o=[],t){var l,c=t[a];void 0===(l=c[u])&&(l=c.getAttribute(u)),o.push(l)}return o}return void 0===(l=t[u])&&(l=t.getAttribute(u)),l}}(n,i||r);if(null!==o&&"object"==T(o)&&n.object&&A.utils.merge(o,n.object[n.name]),o)return V.cached[t]=0,o}var u=V.getFrameId(t);"function"==typeof u&&"set"==n.type&&(cancelAnimationFrame(F[t]),F[t]=requestAnimationFrame(u))};V.iscached=function(e){var t=A.utils.toJson([V.getProps(e),V.getState(e)]);if(e in V.cache&&V.cache[e]==t)return!0;V.cache[e]=t},V.clear=function(e){~e&&V.cache[e]&&V.cache.splice(e,1)},V.cached=[],V.callView=function(e,t){V.runningViewInstance=t,V.cached[t]||(A.props.attachToArgs(t,V.getState(t),e),V.cached[t]=1);try{V.exists(t)&&V.getView(t)(V.getState(t),e)}finally{V.runningViewInstance=-1}},A.mod=V;var B=A;function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R={},U="_value",G=B.MAGNUM,K=function(e,t,n,r){var i,o=n.toString().split(".");if(o.length>=3)r=function(e,t){for(var n=1;n<e.length;n++){var r=e[n],i=e[n+1],o=B._find(Array.isArray(t)?t[0]:t,r);if(i&&!isNaN(Number(i)))t=o[i];else if(o&&o.length&&i&&n+2<e.length)t=B._find(o[0],i);else if(o&&o.length&&(t=o,n+2==e.length))break}return Array.isArray(t)?t[0]:t}(o,r),i=B._find(r,t);else{var u=parseInt(o.pop()),a=isNaN(u)?0:u;i=B._find(r[a]?r[a]:r,t)}return function(e,t,n,r){var i=[];for(var o in e){var u=e[o];$(u)&&(i.push(u),Y(u,t,n,r))}if(i.length)return 1==i.length?i[0]:i;return!1}(i,e,t,r)};function Y(e,t,n,r){if(e[G]=e[G]||{},!e[G].eventOnFocus){var i=function(t,n,r,i){var o=~["radio","checkbox"].indexOf(e.type);if(this[G].dirty||(this[G].dirty=1),e.selectedOptions)var u=Array.prototype.map.call(e.selectedOptions,function(e){return e.value});o?"_checked"in n||U in n?n._checked=this.checked:this.checked&&(n[r]=this.value):void 0!==n[U]?n[U]=u||this.value:void 0!==n._text&&(n._text=u||this.value),B.redraw(t,B.utils.items.getItem(t.id))}.bind(e,r,t,n);e.addEventListener("click",i),e.addEventListener("input",i),e.addEventListener("change",i),e.addEventListener("focus",i),e[G].eventOnFocus=1}}function $(e){return e&&~["INPUT","SELECT","TEXTAREA"].indexOf(e.tagName)}var D=function(e,t,n,r){var i=n[t];~[U,"_checked","_text"].indexOf(t)&&"string"==typeof e&&(t=e.split(".").pop());var o=function(e){for(var t in e)if($(e[t]))return e[t];return!1}(B._find(r,t));if("function"!=typeof i&&o){var u=K.bind({},n,t,e,r);u(),Object.defineProperty(n,t,{configurable:!0,get:function(){var t=u();return t&&"undefined"!==t.value&&t[G]&&t[G].dirty&&t.value!==i?(i=t.value,B.redraw(r,e,1),t.value):i},set:function(e){var t=u();t&&"undefined"!==t.value&&t.value!==e&&e!==i&&(t.value=e,i=e)}})}};R.attachToArgs=function e(t,n,r){for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];i==U||"object"!==q(o)||B.utils.isHTMLEle(o)?D.bind({},t,i,n,r)():(B.utils.isObject(o)&&B.utils.isEmpty(o)&&(o[U]=""),e(t+"."+i,o,r))}},B.props=R;var W=B,X={copy:function(e){return Object.assign({},e)},merge:function(){return Object.assign.apply({},arguments)},extend:function(e,t,n){for(var r in t)if(void 0===t[r])delete t[r];else if(n&&X.isObject(t[r]))return X.extend(e[r],t[r]);return X.merge(e,t)},isObject:function(e){return"Object]"==Object.prototype.toString.call(e).substr(-7)}},z=function(e,t){return"function"==typeof t?""+t:t};X.toJson=function(e){return JSON.stringify(e,z)},X.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return 0;return 1},X.isHTMLEle=function(e){return e&&1===e.nodeType},X.callHook=function(e,t,n,r,i,o){e[n][r].key==t&&(o={v:i.value,k:i.key},i.change=!1,e[n][r].handler.call(e[n][r].context,i),o!=={v:i.value,k:i.key}&&(i.change=!0))};var Q,Z=[],ee=[],te=[];function ne(e,t){return!W.rafRate||e-t<W.rafRate}X.scheduleFlush=function(e,t){return new Promise(function(n){W.rafBounce||W.rafBounceIds[e]&&t?(ee[e]&&(te[e](),cancelAnimationFrame(ee[e])),te[e]=n,ee[e]=requestAnimationFrame(function(r){ee[e]=0,t(),n()})):(t&&Z.push(t),Q||(Q=requestAnimationFrame(function(t){return function(e,t,n){var r;Q=0;do{var i=Z.shift();i&&i(),r=performance.now()}while(Z.length&&ne(r,t));Z.length?X.scheduleFlush(n).then(e):e()}(n,t,e)})))})};var re=[];X.onLCEvent=function(e,t,n){var r=e+"-"+t;re[r]=re[r]||[];var i=re[r].push(n);return function(){return re[r].splice(i-1,1)}},X.callLCEvent=function(e,t,n,r,i,o){var u;X.runningEventInstance=r;var a=W.mod.getProps(r),l=W.mod.getMod(r),c=l&&l[e]||t&&t[e];c&&!c.called&&(u=c.call(l,n,a,r,o),i&&(c.called=1));var d=e+"-"+r;if(re[d]){var f=!0,s=!1,v=void 0;try{for(var p,m=re[d][Symbol.iterator]();!(f=(p=m.next()).done);f=!0){(0,p.value)(t,a)}}catch(e){s=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(s)throw v}}}if(X.runningEventInstance=-1,!1===u)return!0};var ie={i:[],isItem:function(e){return~ie.i.indexOf(e)},setItem:function(e){return ie.i[ie.i.length]=e},getItem:function(e){return ie.i.indexOf(e)},getItemVal:function(e){return ie.i[e]},removeItem:function(e){return ie.i.splice(ie.i.indexOf(e),1)}};X.items=ie,X.getItemInstanceIdAll=function(){return ie.i},X.getItemInstanceId=function(e){return ie.isItem(e)?ie.getItem(e):(ie.setItem(e),ie.getItem(e))},W.utils=X;var oe=W;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ae=[],le={cached:[],ignorekeys:["toString","draw","then","hasOwnProperty","willgetprops","onbeforeunload","Symbol(Symbol.toStringTag)","nodeType","toJSON","onunload","willupdate","didupdate","didload","willload","isupdate"]},ce=le.cached,de=oe.MAGNUM,fe="function",se=[],ve=[],pe={};function me(e){return Array.isArray(e)}var ye=0;function ge(e,t){return e[de]=e[de]||{},e[de].uid&&!t||(e[de].uid=++ye),e[de].uid}function he(e,t){var n=ge(e);return se[n]&&!t?se[n]:se[n]=_e(e)}function be(e,t){var n=ge(e);if(ve[le.id]=ve[le.id]||[],ve[le.id][n]&&ve[le.id][n]==t)return 1;ve[le.id][n]=t}function Ie(e){var t="",n=function e(t){return t.id&&oe.utils.items.isItem(t.id)?t:t.parentNode?e(t.parentNode):void 0}(e),r=function(e){for(var t=1;e=e.previousElementSibling;)++t;return t}(e);return n&&(t+='id("'+(n.id||n.tagName)+'")'),t+="/"+e.tagName+"["+r+"]"}function _e(e,t){if(e.id&&le.id===e.id||le.id===e)return'id("'+(e.id||e.tagName)+'")';if(e===oe.doc.body)return e.tagName;var n=0;if(e.parentNode)for(var r=e.parentNode.childNodes,i=0,o=r.length;i<o;i++){var u=r[i];if(u===e)return _e(e.parentNode)+(e.tagName?"/"+e.tagName+"["+(n+1)+"]":"");1===u.nodeType&&u.tagName===e.tagName&&n++}}function Se(e){var t=_e(e);e&&ce[t+"-config"]&&ce[t+"-config"].configContext&&ue(ce[t+"-config"].configContext.onunload)===fe&&(ce[t+"-config"].configContext.onunload(ce[t+"-config"].configContext,e,t),delete ce[t+"-config"],delete le.configs[t]),function e(t){var n=oe.utils.items.getItem(t.id);if(t.children)for(var r=0;r<t.children.length;r++)e(t.children[r]);~n&&(oe.utils.callLCEvent("onunload",oe.mod.getState(n),t,n),oe.mod.clear(n),oe.mod.remove(n),oe.fill.clearCache(oe.mod.getId(n)))}(e),e.parentNode&&e.parentNode.removeChild(e)}function xe(e){var t=e&&parseInt(e.split("[").pop().slice(0,-1));return t?parseInt(t)-1:0}le.run=function(e,t,n){var r,i;if(e){null==t&&(t={_text:""});var o=Ae(e);if(i=me(t)){if(pe[n]&&0===o.length&&(pe[n].parent.insertAdjacentHTML("beforeend",pe[n].node),o=Ae(pe[n].parent.children)),!o.length)return;var u=o[0].parentNode;pe[n]||(pe[n]={node:o[0].cloneNode(1).outerHTML,parent:u});for(var a=oe.doc.createDocumentFragment(),l=0;o.length<t.length;)pe[n]?(u.insertAdjacentHTML("beforeend",pe[n].node),r=u.lastChild):r=o[0].cloneNode(1),ke(r,++l,n),o.push(r),a.appendChild(r);u.appendChild(a);var c=t.map(function(e){return e&&e._key});if(o.length!=t.length&&-1===c.indexOf(void 0)||(t=t.map(function(e,t){if("object"===ue(e)){if(o[t][de]=o[t][de]||{},o[t][de].__key&&"undefined"===ue(e._key))return e._key=o[t][de].__key,e;"undefined"===ue(e._key)&&(e._key=de+t),o[t][de].__key=e._key}return e})),o.length>t.length)if(0===t.length||"object"!==ue(t[0]))for(;o.length>t.length;)(u=(r=o.pop()).parentNode)&&Se(r);else{var d=[],f=t.map(function(e){return e._key});o=o.filter(function(e,t){var n;return"undefined"==ue(e[de])?n=1:~f.indexOf(e[de].__key)&&!~d.indexOf(e[de].__key)||(d.push(e[de].__key),n=1),n?(Se(e),!1):(d.push(e[de].__key),!0)})}}for(var s=0;s<o.length;s++)if(i)o[s]&&le.run(o[s],t[s],s);else{var v=ke(o[s],s+1,n);t&&"object"==ue(t)&&t.hasOwnProperty("_key")&&!oe.utils.isHTMLEle(t)&&(o[s][de].isItem=!0,o[s][de].dataPass=t),Oe(o[s],t,v,n)}}};var Ne=[];function ke(e,t,n){var r=ge(e);if(se[r])return se[r];if(Ne[r])return Ne[r];var i=+n==+n?t+n:t,o='id("'+("object"==ue(le.id)?le.id.tagName:le.id)+'")'+("string"==typeof n?n.split(")")[1]+"/":"/")+e.tagName+"["+i+"]";return Ne[r]=e[de].xpath=o}function Ee(e,t){if(!be(e,t.outerHTML)&&(!t.id&&!e.childNodes[0]||t.id&&!oe.doc.getElementById(t.id)||e.firstChild&&!e.firstChild.isEqualNode(t))){var n=oe.utils.items.getItem(t.id);if(~n&&e.hasChildNodes()){var r=oe.utils.items.getItem(le.id),i=e.cloneNode(1);i[de]={childof:r},oe.mod.getProps(n).children=i,oe.redraw(t,n)}else t[de]&&t[de].scid&&((i=e.cloneNode(1))[de]={childof:t[de].scid},oe._cprops[t[de].scid]=i);for(;e.lastChild;)Se(e.lastChild);if(t[de]&&void 0!==t[de].childof){e.innerHTML=t.innerHTML;var o=t[de].childof;oe._cprops[o]||(we(e,o),oe.utils.onLCEvent("willupdate",o,function(){we(e,o)}))}else e.appendChild(t)}}function we(e,t){var n=le.id;le.setId(oe.mod.getId(t)),le.run(e,oe.mod.getState(t)),le.setId(n)}var Ce=function(e,t,n,r){var i=e((n=function(e){var t=[];return e.replace(/\[(.+?)\]/g,function(e,n){t.push(n)}),t}(r=he(t))).join("."),r);if(!i||!oe.utils.isHTMLEle(i))return Oe(t,i,r);Ee(t,i),t[de]=t[de]||{},t[de].isItem=!0,t[de].dataPass={index:n},e.draw&&e.draw()};function Oe(e,t,n,r){var i,o=xe(n);if(t&&oe.utils.isHTMLEle(t))Ee(e,t);else{if("function"==typeof t)return Ce(t,e,o,n);if("object"!==ue(t))return Oe(e,{_text:t},n);oe.mod.innerMods[le.id]&&t[oe.mod.innerMods[le.id][0]]&&!t[oe.mod.innerMods[le.id][0]].draw&&oe.mod.innerMods[le.id][1].destroy(),(i=function(e,t){var n;for(var r in t){var i=t[r];void 0===i?i="":null===i&&-1===["onunload"].indexOf(r)?(e[de].detached=e[de].detached||[],e[de].detached[r]=1,je(e,r)):e[de].detached&&e[de].detached[r]&&(Me(e,r,i.nodeType),e[de].detached[r]=0),("_"===r[0]&&"_"!==r[1]||"on"==r.substr(0,2))&&(n=n||{},"on"==r.substr(0,2)?n[r]=i:n[r.substr(1)]=i)}return n}(e,t))&&function(e,t,n,r){var i=xe(n);for(var o in ce[ge(e)]=ce[ge(e)]||[],t)if("text"!==o&&"html"!==o)if(0==o.indexOf("on"))Pe(t[o],o,e,r);else{if("config"==o){var n=he(e),i=xe(n),u=!0;ce[n+"-config"]?u=!1:ce[n+"-config"]={};var a=ce[n+"-config"].configContext=ce[n+"-config"].configContext||{};ae[n]=function(e,t){return function(){return e.apply(e,t)}}(t[o],[e,u,a,i]);continue}var l={key:o,value:t[o],node:e};if(oe.hook("attributes",o,l),l.change&&(t[o=l.key]=l.value),ce[ge(e)]&&ce[ge(e)][o]==t[o])continue;null===t[o]?e.removeAttribute(o):"value"==o&&e.multiple&&e.selectedOptions&&Array.isArray(t[o])?(e.value=t[o],t[o].forEach(function(t){Array.from(e.options).find(function(e){return e.value==t}).selected=!0})):o in e?"style"==o?e[o].cssText=t[o]:e[o]=t[o]:e.setAttribute(o,String(t[o])),ce[ge(e)][o]=t[o]}(function(e,t){if(!e||null==t||be(e,t))return;var n=String(t);if("INPUT"===e.nodeName)if(~["radio","checkbox"].indexOf(e.type)){if(e.name){var r=oe.getNode(le.id).querySelectorAll("[name="+e.name+"]");if(r.length>1){var i=!0,o=!1,u=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value;if(c.value==n){c.checked=!0;break}}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}}}}else n!=e.value&&(e.value=n);else"SELECT"!==e.nodeName&&(e.firstChild?e.firstChild.textContent=n:e.appendChild(e.ownerDocument.createTextNode(n)));"SELECT"===e.nodeName&&n&&(e.value=n)})(e,t.text),function(e,t){if(Array.isArray(t)){for(var n in t)He(e,t[n],n);return}if(oe.utils.isHTMLEle(t))return void He(e,t,0);if(!e||null==t||be(e,t))return;e.innerHTML=t}(e,t.html)}(e,i,n,r),function(e,t,n){var r;for(var i in t){var o=t[i];if(!~le.ignorekeys.indexOf(i)&&"_"!==i[0]&&"on"!=i.substr(0,2)){r=Ve(e,i);var u={key:i,value:o,node:e};oe.hook("values","*",u),u.change&&(o=u.value),le.run(r,o,n+"/"+i)}}}(e,t,n)}}var Le=[];function Me(e,t,n){Ve(e,t).forEach(function(e){var t=ge(e);if(t in Le){if(!n)for(var r in Le[t])e.appendChild(Le[t][r]);delete Le[t]}})}function je(e,t){var n=0,r=1,i=function(e){if(++n===r)for(;e.lastChild;)Se(e.lastChild)},o=function(e,t){var n;e.id&&oe.utils.items.isItem(e.id)&&(n=oe.utils.items.getItem(e.id)),n&&oe.mod.getState(n).onbeforeunload?(r++,oe.utils.callLCEvent("onbeforeunload",oe.mod.getState(n),e,n,0,function(){n&&oe.utils.callLCEvent("onunload",oe.mod.getState(n),e,n),t()})):(n&&oe.utils.callLCEvent("onunload",oe.mod.getState(n),e,n,1),t())};Ve(e,t).forEach(function(e){var t=ge(e);e.children.length&&(Le[t]=Ae(e.children));for(var n in Le[t]){var r=Le[t][n];o(r,function(){i(e)})}i(e)})}function Ae(e){var t;if(null==e.length&&(e=[e]),!me(e)){t=[];for(var n=0;n<e.length;n+=1)e[n]&&t.push(e[n]);e=t}return e}function Te(e,t){return function(e,t,n){var r,i=Ie(t),o=(r=i)&&~r.indexOf("id(")&&r.split('id("')[1].split('")')[0];o||(o=function e(t,n){if(t[de]&&t[de].scid&&!t[de].pscid)n=t;else if(n)return n;if(t.parentNode)return e(t.parentNode,n)}(t));var u=le.id;le.setId(o);var a=function e(t){return t&&t[de]&&t[de].isItem?t:t.parentNode?e(t.parentNode):void 0}(t),l=a&&_e(a),c=xe(l),d=xe(i=i),f={path:l,node:a,data:((a||{})[de]||[]).dataPass,index:c};le.setId(u);var s=oe.doc.getElementById(o),v=oe.utils.items.getItem(o),p=e.call(~v?oe.mod.getMod(v):s,n,d,t,f);if(o&&s){var m=function(){oe.redraw(s,v,1)};p&&p.then?p.then(function(e){return m(),e}):m()}return p}.bind({},t,e)}function Pe(e,t,n,r){var i=t.substr(2).toLowerCase(),o=("string"==typeof r?r.split("/")[0]:"")+"-"+n[de].uid,u=n[de].events=n[de].events||[],a=n[de].eventHandlers=n[de].eventHandlers||[];a[i]=a[i]||[],a[i][o]=e,u[i]||(u[i]=1,function(e,t){function n(n){var r=e[de].eventHandlers[t];for(var i in r){var o=r[i];!1===Te(e,o)(n)&&n.preventDefault()}}e.removeEventListener(t,n),e.addEventListener(t,n)}(n,i))}function He(e,t,n){!t||e.childNodes[n]&&e.childNodes[n].isEqualNode(t)||(e.childNodes[n]?e.replaceChild(t,e.childNodes[n]):e.appendChild(t))}function Ve(e,t,n){var r=function(e){var t=[];if(e){var n=e.childNodes;if(n)for(var r=0;r<n.length;r+=1)1===n[r].nodeType&&Fe(n[r])&&t.push(n[r])}return t}(e),i=[],o=t,u="$"===t[0];"$"===o[0]&&(o=o.substr(1));for(var a=0;a<r.length;a+=1)Je(r[a],o)&&i.push(r[a]);if(!i.length||u)for(a=0;a<r.length&&(!(i=i.concat(Ve(r[a],t,!0))).length||u);a++);if(!n&&!i.length){var l={key:t,value:i,node:e};oe.hook("elementMatcher",t,l),l.change&&(i=l.value)}return i}function Fe(e){return le.id&&(oe.utils.isHTMLEle(le.id)&&e[de]&&e[de].scid||e.id&&e.id!=le.id&&oe.utils.items.isItem(e.id))?0:1}function Je(e,t){var n=" "+e.className+" ";return e.id===t||~n.indexOf(" "+t+" ")||e.name===t||e.nodeName.toLowerCase()===t.toLowerCase()||e.getAttribute("data-bind")===t}le.removeNode=Se,le.configs=ae,le.find=Ve,le.setId=function(e){le.id=e},le.clearCache=function(e){ve[e]&&delete ve[e]},oe.fill=le;t.default=oe}]);