/*
Mag.JS v0.28.1
http://github.com/magnumjs/mag.js
(c) Michael Glazer
License: MIT
*/
(function(b,c){'use strict';function g(R,S){return'function'==typeof S?''+S:S}function h(R,S){if(x[R]&&!S)return x[R];var T=mag.doc.getElementById(R);return T&&(x[R]=T),x[R]}var j='KEY',l=0,n=['#'+j,'.'+j,j],q=function(R,S){var T;for(var U in n){var V=n[U].replace(j,S);if(T=R.querySelector(V),T)break}return T},r=function(R){var S=mag.utils.items.getItemVal(R),T=mag.getNode(S);return T},t=function(R){if('string'==typeof R){var S=r(~mag.mod.runningViewInstance||mag.utils.runningEventInstance),T=q(S||mag.doc,R);if(T)return T}return R},u=function(R,S,T){var Y,U=[],V=R.cloneNode(1),X=[],Z=[],$=function(_){var aa=R;_=_||{};var ba;_.key&&(ba=_.key+'-'+$.id);var ca=_.key?_.key+'-'+$.id:$.id;if(Z[ca]||(Z[ca]='object'==typeof T?mag.utils.copy(T):T),'object'==typeof _&&(_=mag.utils.extend(Z[ca],_)),ba&&!U[ba]?aa=U[ba]=V.cloneNode(1):ba&&U[ba]&&(aa=U[ba]),Y&&Y==aa[v].scid)throw Error('MagJS Error - recursive call:'+Y);aa[v]=aa[v]||{},mag._cprops[ca]&&'object'==typeof _&&(_.children=mag._cprops[ca]);var da;return X[ca]!=JSON.stringify(_,g)&&(da=S(_),Y=aa[v].scid=ca,X[ca]=JSON.stringify(_,g),mag.fill.setId(aa),mag.fill.run(aa,da),mag.fill.setId(0),Y=0),aa};return $.id=++l,$};b.mag=function(R,S,T){if(R=t(R),S=t(S),T=T||{},mag.utils.isHTMLEle(S)&&mag.utils.isHTMLEle(R))S[v]||mag.fill.run(S,R);else{if('function'==typeof S&&mag.utils.isHTMLEle(R)){try{u(R.cloneNode(1),S,T)()}catch(U){}return u(R,S,T)}return J(-1,h(mag._isNode(R)),S,T)}};var v='__magnum__';mag.MAGNUM=v,mag.rafBounceIds=[],mag._cprops=[],mag.doc=c;var w={values:[],attributes:[],elementMatcher:[]},x=[],l=0;mag._isNode=function(R){return mag.utils.isHTMLEle(R)&&(!R.id&&(R.id=++l),x[R.id]=R,R=R.id),R};var y=function(R,S){var T,U=S?R+'-'+S:R;return T=mag.utils.items.isItem(U)?mag.utils.items.getItem(U):mag.utils.getItemInstanceId(U),T};mag.module=function(R,S,T){T=T||{},R=mag._isNode(R);var U=y(R,T.key),V=z(T,U,S,R);return V?J(U,V,S,mag.utils.copy(T)):void 0};var z=function(R,S,T,U){R.retain||mag.mod.clear(S);var V=h(U);if(mag.mod.submodule(U,S,T,R),K(S,U),!P(S,V))return mag.redraw(V,S,1).then(function(){Q(S,V)}),V},A=function(R,S){return 0>S||S!=mag.utils.items.getItem(R)?R==mag.mod.getId(S):!0},B=[];mag.begin=function(R){'undefined'==typeof B[R]?B[R]=1:B[R]++},mag.end=function(R){if(1<B[R])B[R]--;else{B[R]=0;var S=mag.utils.items.getItemVal(R);mag.redraw(h(S),R)}},mag.redraw=function(R,S,T){if(!B[S]){if(!R||'undefined'==typeof S)throw Error('Mag.JS - Id or node invalid: '+mag.utils.items.getItemVal(S));if(!A(R.id,S))return{then:U=>U()};if(T&&mag.fill.configs.splice(0,mag.fill.configs.length),T&&mag.mod.clear(S),mag.mod.runningViewInstance==S)throw Error('Mag.JS - recursive call:'+S);return mag.utils.scheduleFlush(S,L(R,S,T))}},mag.hookin=function(R,S,T){w[R].push({context:{},handler:T,key:S})},mag.hook=function(R,S,T){for(var U=0,V=w[R].length;U<V;U++)mag.utils.callHook(w,S,R,U,T)};var C={},D=[],E=[],F=function(R,S,T){var U=mag.getNode(mag.mod.getId(R)),V=function(){mag.utils.callLCEvent('onunload',mag.mod.getState(R),U,R)||(mag.clear(R),O(R,U),S[R]&&(S[R].length=0),T&&(mag.fill.removeNode(U),mag.mod.remove(R)))};mag.mod.getState(R).onbeforeunload?mag.utils.callLCEvent('onbeforeunload',mag.mod.getState(R),U,R,0,function(){V()}):V()},G=function(R,S){E[R]=E[R]||[];var T=E[R].push(S);return mag.utils.onLCEvent('didupdate',R,function(U,V){var W=mag.utils.merge(mag.utils.copy(V),mag.utils.copy(U));if(JSON.stringify(W)!==JSON.stringify(D[R])){for(var X of E[R])X(U,V,h(mag.mod.getId(R)),D[R]);D[R]=W}}),function(){return E[R].splice(T-1,1)}},H=[],I=function(R,S,T,U,V){var W=mag.utils.items.getItem(S);(S=mag._isNode(R),Q(W,R),!(mag.mod.exists(W)&&mag.utils.callLCEvent('willgetprops',mag.mod.getState(W),R,W,0,T)))&&(mag.mod.submodule(R.id,W,U,T),K(W,R.id),P(W,R)||mag.redraw(R,W,V).then(function(){Q(W,R)}))},J=function(R,S,T,U){H[R]=H[R]||[];var V=function(W,X,Y,Z,$){'object'==typeof $&&(Z=mag.utils.merge(mag.utils.copy(Z),$),$=0);var _=X.id+(Z.key?'.'+Z.key:'')+'.'+($||0);!C[_]||Z.key||~V._id||(_+=++l);var aa=C[_]=C[_]||X.cloneNode(1);if(aa.id=_,mag.utils.items.isItem(_))return I(aa,_,Z,Y,1),aa;var ba=mag.utils.getItemInstanceId(aa.id);return 0>W?W=V._id=ba:H[W].push({instanceId:ba,subscribe:G.bind({},ba)}),I(aa,_,Z,Y,1),aa}.bind({},R,S,T,U);return V._id=R,V.clones=function(){return H[V._id]},V.destroy=function(W){F(V._id,V.clones,W)},V.getId=function(){return V._id},V.rafBounce=function(W){return W?mag.rafBounceIds[V._id]=1:!1===W&&(mag.rafBounceIds[V._id]=0),!!mag.rafBounceIds[V._id]},V.draw=function(W){return mag.redraw(S,V._id,W)},V.getState=function(){return mag.mod.getState(V._id)},V.getProps=function(){return mag.mod.getProps(V._id)},V.subscribe=function(W){return G(V._id,W)},V},K=function(R,S){var T=function(U,V){h(V)?mag.redraw(h(V),U):mag.utils.items.isItem(V)&&mag.clear(U)}.bind({},R,S);mag.mod.setFrameId(R,T)};mag.clear=function(R){mag.utils.items.removeItem(R),mag.mod.clear(R),mag.fill.clearCache(mag.mod.getId(R))};var L=function(R,S,T){return function(U,V,W){if(h(U.id,1),A(U.id,V)&&U){var X=mag.mod.getState(V);return mag.utils.callLCEvent('isupdate',X,U,V)?void 0:mag.mod.iscached(V)&&!W?0:void(mag.utils.callLCEvent('willupdate',X,U,V)||(mag.mod.callView(U,V),mag.fill.setId(U.id),mag.fill.run(U,X),mag.fill.setId(0),M(U.id,mag.fill.configs),mag.utils.callLCEvent('didupdate',X,U,V),!W&&mag.mod.iscached(V)))}}.bind({},R,S,T)},M=function(R,S){for(var T in S)T.startsWith('id("'+R+'")/')&&S[T]()},N=function(R){var T=[];for(var U in mag.fill.cached)-1<U.indexOf('id("'+R+'")/')&&-1<U.indexOf('-config')&&mag.fill.cached[U].configContext&&T.push({path:U.split('-config')[0],controller:mag.fill.cached[U].configContext,handler:mag.fill.cached[U].configContext.onunload});return T},O=function(R,S){for(var V,T=N(S.id,R),U=0,W=T;V=W&&W[U];U++)V.controller.onunload&&(V.handler.call(V.controller,S,V.path),V.controller.onunload=0)},P=function(R,S){return mag.utils.callLCEvent('willload',mag.mod.getState(R),S,R,1)},Q=function(R,S){var T=mag.utils.items.getItemVal(R);if(h(T)&&mag.mod.exists(R))return mag.utils.callLCEvent('didload',mag.mod.getState(R),S,R,1)};mag.getNode=h})(window||global||this,document),function(b){'use strict';function c(u,v){var w=u.name;if('undefined'==typeof u.object[u.name]&&'_'!=w[0]){var x=b.fill.find(v,w),y='$'===w[0],z=[];return x.length?(x.forEach(function(E){var F;if(!(E&&E.type&&!~['submit','button'].indexOf(E.type)))'undefined'==typeof u.oldValue&&'undefined'==typeof u.object[u.name]&&E&&!~['submit','button'].indexOf(E.type)&&1==E.childNodes.length&&E.childNodes[0].textContent.trim()&&(F={_text:E.childNodes[0].textContent.trim()});else if(E.value&&0<E.value.length)if('checkbox'!=E.type&&'radio'!=E.type)F={_value:E.value};else if(E.checked&&(F={},F._checked=!0),!y){var G=v.querySelectorAll('[name='+E.name+']');if(G.length)for(var H of G)H.checked&&(F?F._value=H.value:F={_value:H.value})}else F?F._value=E.value:F={_value:E.value};F?z.push(F):E&&!E.hasChildNodes()&&z.push(h)}),0===z.length?void 0:y?z:z[0]&&'undefined'!=typeof z[0]._value?z[0]._value:z[0]&&z[0]._text?z[0]._text:z[0]):h}if('_'==w[0]){var A=w.substr(1);if(v.length){var z=[];for(var B in v){var C=v[B],D=C[A];'undefined'==typeof D&&(D=C.getAttribute(A)),z.push(D)}return z}var D=v[A];return'undefined'==typeof D&&(D=v.getAttribute(A)),D}}function f(u,v){l.setProps(v,b.proxy(l.getProps(v),t.bind({},'props',v),'prop'));var x=new u(b.proxy({},t.bind({},'state',v)));return x}var g=[],h=b.MAGNUM,l={runningViewInstance:-1,innerMods:[],cache:[]};l.getState=function(u){return g[u]&&g[u][1]},l.setState=function(u,v){g[u][1]=v},l.getView=function(u){return g[u][0]},l.getProps=function(u){return g[u][2]},l.setProps=function(u,v){return g[u][2]=v},l.remove=function(u){g.splice(u,1)},l.getId=function(u){return g[u]&&g[u][3]},l.exists=function(u){return'undefined'!=typeof g[u]},l.setFrameId=function(u,v){g[u][4]=v},l.getFrameId=function(u){return g[u][4]},l.getMod=function(u){return g[u][5]};var n=(u,v)=>{for(var w in v=v||u,u){var x=u[w];'function'!=typeof x||~['controller','view'].indexOf(w)||(u[w]=x.bind(v))}return u};l.submodule=function(u,v,w,x){if(g[v])return x.key&&x.key==l.getProps(v).key?l.setProps(v,b.utils.copy(b.utils.merge(l.getProps(v),x))):l.setProps(v,x),g[v];w=b.utils.copy(w),n(w,w),g[v]=[0,0,0,0,0,0],l.setProps(v,x);var z=function(B,C,D){w.element=D,w.state=C,w.props=l.getProps(B),w.view&&w.view.call(w,C,w.props,D)}.bind({},v),A={controller:function(B){return w.props=l.getProps(v),w.state=B,w.element=b.getNode(u),(w.controller||function(){}).call(B,w.props)||B},view:z};return g[v][0]=A.view,g[v][3]=u,g[v][1]=f(A.controller,v,u),g[v][5]=w,g[v]};var q=[],r=function(u,v){var w=u,x=v.split('/');for(var y of x)if(y){var z=b.fill.find(w,y);z.length&&(w=z)}return w},t=function(u,v,w){if('get'==w.type&&'props'!=u&&!~b.fill.ignorekeys.indexOf(w.name.toString())&&'undefined'==typeof w.oldValue){var x=b.getNode(l.getId(v));if(w.path&&'/'==w.path[0])var y=r(x,w.path);y&&'$'!=w.path.split('/').pop()[0]&&(y=y[0]);var z=c(w,y?y:x);if(null!=z&&'undefined'!=typeof z&&'object'==typeof z&&w.object&&b.utils.merge(z,w.object[w.name]),'undefined'!=typeof z)return l.cached[v]=0,z}else'set'==w.type&&'props'!=u&&w.object[w.name]&&w.object[w.name].draw&&'function'==typeof w.object[w.name].draw&&(l.innerMods[l.getId(v)]=[w.name,w.object[w.name]]);var A=l.getFrameId(v);'function'==typeof A&&'set'==w.type&&(cancelAnimationFrame(q[v]),q[v]=requestAnimationFrame(A))};l.iscached=function(u){var v=JSON.stringify(b.utils.merge(b.utils.copy(l.getProps(u)),l.getState(u)));return u in l.cache&&l.cache[u]==v||void(l.cache[u]=v)},l.remove=function(u){g[u]&&(g[u]=0)},l.clear=function(u){~u&&l.cache[u]&&l.cache.splice(u,1)},l.cached=[],l.callView=function(u,v){l.runningViewInstance=v,l.cached[v]||(b.props.attachToArgs(v,l.getState(v),u),l.cached[v]=1);try{l.getView(v)(l.getState(v),u)}finally{l.runningViewInstance=-1}},b.mod=l}(mag),function(b){'use strict';function f(v,w,x,y){var z=[];for(var A in v){var B=v[A];h(B)&&(z.push(B),g(B,w,x,y))}return!!z.length&&(1==z.length?z[0]:z)}function g(v,w,x,y){if(v[n]=v[n]||{},!v[n].eventOnFocus){var z=function(A,B,C){var E=~['radio','checkbox'].indexOf(v.type);this[n].dirty||(this[n].dirty=1),E?'_checked'in B||'_value'in B?B._checked=this.checked:this.checked&&(B[C]=this.value):void 0===B._value?void 0!==B._text&&(B._text=this.value):B._value=this.value,b.redraw(A,b.utils.items.getItem(A.id))}.bind(v,y,w,x);v.addEventListener('click',z,!1),v.addEventListener('input',z,!1),v.addEventListener('focus',z,!1),v[n].eventOnFocus=1}}function h(v){return v&&~['INPUT','SELECT','TEXTAREA'].indexOf(v.tagName)}function j(v){for(var w in v)if(h(v[w]))return v[w];return!1}var l={},n=b.MAGNUM,q=function(v,w){for(var x=1;x<v.length;x++){var y=v[x],z=v[x+1],A=b.fill.find(Array.isArray(w)?w[0]:w,y);if(z&&!isNaN(+z))w=A[z];else if(A&&A.length&&z&&x+2<v.length)w=b.fill.find(A[0],z);else if(A&&A.length&&(w=A,x+2==v.length))break}return Array.isArray(w)?w[0]:w},r=function(v,w,x,y){var A,z=x.toString().split('.');if(3<=z.length)y=q(z,y),A=b.fill.find(y,w);else{var B=parseInt(z.pop()),C=isNaN(B)?0:B;A=b.fill.find(y[C]?y[C]:y,w)}return f(A,v,w,y)},t=function(v,w,x,y){var z=x[w];~['_value','_checked','_text'].indexOf(w)&&'string'==typeof v&&(w=v.split('.').pop());var A=b.fill.find(y,w),B=j(A);if('function'!=typeof z&&B){var C=r.bind({},x,w,v,y);C(),Object.defineProperty(x,w,{configurable:!0,get:function(){var D=C();return D&&'undefined'!==D.value&&D[n]&&D[n].dirty&&D.value!==z?(z=D.value,b.redraw(y,v,1),D.value):z},set:function(D){var E=C();E&&'undefined'!==E.value&&E.value!==D&&D!==z&&(E.value=D,z=D)}})}},u=function(v,w,x){for(var y in w)if(w.hasOwnProperty(y)){var z=w[y];'object'!=typeof z||b.utils.isHTMLEle(z)?t.bind({},v,y,w,x)():(b.utils.isObject(z)&&b.utils.isEmpty(z)&&(z._value=''),u(v+'.'+y,z,x))}};l.attachToArgs=u,b.props=l}(mag),function(b){'use strict';var c={isObject:function(l){return'Object]'==Object.prototype.toString.call(l).substr(-7)},isEmpty:function(l){for(var n in l)if(l.hasOwnProperty(n))return 0;return 1},isHTMLEle:function(l){return l&&1===l.nodeType},callHook:function(l,n,q,r,t,u){l[q][r].key==n&&(u={v:t.value,k:t.key},t.change=!1,l[q][r].handler.call(l[q][r].context,t),{v:t.value,k:t.key}!==u&&(t.change=!0))}},f=[],g=[];c.scheduleFlush=function(l,n){return new Promise(function(q){b.rafBounce||b.rafBounceIds[l]?(cancelAnimationFrame(g[l]),g[l]=requestAnimationFrame(function(){n(),q(),g[l]=0})):(f.push(n),g[l]?q():g[l]=requestAnimationFrame(function(){g[l]=0;for(var r;r=f.shift();)r();q()}))})};var h=[];c.onLCEvent=function(l,n,q){var r=l+'-'+n;h[r]=h[r]||[];var t=h[r].push(q);return function(){return h[r].splice(t-1,1)}},c.callLCEvent=function(l,n,q,r,t,u){var v;c.runningEventInstance=r;var w=b.mod.getProps(r);n&&n[l]&&(v=n[l].call(b.mod.getMod(r),q,w,r,u),t&&(n[l]=0));var x=l+'-'+r;if(h[x]){for(var y of h[x])y(n,w);t&&(h[x]=0)}return(c.runningEventInstance=-1,!1===v)||void 0},c.copy=function(l){return Object.assign({},l)},c.merge=function(){return Object.assign.apply({},arguments)},c.extend=function(l,n,q){for(var r in n)if(n[r]===void 0)delete n[r];else if(q&&c.isObject(n[r]))return c.extend(l[r],n[r]);return c.merge(l,n)};var j={i:[],isItem:function(l){return~j.i.indexOf(l)},setItem:function(l){j.i[j.i.length]=l},getItem:function(l){return j.i.indexOf(l)},getItemVal:function(l){return j.i[l]},removeItem:function(l){j.i.splice(j.i.indexOf(l),1)}};c.items=j,c.getItemInstanceIdAll=function(){return j.i},c.getItemInstanceId=function(l){return j.isItem(l)?j.getItem(l):(j.setItem(l),j.getItem(l))},b.utils=c}(mag),function(b,c,f){'use strict';function g($){return Array.isArray($)}function h($,_){return $[Q]=$[Q]||{},(!$[Q].uid||_)&&($[Q].uid=++X),$[Q].uid}function j($,_){var aa=h($,_);return U[aa]?U[aa]:U[aa]=q($)}function l($,_,aa){var ba=h($,aa);return V[O.id]=V[O.id]||[],V[O.id][ba]&&V[O.id][ba]==_?1:void(V[O.id][ba]=_)}function n($){return $.id?$:$.parentNode?n($.parentNode):void 0}function q($){var _='',aa=n($),ba=$.parentNode&&[].indexOf.call($.parentNode.children,$);return aa&&(_+='id("'+aa.id+'")'),_+='/'+$.tagName+'['+(ba+1)+']',_}function r($){if($.id&&O.id===$.id)return'id("'+$.id+'")';if($===b.doc.body)return $.tagName;var _=0;if($.parentNode)for(var ca,aa=$.parentNode.childNodes,ba=0;ba<aa.length;ba++){if(ca=aa[ba],ca===$)return r($.parentNode)+($.tagName?'/'+$.tagName+'['+(_+1)+']':'');1===ca.nodeType&&ca.tagName===$.tagName&&_++}}function t($){var _=r($);$&&P[_+'-config']&&P[_+'-config'].configContext&&typeof P[_+'-config'].configContext.onunload==='function'&&(P[_+'-config'].configContext.onunload(P[_+'-config'].configContext,$,_),delete P[_+'-config'],delete O.configs[_]),$.parentNode&&$.parentNode.removeChild($),b.mod.cached[b.utils.items.getItem(O.id)]=0}function u($){var _=$&&parseInt($.split('[').pop().slice(0,-1));return _?parseInt(_)-1:0}function v($){return $&&~$.indexOf('id(')&&$.split('id("')[1].split('")')[0]}function w($){if($&&$[Q]&&$[Q].isChildOfArray)return $;return $.parentNode?w($.parentNode):void 0}function x($,_,aa){if(!l($,_.outerHTML,aa)&&(!_.id&&!$.childNodes[0]||_.id&&!b.doc.getElementById(_.id)||$.firstChild&&!$.firstChild.isEqualNode(_))){var ba=b.utils.items.getItem(_.id);if(~ba&&$.hasChildNodes()){var ca=b.utils.items.getItem(O.id),da=$.cloneNode(1);da[Q]={childof:ca},b.mod.getProps(ba).children=da}else _[Q]&&_[Q].scid&&(da=$.cloneNode(1),da[Q]={childof:_[Q].scid},b._cprops[_[Q].scid]=da);for(;$.lastChild;)$.removeChild($.lastChild);if(_[Q]&&_[Q].childof!==f){$.innerHTML=_.innerHTML;var ea=_[Q].childof,fa=O.id;O.setId(b.getNode(b.getId(ea))),O.run($,b.mod.getState(ea)),O.setId(fa)}else $.appendChild(_)}}function y($,_){var aa;for(var ba in _){var ca=_[ba];ca===f?ca='':null===ca&&-1===['onunload'].indexOf(ba)?($[Q].detached=$[Q].detached||[],$[Q].detached[ba]=1,C($,ba)):$[Q].detached&&$[Q].detached[ba]&&(B($,ba),$[Q].detached[ba]=0),'_'===ba[0]&&'_'!==ba[1]&&(aa=aa||{},aa[ba.substr(1)]=ca)}return aa}function z($,_,aa){var ba;for(var ca in _){var da=_[ca];if(!~O.ignorekeys.indexOf(ca)&&'_'!==ca[0]){ba=K($,ca);var ea={key:ca,value:da,node:$};b.hook('values','*',ea),ea.change&&(da=ea.value),O.run(ba,da,aa+'/'+ca)}}}function A($,_,aa,ba){var ca,ga=u(aa);return _&&b.utils.isHTMLEle(_)?void x($,_):'function'==typeof _?Y(_,$,ga,aa):'object'==typeof _?void(b.mod.innerMods[O.id]&&_[b.mod.innerMods[O.id][0]]&&!_[b.mod.innerMods[O.id][0]].draw&&b.mod.innerMods[O.id][1].destroy(),ca=y($,_),ca&&H($,ca,aa,ba),z($,_,aa)):A($,{_text:_},aa)}function B($,_){var aa=K($,_);aa.forEach(function(ba){var ca=h(ba);if(ca in Z){for(var da in Z[ca])ba.appendChild(Z[ca][da]);delete Z[ca]}})}function C($,_){var aa=0,ba=1,ca=function(fa){if(++aa==ba)for(;fa.lastChild;)t(fa.lastChild)},da=function(fa,ga){var ha;fa.id&&b.utils.items.isItem(fa.id)&&(ha=b.utils.items.getItem(fa.id)),ha&&b.mod.getState(ha).onbeforeunload?(ba++,b.utils.callLCEvent('onbeforeunload',b.mod.getState(ha),fa,ha,0,function(){ha&&b.utils.callLCEvent('onunload',b.mod.getState(ha),fa,ha),ga()})):(ha&&b.utils.callLCEvent('onunload',b.mod.getState(ha),fa,ha),ga())},ea=K($,_);ea.forEach(function(fa){var ga=h(fa);fa.children.length&&(Z[ga]=D(fa.children));for(var ia in Z[ga]){var ja=Z[ga][ia];da(ja,function(){ca(fa)})}ca(fa)})}function D($){var _;if(null==$.length&&($=[$]),!g($)){_=[];for(var aa=0;aa<$.length;aa+=1)$[aa]&&_.push($[aa]);$=_}return $}function E($,_){var aa=function(ba,ca,da){var ea=w(ca),fa=ea&&r(ea),ga=u(fa),ha=q(ca),ia=u(ha),ja={path:fa,node:ea,data:((ea||{})[Q]||[]).dataPass,index:ga},ka=v(ha),la=b.doc.getElementById(ka),ma=b.utils.items.getItem(ka),na=ba.call(~ma?b.mod.getMod(ma):la,da,ia,ca,ja);if(ka&&la){var oa=function(){b.redraw(la,ma,1)};na&&na.then?na.then(function(pa){return oa(),pa}):oa()}return na}.bind({},_,$);return aa}function F($,_){function aa(ba){var ca=$[Q].eventHandlers[_];for(var da in ca){var ea=ca[da],fa=E($,ea),ga=fa(ba);!1===ga&&ba.preventDefault()}}$.removeEventListener(_,aa),$.addEventListener(_,aa)}function G($,_,aa,ba){var ca=_.substr(2).toLowerCase(),da=(ba?ba.split(')').pop():'')+'-'+aa[Q].uid,ea=aa[Q].events=aa[Q].events||[],fa=aa[Q].eventHandlers=aa[Q].eventHandlers||[];fa[ca]=fa[ca]||[],fa[ca][da]=$,ea[ca]||(ea[ca]=1,F(aa,ca))}function H($,_,aa,ba){var ca=u(aa);for(var da in P[h($)]=P[h($)]||[],_)if('text'!==da&&'html'!==da)if(0==da.indexOf('on'))G(_[da],da,$,ba);else{if('config'==da){var aa=r($),ca=u(aa),ea=!0;P[aa+'-config']?ea=!1:P[aa+'-config']={};var fa=P[aa+'-config'].configContext=P[aa+'-config'].configContext||{},ga=function(ka,la){return function(){return ka.apply(ka,la)}};c[aa]=ga(_[da],[$,ea,fa,ca]);continue}var ha={key:da,value:_[da],node:$};if(b.hook('attributes',da,ha),ha.change&&(da=ha.key,_[da]=ha.value),P[h($)]&&P[h($)][da]==_[da])continue;null===_[da]?$.removeAttribute(da):da in $?'style'==da?$[da].cssText=_[da]:$[da]=_[da]:$.setAttribute(da,_[da]+''),P[h($)][da]=_[da]}I($,_.text),J($,_.html)}function I($,_){if($&&null!=_&&!l($,_)){var aa=_+'';if('INPUT'!==$.nodeName)'SELECT'!==$.nodeName&&($.firstChild?$.firstChild.textContent=aa:$.appendChild($.ownerDocument.createTextNode(aa)));else if(!~['radio','checkbox'].indexOf($.type))aa!=$.value&&($.value=aa);else if($.name){var ba=b.getNode(O.id).querySelectorAll('[name='+$.name+']');if(1<ba.length)for(var ca of ba)if(ca.value==aa){ca.checked=!0;break}}'SELECT'===$.nodeName&&aa&&($.value=aa)}}function J($,_){!$||null==_||l($,_)||($.innerHTML=b.utils.isHTMLEle(_)?_.innerHTML:_)}function K($,_,aa){var ba=M($),ca=[],da=_,ea='$'===_[0];'$'===da[0]&&(da=da.substr(1));for(var fa=0;fa<ba.length;fa+=1)N(ba[fa],da)&&ca.push(ba[fa]);if(!ca.length||ea)for(var fa=0;fa<ba.length&&(ca=ca.concat(K(ba[fa],_,!0)),!ca.length||ea);fa++);if(!aa&&!ca.length){var ga={key:_,value:ca,node:$};b.hook('elementMatcher',_,ga),ga.change&&(ca=ga.value)}return ca}function L($){return O.id&&(b.utils.isHTMLEle(O.id)&&$[Q]&&$[Q].scid||$.id&&$.id!=O.id&&b.utils.items.isItem($.id))?0:1}function M($){var _=[];if($){var aa=$.childNodes;if(aa)for(var ba=0;ba<aa.length;ba+=1)1===aa[ba].nodeType&&L(aa[ba])&&_.push(aa[ba])}return _}function N($,_){var aa=' '+$.className+' ';return $.id===_||~aa.indexOf(' '+_+' ')||$.name===_||$.nodeName.toLowerCase()===_.toLowerCase()||$.getAttribute('data-bind')===_}var O={cached:[],ignorekeys:['toString','draw','then','hasOwnProperty','willgetprops','onbeforeunload','Symbol(Symbol.toStringTag)','nodeType','toJSON','onunload','willupdate','didupdate','didload','willload','isupdate']},P=O.cached,Q=b.MAGNUM,S='undefined',T='_key',U=[],V=[],W={},X=0;O.run=function($,_,aa){var ba,ca;if($){null==_&&(_={_text:''});var da=D($);if(ca=g(_),ca){if(W[aa]&&0===da.length&&(W[aa].parent.insertAdjacentHTML('beforeend',W[aa].node),da=D(W[aa].parent.children)),!da.length)return;var ea=da[0].parentNode;for(W[aa]||(W[aa]={node:da[0].cloneNode(1).outerHTML,parent:ea});da.length<_.length;)W[aa]?(ea.insertAdjacentHTML('beforeend',W[aa].node),ba=ea.lastChild):ba=da[0].cloneNode(1),da.push(ba),ea&&ea.appendChild(ba);var fa=_.map(function(ka){return ka&&ka[T]});if((da.length==_.length||-1!==fa.indexOf(f))&&(_=_.map(function(ka,la){if('object'==typeof ka){if(da[la][Q]=da[la][Q]||{},da[la][Q].__key&&typeof ka[T]==S)return ka[T]=da[la][Q].__key,ka;typeof ka[T]==S&&(ka[T]=Q+la),da[la][Q].__key=ka[T]}return ka})),da.length>_.length)if(0===_.length||'object'!=typeof _[0])for(;da.length>_.length;)ba=da.pop(),ea=ba.parentNode,ea&&t(ba);else{var ga=[],ha=_.map(function(ka){return ka[T]});da=da.filter(function(ka){var ma;return(typeof ka[Q]==S?ma=1:(!~ha.indexOf(ka[Q].__key)||~ga.indexOf(ka[Q].__key))&&(ga.push(ka[Q].__key),ma=1),ma)?(t(ka),!1):(ga.push(ka[Q].__key),!0)})}}for(var ia=0;ia<da.length;ia++)if(ca)da[ia]&&O.run(da[ia],_[ia]);else{var ja=j(da[ia]);_&&'object'==typeof _&&(da[ia][Q].isChildOfArray=!0,!b.utils.isHTMLEle(_)&&(da[ia][Q].dataPass=_)),da[ia][Q].xpath=ja,A(da[ia],_,ja,aa)}}};var Y=function($,_,aa,ba){var ca=w(_.parentNode),da=ca&&ca.getAttribute('key');ca&&da&&(aa=+da.split(Q)[1]);var ea=$(aa,ba);if(ea&&b.utils.isHTMLEle(ea))x(_,ea),_[Q]=_[Q]||{},_[Q].isChildOfArray=!0,_[Q].dataPass={index:aa},$.draw&&$.draw();else{var fa=/<[a-z][\s\S]*>/i.test(ea)?'_html':'_text',ga={};return ga[fa]=ea,A(_,ga,ba)}},Z=[];O.removeNode=t,O.configs=c,O.find=K,O.setId=$=>{O.id=$},O.clearCache=$=>{V[$]&&delete V[$]},b.fill=O}(mag,[]),function(b){function f(h,j,l,n){function q(t){return r.has(t)}var r=new WeakSet;return new Proxy(h,{get:function(t,u,v){var w=t[u];if('symbol'==typeof u)return w;if('object'!=typeof w||'symbol'==typeof w||null===w||'function'==typeof w||Array.isArray(w)||!b.utils.isObject(w)||w.then||w.draw)u in t||~b.fill.ignorekeys.indexOf(u.toString())||l||'_'==u[0]||(w=b.proxy({},j,l,n+g+u));else if(!q(w))return r.add(w),b.proxy(w,j,l,n+g+u);var x=j({type:'get',object:t,name:u,path:n,oldValue:Reflect.get(t,u,v)});return'undefined'!=typeof x&&(w=x==b.MAGNUM?void 0:x),w},deleteProperty:function(t,u){return j({type:'delete',name:u,object:t,oldValue:Reflect.get(t,u)}),Reflect.deleteProperty(t,u)},set:function(t,u,v,w){var x=Reflect.get(t,u,w);return x===v&&'length'!==u||(j({type:'set',name:u,object:t,oldValue:x}),Reflect.set(t,u,v,w))}})}var g='/';b.proxy=function(h,j,l,n){for(var q in h){var r=typeof h[q];Array.isArray(h[q])&&101>h[q].length?h[q]=f(h[q],j):'object'==r&&null!==h[q]&&'symbol'!=typeof q&&'symbol'!=r&&'function'!=r&&b.utils.isObject(h[q])&&(h[q]=b.proxy(h[q],j,l,n+g+q))}return f(h,j,l,n||g)}}(mag,window||global||this);
