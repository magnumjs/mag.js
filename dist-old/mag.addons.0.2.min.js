/*
Mag.JS AddOns v0.21
http://github.com/magnumjs/mag.js
(c) Michael Glazer
License: MIT
*/
mag.noop=function(){},mag.namespace=function(e,t){var n=e.split("."),a=n.shift();return t=t||this,t[a]=t[a]||{},n.length?mag.namespace(n.join("."),t[a]):t[a]},mag.copy=mag.utils.copy,mag.merge=mag.utils.merge,mag.show=function(e,t){if("object"!=typeof e){var n={_config:function(t){t.style.display=e?"block":"none"}};return"object"==typeof t&&mag.merge(t,n),n}e.willupdate=function(e,n,a){n.style.display=a[t]?"block":"none"}},mag.deferred=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},mag.when=function(e,t){Promise.all(e).then(t)},mag.requestWithFeedback=function(e){var t=JSON.stringify(e);if(!mag.requestWithFeedback.cache[t]){for(var n,a=document.querySelectorAll(".loader"),i=0;n=a[i];i++)n.style.display="block";var o=function(e){if(delete mag.requestWithFeedback.cache[t],0==Object.keys(mag.requestWithFeedback.cache).length)for(var n,i=0;n=a[i];i++)n.style.display="none";return e};mag.requestWithFeedback.cache[t]=mag.request(e).then(o,function(e){throw o(e),e})}return mag.requestWithFeedback.cache[t]},mag.requestWithFeedback.cache={},mag.hookin("attributes","className",function(e){e.key="class";var t=e.value;if("string"==typeof e.value)t=e.value.split(" ");else if("object"==typeof e.value){for(var n in t)e.node.classList.toggle(n,t[n]);return void(e.value=e.node.classList+"")}e.value=e.node.classList+"";for(n in t){var a=t[n];a.trim()&&0<e.node.classList.length&&!e.node.classList.contains(a.trim())?e.value=e.node.classList+" "+a:a.trim()&&0==e.node.classList.length&&(e.value+=a+" ")}e.value=e.value.trim()}),mag.disable=function(e,t){"object"!=typeof this[e]&&(this[e]={_value:this[e]});var n=this[e]._config?this[e]._config:function(){};this[e]._config=function(e){n.call(this,arguments),t()?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")}},mag.find=function(e,t){var n=document.getElementById(e);return mag.fill.find(n,t)},mag.toMenu=function(e,t){return e.map(function(e,n){return{_text:e,_value:n,_selected:t===n||t===e?!0:null}})};
