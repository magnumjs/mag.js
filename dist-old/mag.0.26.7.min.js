/*
Mag.JS v0.26.7
http://github.com/magnumjs/mag.js
(c) Michael Glazer
License: MIT
*/
!function(a,b,c){"use strict";function y(a,b){if(k[a]&&!b)return k[a];var c=mag.doc.getElementById(a);return c&&(k[a]=c),k[a]}var d="KEY",e=["#"+d,"."+d,d],f=function(a,b){var c;for(var f in e){var g=e[f].replace(d,b);if(c=a.querySelector(g))break}return c},g=function(a){var b=mag.utils.items.getItemVal(a),c=mag.getNode(b);return c},h=function(a){if("string"==typeof a){var b=g(~mag.mod.runningViewInstance||mag.utils.runningEventInstance),c=f(b||mag.doc,a);if(c)return c}return a},i=function(a,b){var f,c=[],d=a.cloneNode(1),e=[];return function(g){var h=a;if(g){var i=g.key;i&&!c[i]?h=c[i]=d.cloneNode(1):i&&c[i]&&(h=c[i])}if(!f||!g||f!=JSON.stringify(g)){f=JSON.stringify(g);var j;j=f in e?e[f]:e[f]=b(g),mag.fill.run(h,j)}return h}};a.mag=function(a,b,c){return a=h(a),b=h(b),mag.utils.isHTMLEle(b)&&mag.utils.isHTMLEle(a)?void(b[mag.MAGNUM]||mag.fill.run(b,a)):"function"==typeof b&&mag.utils.isHTMLEle(a)?i(a,b):x(-1,y(mag._isNode(a)),b,c||{})},mag.MAGNUM="__magnum__",mag.doc=b;var j={values:[],attributes:[],elementMatcher:[]},k=[],l=0;mag._isNode=function(a){return mag.utils.isHTMLEle(a)&&(a.id||(a.id=++l),k[a.id]=a,a=a.id),a};var m=function(a,b){var c,d=b?a+"-"+b:a;return c=mag.utils.items.isItem(d)?mag.utils.items.getItem(d):mag.utils.getItemInstanceId(d)};mag.module=function(a,b,c){c=c||{},a=mag._isNode(a);var d=m(a,c.key),e=n(c,d,b,a);if(e)return x(d,e,b,mag.utils.copy(c))};var n=function(a,b,c,d){a.retain||mag.mod.clear(b),mag.mod.submodule(d,b,c,a);var e=y(d);if(z(b,d),!E(b,e))return mag.redraw(e,b,1).then(function(){F(b,e)}),e},o=function(a,b){return!(b<0||b!=mag.utils.items.getItem(a))||a==mag.mod.getId(b)},p=[];mag.begin=function(a){"undefined"==typeof p[a]?p[a]=1:p[a]++},mag.end=function(a){if(p[a]>1)p[a]--;else{p[a]=0;var b=mag.utils.items.getItemVal(a);mag.redraw(y(b),a)}},mag.redraw=function(a,b,c){if(!p[b]){if(!a||"undefined"==typeof b)throw Error("Mag.JS - Id or node invalid: "+mag.utils.items.getItemVal(b));if(!o(a.id,b))return;if(c&&mag.fill.configs.splice(0,mag.fill.configs.length),c&&mag.mod.clear(b),mag.mod.runningViewInstance==b)throw Error("Mag.JS - recursive call: "+b);var d=A(a,b,c);return mag.utils.scheduleFlush(d)}},mag.hookin=function(a,b,c){j[a].push({context:{},handler:c,key:b})},mag.hook=function(a,b,c){for(var d=0,e=j[a].length;d<e;d++)mag.utils.callHook(j,b,a,d,c)};var q={},r=[],s=[],t=function(a,b,c){var d=mag.getNode(mag.mod.getId(a)),e=function(){mag.utils.callLCEvent("onunload",mag.mod.getState(a),d,a)||(mag.clear(a),D(a,d),b[a]&&(b[a].length=0),c&&(mag.fill.removeNode(d),mag.mod.remove(a)))};mag.mod.getState(a).onbeforeunload?mag.utils.callLCEvent("onbeforeunload",mag.mod.getState(a),d,a,0,function(){e()}):e()},u=function(a,b){s[a]=s[a]||[];var c=s[a].push(b);return mag.utils.onLCEvent("didupdate",a,function(b,c){var d=mag.utils.merge(mag.utils.copy(c),mag.utils.copy(b));if(JSON.stringify(d)!==JSON.stringify(r[a])){for(var e of s[a])e(b,c,y(mag.mod.getId(a)),r[a]);r[a]=d}}),function(){return s[a].splice(c-1,1)}},v=[],w=function(a,b,c,d,e){var f=mag.utils.items.getItem(b);F(f,a),mag.mod.exists(f)&&mag.utils.callLCEvent("willgetprops",mag.mod.getState(f),a,f,0,c)||(mag.mod.submodule(a.id,f,d,c),z(f,a.id),E(f,a)||mag.redraw(a,f,e).then(function(){F(f,a)}))},x=function(a,b,c,d){v[a]=v[a]||[];var e=function(a,b,c,d,f){"object"==typeof f&&(d=mag.utils.merge(mag.utils.copy(d),f),f=0);var g=b.id+(d.key?"."+d.key:"")+"."+(f||0);!q[g]||d.key||~e._id||(g+=++l);var h=q[g]=q[g]||b.cloneNode(1);if(h.id=g,mag.utils.items.isItem(g))return w(h,g,d,c,1),h;var i=mag.utils.getItemInstanceId(h.id);return a<0?a=e._id=i:v[a].push({instanceId:i,subscribe:u.bind({},i)}),w(h,g,d,c,1),h}.bind({},a,b,c,d);return e._id=a,e.clones=function(){return v[e._id]},e.destroy=function(a){t(e._id,e.clones,a)},e.getId=function(){return e._id},e.draw=function(a){return mag.redraw(b,e._id,a)},e.getState=function(){return mag.mod.getState(e._id)},e.getProps=function(){return mag.mod.getProps(e._id)},e.subscribe=function(a){return u(e._id,a)},e},z=function(a,b){var c=function(a,b){y(b)?mag.redraw(y(b),a):mag.utils.items.isItem(b)&&mag.clear(a)}.bind({},a,b);mag.mod.setFrameId(a,c)};mag.clear=function(a){mag.utils.items.removeItem(a),mag.mod.clear(a),mag.fill.clearCache(mag.mod.getId(a))};var A=function(a,b,c){return function(a,b,c){if(y(a.id,1),o(a.id,b)&&a){var d=mag.mod.getState(b);if(!mag.utils.callLCEvent("isupdate",d,a,b))return mag.mod.iscached(b)&&!c?0:void(mag.utils.callLCEvent("willupdate",d,a,b)||(mag.mod.callView(a,b),mag.fill.setId(a.id),mag.fill.run(a,d),B(a.id,mag.fill.configs),mag.utils.callLCEvent("didupdate",d,a,b),c||mag.mod.iscached(b)))}}.bind({},a,b,c)},B=function(a,b){for(var c in b)c.startsWith('id("'+a+'")/')&&b[c]()},C=function(a,b){var c=[];for(var d in mag.fill.cached)d.indexOf('id("'+a+'")/')>-1&&d.indexOf("-config")>-1&&mag.fill.cached[d].configContext&&c.push({path:d.split("-config")[0],controller:mag.fill.cached[d].configContext,handler:mag.fill.cached[d].configContext.onunload});return c},D=function(a,b){for(var e,c=C(b.id,a),d=0,f=c;e=f&&f[d];d++)e.controller.onunload&&(e.handler.call(e.controller,b,e.path),e.controller.onunload=0)},E=function(a,b){return mag.utils.callLCEvent("willload",mag.mod.getState(a),b,a,1)},F=function(a,b){var c=mag.utils.items.getItemVal(a);if(y(c))return mag.utils.callLCEvent("didload",mag.mod.getState(a),b,a,1)};mag.getNode=y}(window||global||this,document),function(a){"use strict";var b={};b.isObject=function(a){return"Object]"==a.toString().substr(-7)},b.isHTMLEle=function(a){return a&&a.nodeType&&1==a.nodeType},b.callHook=function(a,b,c,d,e,f){a[c][d].key==b&&(f={v:e.value,k:e.key},e.change=!1,a[c][d].handler.call(a[c][d].context,e),f!=={v:e.value,k:e.key}&&(e.change=!0))};var c=!1,d=[];b.scheduleFlush=function(a){return new Promise(function(b){d.push(a),c?b():(c=!0,requestAnimationFrame(function(){for(var a;a=d.shift();)a();c=!1,b()}))})};var e=[];b.onLCEvent=function(a,b,c){var d=a+"-"+b;e[d]=e[d]||[];var f=e[d].push(c);return function(){return e[d].splice(f-1,1)}},b.callLCEvent=function(c,d,f,g,h,i){var j;b.runningEventInstance=g,d&&d[c]&&(j=d[c].call(d,f,a.mod.getProps(g),g,i),h&&(d[c]=0));var k=c+"-"+g;if(e[k]){for(var l of e[k])l(a.mod.getState(g),a.mod.getProps(g));h&&(e[c]=0)}if(b.runningEventInstance=-1,j===!1)return!0},b.copy=function(a){return Object.assign({},a)},b.merge=function(){return Object.assign.apply({},arguments)};var f={i:[],isItem:function(a){return~f.i.indexOf(a)},setItem:function(a){f.i[f.i.length]=a},getItem:function(a){return f.i.indexOf(a)},getItemVal:function(a){return f.i[a]},removeItem:function(a){f.i.splice(f.i.indexOf(a),1)}};b.items=f,b.getItemInstanceIdAll=function(){return f.i},b.getItemInstanceId=function(a){return f.isItem(a)?f.getItem(a):(f.setItem(a),f.getItem(a))},a.utils=b}(mag),function(a){"use strict";function g(b,d){var e=b.name;if("undefined"==typeof b.object[b.name]&&"_"!==e[0]){var f=a.fill.find(d,e),g="$"===e[0],h=[];return f.length?(f.forEach(function(a){var e;if(a&&a.type&&!~["submit","button"].indexOf(a.type)){if(a.value&&a.value.length>0)if("checkbox"==a.type||"radio"==a.type)if(a.checked&&(e={},e._checked=!0),g)e?e._value=a.value:e={_value:a.value};else{var f=d.querySelectorAll("[name="+a.name+"]");if(f.length)for(var i of f)i.checked&&(e?e._value=i.value:e={_value:i.value})}else e={_value:a.value}}else"undefined"==typeof b.oldValue&&"undefined"==typeof b.object[b.name]&&a&&!~["submit","button"].indexOf(a.type)&&1==a.childNodes.length&&a.childNodes[0].textContent.trim()&&(e={_text:a.childNodes[0].textContent.trim()});e?h.push(e):a&&!a.hasChildNodes()&&h.push(c)}),0===h.length?void 0:g?h:h[0]&&"undefined"!=typeof h[0]._value?h[0]._value:h[0]&&h[0]._text?h[0]._text:h[0]):c}}function j(b,c,d){var f;return e.setProps(c,a.proxy(e.getProps(c),i.bind({},"props",c),"prop")),f=new b(a.proxy({},i.bind({},"state",c)))}var b=[],c=a.MAGNUM,e={runningViewInstance:-1,innerMods:[],cache:[]};e.getState=function(a){return b[a][1]},e.setState=function(a,c){b[a][1]=c},e.getView=function(a){return b[a][0]},e.getProps=function(a){return b[a][2]},e.setProps=function(a,c){return b[a][2]=c},e.remove=function(a){b.splice(a,1)},e.getId=function(a){return b[a]&&b[a][3]},e.exists=function(a){return"undefined"!=typeof b[a]},e.setFrameId=function(a,c){b[a][4]=c},e.getFrameId=function(a){return b[a][4]},e.submodule=function(c,d,f,g){if(b[d])return g.key&&g.key===e.getProps(d).key?e.setProps(d,a.utils.copy(a.utils.merge(e.getProps(d),g))):e.setProps(d,g),b[d];b[d]=[0,0,0,0,0],e.setProps(d,g);var h=function(a){return(f.controller||function(){}).call(a,e.getProps(d))||a},i=function(a,b,c){f.view&&f.view.call(f,b,e.getProps(a),c)}.bind({},d),k={controller:h,view:i};return b[d][0]=k.view,b[d][3]=c,b[d][1]=j(k.controller,d,c),b[d]};var f=[],h=function(b,c){var d=b,e=c.split("/");for(var f of e)if(f){var g=a.fill.find(d,f);g.length&&(d=g[0])}return d},i=function(b,c,d){if("get"!=d.type||"props"==b||~a.fill.ignorekeys.indexOf(d.name.toString())||"undefined"!=typeof d.oldValue)"set"==d.type&&"props"!=b&&d.object[d.name]&&d.object[d.name].draw&&"function"==typeof d.object[d.name].draw&&(e.innerMods[e.getId(c)]=[d.name,d.object[d.name]]);else{var i=a.doc.getElementById(e.getId(c));if(d.path&&"/"==d.path[0])var j=h(i,d.path);var k=g(d,j?j:i);if("undefined"!=typeof k&&"object"==typeof k&&d.object&&a.utils.merge(k,d.object[d.name]),"undefined"!=typeof k)return e.cached[c]=0,k}var l=e.getFrameId(c);"function"==typeof l&&"set"==d.type&&(cancelAnimationFrame(f[c]),f[c]=requestAnimationFrame(l))};e.iscached=function(b){var c=JSON.stringify(a.utils.merge(a.utils.copy(e.getProps(b)),e.getState(b)));return b in e.cache&&e.cache[b]==c||void(e.cache[b]=c)},e.remove=function(a){b[a]&&(b[a]=0)},e.clear=function(a){~a&&e.cache[a]&&e.cache.splice(a,1)},e.cached=[],e.callView=function(b,c){e.runningViewInstance=c,e.cached[c]||(a.props.attachToArgs(c,e.getState(c),b),e.cached[c]=1);try{e.getView(c)(e.getState(c),b)}finally{e.runningViewInstance=-1}},a.mod=e}(mag),function(a,b){"use strict";function g(a,b,c,d){var e=[];for(var f in a){var g=a[f];i(g)&&(e.push(g),h(g,b,c,d))}return!!e.length&&(1==e.length?e[0]:e)}function h(b,c,e,f){if(b[d]=b[d]||{},!b[d].eventOnFocus){var g=function(c,e,f,g){var h=~["radio","checkbox"].indexOf(b.type);this[d].dirty||(this[d].dirty=1),h&&("_checked"in e||"_value"in e?e._checked=this.checked:this.checked&&(e[f]=this.value)),a.redraw(c,a.utils.items.getItem(c.id))}.bind(b,f,c,e);b.addEventListener("click",g,!1),b.addEventListener("input",g,!1),b.addEventListener("focus",g,!1),b[d].eventOnFocus=1}}function i(a){return a&&~["INPUT","SELECT","TEXTAREA"].indexOf(a.tagName)}function j(a){for(var b in a)if(i(a[b]))return a[b];return!1}var c={},d=a.MAGNUM,e=function(b,c){for(var d=1;d<b.length;d++){var e=b[d],f=b[d+1],g=a.fill.find(Array.isArray(c)?c[0]:c,e);f&&!isNaN(Number(f))?c=g[f]:g&&g.length&&f?c=a.fill.find(g[0],f):g&&g.length&&(c=g)}return Array.isArray(c)?c[0]:c},f=function(b,c,d,f){var i,h=d.toString().split(".");if(h.length>=3)f=e(h,f),i=a.fill.find(f,c);else{var j=parseInt(h.pop()),k=isNaN(j)?0:j;i=a.fill.find(f[k]?f[k]:f,c)}return g(i,b,c,f)},k=function(b,c,e,g){var h=e[c];~["_value","_checked"].indexOf(c)&&(c=b.split(".").pop());var i=a.fill.find(g,c),k=j(i);if("function"!=typeof h&&k){var l=f.bind({},e,c,b,g);l(),Object.defineProperty(e,c,{configurable:!0,get:function(){var c=l();return c&&"undefined"!==c.value&&c[d]&&c[d].dirty&&c.value!==h?(h=c.value,a.redraw(g,b,1),c.value):h},set:function(a){var b=l();b&&"undefined"!==b.value&&b.value!==a&&a!==h&&(b.value=a,h=a)}})}},l=function(b,c,d){for(var e in c)if(c.hasOwnProperty(e)){var f=c[e];"object"!=typeof f||a.utils.isHTMLEle(f)?k.bind({},b,e,c,d)():l(b+"."+e,f,d)}};c.attachToArgs=l,a.props=c}(mag),function(a,b,c){"use strict";function m(a){return Array.isArray(a)}function o(a,b){return a[f]=a[f]||{},a[f].uid&&!b||(a[f].uid=++n),a[f].uid}function p(a,b){var c=o(a,b);return j[c]?j[c]:j[c]=s(a)}function q(a,b,c){var e=o(a,c);return k[d.id]=k[d.id]||[],k[d.id][e]&&k[d.id][e]==b?1:void(k[d.id][e]=b)}function r(a){return a.id?a:a.parentNode?r(a.parentNode):void 0}function s(a){var b="",c=r(a),d=a.parentNode&&[].indexOf.call(a.parentNode.children,a);return c&&(b+='id("'+c.id+'")'),b+="/"+a.tagName+"["+(d+1)+"]"}function t(b){if(b.id&&d.id===b.id)return'id("'+b.id+'")';if(b===a.doc.body)return b.tagName;var c=0;if(b.parentNode)for(var e=b.parentNode.childNodes,f=0;f<e.length;f++){var g=e[f];if(g===b)return t(b.parentNode)+(b.tagName?"/"+b.tagName+"["+(c+1)+"]":"");1===g.nodeType&&g.tagName===b.tagName&&c++}}function u(b){var c=t(b);b&&e[c+"-config"]&&e[c+"-config"].configContext&&typeof e[c+"-config"].configContext.onunload===g&&(e[c+"-config"].configContext.onunload(e[c+"-config"].configContext,b,c),delete e[c+"-config"],delete d.configs[c]),b.parentNode&&b.parentNode.removeChild(b),a.mod.cached[a.utils.items.getItem(d.id)]=0}function v(a){var b=a&&parseInt(a.split("[").pop().slice(0,-1));return b?parseInt(b)-1:0}function w(a){return a&&~a.indexOf("id(")&&a.split('id("')[1].split('")')[0]}function x(a){return a&&a[f]&&a[f].isChildOfArray?a:a.parentNode?x(a.parentNode):void 0}function y(b,c,d){if(!q(b,c.outerHTML,d)&&(!c.id&&!b.childNodes[0]||c.id&&!a.doc.getElementById(c.id)||b.firstChild&&!b.firstChild.isEqualNode(c))){for(;b.lastChild;)b.removeChild(b.lastChild);b.appendChild(c)}}function z(a,b){var d;for(var e in b){var g=b[e];g===c?g="":null===g&&["onunload"].indexOf(e)===-1?(a[f].detached=a[f].detached||[],a[f].detached[e]=1,F(a,e)):a[f].detached&&a[f].detached[e]&&(E(a,e),a[f].detached[e]=0),"_"===e[0]&&"_"!==e[1]&&(d=d||{},d[e.substr(1)]=g)}return d}function A(b,c,e){var f;for(var g in c){var h=c[g];if(!~d.ignorekeys.indexOf(g)&&"_"!==g[0]){f=L(b,g);var i={key:g,value:h,node:b};a.hook("values","*",i),i.change&&(h=i.value),m(h)&&(f=L(b,"$"+g)),d.run(f,h,e+"/"+g)}}}function C(b,c,e){var f,j=v(e);return c&&a.utils.isHTMLEle(c)?void y(b,c):"function"==typeof c?B(c,b,j,e):"object"!=typeof c?C(b,{_text:c},e):(a.mod.innerMods[d.id]&&c[a.mod.innerMods[d.id][0]]&&!c[a.mod.innerMods[d.id][0]].draw&&a.mod.innerMods[d.id][1].destroy(),f=z(b,c),f&&I(b,f,e),void A(b,c,e))}function E(a,b){var c=L(a,b);c.forEach(function(a){var b=o(a);if(b in D){for(var c in D[b])a.appendChild(D[b][c]);delete D[b]}})}function F(b,c){var d=0,e=1,f=function(a){if(++d===e)for(;a.lastChild;)u(a.lastChild)},g=function(b,c){var d;b.id&&a.utils.items.isItem(b.id)&&(d=a.utils.items.getItem(b.id)),d&&a.mod.getState(d).onbeforeunload?(e++,a.utils.callLCEvent("onbeforeunload",a.mod.getState(d),b,d,0,function(){d&&a.utils.callLCEvent("onunload",a.mod.getState(d),b,d),c()})):(d&&a.utils.callLCEvent("onunload",a.mod.getState(d),b,d),c())},h=L(b,c);h.forEach(function(a){var b=o(a);a.children.length&&(D[b]=G(a.children));for(var d in D[b]){var e=D[b][d];g(e,function(){f(a)})}f(a)})}function G(a){var b;if(null==a.length&&(a=[a]),!m(a)){b=[];for(var c=0;c<a.length;c+=1)a[c]&&b.push(a[c]);a=b}return a}function H(b,c,d){var e=function(b,c,d){var e=x(c),g=e&&t(e),h=v(g),i=p(c,1),j=v(i),k={path:g,data:((e||{})[f]||[]).dataPass,node:e,index:h},l=w(i),m=a.doc.getElementById(l),n=b.call(c,d,j,c,k);if(l&&m){var o=function(){a.redraw(m,a.utils.items.getItem(l),1)};n&&n.then?n.then(function(a){return o(),a}):o()}return n}.bind({},c[d],b);return e}function I(c,d,f){var g=v(f);e[o(c)]=e[o(c)]||[];for(var h in d)if("text"!==h&&"html"!==h)if(0==h.indexOf("on"))c[h.toLowerCase()]=H(c,d,h);else{if("config"==h){var f=t(c),g=v(f),i=!0;e[f+"-config"]?i=!1:e[f+"-config"]={};var j=e[f+"-config"].configContext=e[f+"-config"].configContext||{},k=function(a,b){return function(){return a.apply(a,b)}};b[f]=k(d[h],[c,i,j,g]);continue}var l={key:h,value:d[h],node:c};if(a.hook("attributes",h,l),l.change&&(h=l.key,d[h]=l.value),e[o(c)]&&e[o(c)][h]==d[h])continue;null===d[h]?c.removeAttribute(h):h in c?"style"==h?c[h].cssText=d[h]:c[h]=d[h]:c.setAttribute(h,String(d[h])),e[o(c)][h]=d[h]}J(c,d.text),K(c,d.html)}function J(b,c){if(b&&null!=c&&!q(b,c)){var e=String(c);if("INPUT"===b.nodeName)if(~["radio","checkbox"].indexOf(b.type)){if(b.name){var f=a.getNode(d.id).querySelectorAll("[name="+b.name+"]");if(f.length>1)for(var g of f)if(g.value==e){g.checked=!0;break}}}else e!=b.value&&(b.value=e);else"SELECT"!==b.nodeName&&(b.firstChild?b.firstChild.textContent=e:b.appendChild(b.ownerDocument.createTextNode(e)));"SELECT"===b.nodeName&&e&&(b.value=e)}}function K(a,b){a&&null!=b&&!q(a,b)&&(a.innerHTML=b)}function L(b,c,d){var e=N(b),f=[],g=c,h="$"===c[0];"$"===g[0]&&(g=g.substr(1));for(var i=0;i<e.length;i+=1)O(e[i],g)&&f.push(e[i]);if(!f.length||h)for(var i=0;i<e.length&&(f=f.concat(L(e[i],c,!0)),!f.length||h);i++);if(!d&&!f.length){var j={key:c,value:f,node:b};a.hook("elementMatcher",c,j),j.change&&(f=j.value)}return f}function M(b){return!a.utils.items.isItem(b.id)}function N(b){var c=[];if(b){var d=b.childNodes;if(d)for(var e=0;e<d.length;e+=1)a.utils.isHTMLEle(d[e])&&M(d[e])&&c.push(d[e])}return c}function O(a,b){var c=" "+a.className+" ";return a.id===b||~c.indexOf(" "+b+" ")||a.name===b||a.nodeName.toLowerCase()===b.toLowerCase()||a.getAttribute("data-bind")===b}var d={cached:[],ignorekeys:["toString","draw","then","hasOwnProperty","willgetprops","onbeforeunload","Symbol(Symbol.toStringTag)","nodeType","toJSON","onunload","willupdate","didupdate","didload","willload","isupdate"]},e=d.cached,f=a.MAGNUM,g="function",h="undefined",i="_key",j=[],k=[],l={},n=0;d.run=function(a,b,e){var g,j;if(a){null==b&&(b={_text:""});var k=G(a);if(j=m(b)){if(l[e]&&0===k.length&&(l[e].parent.insertAdjacentHTML("beforeend",l[e].node),k=G(l[e].parent.children)),!k.length)return;var n=k[0].parentNode;for(l[e]||(l[e]={node:k[0].cloneNode(1).outerHTML,parent:n});k.length<b.length;)l[e]?(n.insertAdjacentHTML("beforeend",l[e].node),g=n.lastChild):g=k[0].cloneNode(1),k.push(g),n&&n.appendChild(g);var o=b.map(function(a){return a&&a[i]});if(k.length!=b.length&&o.indexOf(c)===-1||(b=b.map(function(a,b){if("object"==typeof a){if(k[b][f]=k[b][f]||{},k[b][f].__key&&typeof a[i]===h)return a[i]=k[b][f].__key,a;typeof a[i]===h&&(a[i]=f+b),k[b][f].__key=a[i]}return a})),k.length>b.length)if(0===b.length||"object"!=typeof b[0])for(;k.length>b.length;)g=k.pop(),n=g.parentNode,n&&u(g);else{var q=[],r=b.map(function(a){return a[i]});k=k.filter(function(a,b){var c;return typeof a[f]==h?c=1:~r.indexOf(a[f].__key)&&!~q.indexOf(a[f].__key)||(q.push(a[f].__key),c=1),c?(u(a),!1):(q.push(a[f].__key),!0)})}}for(var s=0;s<k.length;s++)if(j)k[s]&&d.run(k[s],b[s]);else{var t=p(k[s]);b&&"object"==typeof b&&(k[s][f]=k[s][f]||{},b[i]!==c&&(k[s][f].isChildOfArray=!0,k[s][f].dataPass=b[f]),k[s][f].xpath=t),C(k[s],b,t)}}};var B=function(b,c,d,e){var g=x(c.parentNode),h=g&&g.getAttribute("key");g&&h&&(d=+h.split(f)[1]);var i=b(d);if(i&&a.utils.isHTMLEle(i))return y(c,i),c[f]=c[f]||{},c[f].isChildOfArray=!0,c[f].dataPass={index:d},void(b.draw&&b.draw());var j=/<[a-z][\s\S]*>/i.test(i)?"_html":"_text",k={};return k[j]=i,C(c,k,e)},D=[];d.removeNode=u,d.configs=b,d.find=L,d.setId=function(a){d.id=a},d.clearCache=function(a){k[a]&&delete k[a]},a.fill=d}(mag,[]),function(a,b){function d(b,d,e,f){function h(a){return g.has(a)}var g=new WeakSet;return new Proxy(b,{get:function(b,i,j){var k=b[i];if("symbol"==typeof i)return k;if("object"!=typeof k||"symbol"==typeof k||null===k||"function"==typeof k||Array.isArray(k)||!a.utils.isObject(k)||k.then||k.draw)i in b||~a.fill.ignorekeys.indexOf(i.toString())||e||"_"==i[0]||(k=a.proxy({},d,e,f+c+i));else if(!h(k))return g.add(k),a.proxy(k,d,e,f+c+i);var l=d({type:"get",object:b,name:i,path:f,oldValue:Reflect.get(b,i,j)});return"undefined"!=typeof l&&(k=l==a.MAGNUM?void 0:l),k},deleteProperty:function(a,b){return d({type:"delete",name:b,object:a,oldValue:Reflect.get(a,b)}),Reflect.deleteProperty(a,b)},set:function(a,b,c,e){var f=Reflect.get(a,b,e);return f===c&&"length"!==b||(d({type:"set",name:b,object:a,oldValue:f}),Reflect.set(a,b,c,e))}})}var c="/";a.proxy=function(b,e,f,g){for(var h in b){var i=typeof b[h];Array.isArray(b[h])&&b[h].length<101?b[h]=d(b[h],e):"object"==i&&null!==b[h]&&"symbol"!=typeof h&&"symbol"!=i&&"function"!=i&&a.utils.isObject(b[h])&&(b[h]=a.proxy(b[h],e,f,g+c+h))}return d(b,e,f,g||c)}}(mag,window||global||this);
